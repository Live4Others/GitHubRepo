var amdocs=amdocs||{};amdocs.utils=amdocs.utils||{},amdocs.utils.polyfill={createArray:function(a){var b=a;return(angular.isUndefined(a)||!angular.isArray(a))&&(b=[]),angular.isFunction(b.indexOf)||(b.indexOf=function(a,b){var c=this.length||0;if(0>=c)return-1;if(b=b||0,b=0>b?Math.ceil(b):Math.floor(b),b>=c)return-1;for(0>b&&(b+=c);c>b;){if(b in this&&this[b]===a)return b;b++}return-1}),b}},amdocs.utils.isScope=function(a){return a&&a.$evalAsync&&a.$watch},amdocs.providers={uxfHub:function(a){var b=null,c=[],d=function(){require([a],function(a){b=a.hub,angular.forEach(c,function(a){b.subscribe(a.name,a.options)})})};d(),this._hasExpPackageLoaded=function(){return angular.isObject(b)},this.subscribeTopic=function(a,d){this._hasExpPackageLoaded()?b.subscribe(a,d):c.push({name:a,options:d})},this.unsubscribeTopic=function(a,d){if(this._hasExpPackageLoaded())b.unsubscribe(a,d);else for(var e=0;e<c.length;e++){var f=c[e];if(f.name===a&&f.options===d){c.splice(e,1);break}}},this.isTopicWriteOnly=function(a){return this._hasExpPackageLoaded()?b.isTopicWriteOnly?b.isTopicWriteOnly(a):!1:void 0},this.isTopicReadOnly=function(a){return this._hasExpPackageLoaded()?b.isTopicReadOnly(a):void 0},this.publish=function(a,c,d){if(!this._hasExpPackageLoaded())throw"Amdocs Experiance Package Hub is not ready for work yet.";b.publish(a,c,d)},this.$get=function(){return{subscribeTopic:this.subscribeTopic,unsubscribeTopic:this.unsubscribeTopic,isTopicWriteOnly:this.isTopicWriteOnly,isTopicReadOnly:this.isTopicReadOnly,publish:this.publish,_hasExpPackageLoaded:this._hasExpPackageLoaded}}},uxfWrapper:function(a){var b=amdocs.utils.polyfill.createArray([]),c=function(b){var c,d=amdocs.utils.polyfill.createArray([]),e=function(a){c=a.data,angular.forEach(d.slice(0),function(b){switch(a.action){case"$change":b.change(a);break;case"$subscribe":b.subscribe(a);break;default:b.action(a)}},this)},f={handler:e,context:this},g=function(e){return a.isTopicWriteOnly(b)?void e.subscribe({data:void 0,action:"$subscribe"}):(d.push(e),void(c&&e.subscribe&&e.subscribe({data:c,action:"$subscribe"})))},h=function(a){var b=d.indexOf(a);b>=0&&d.splice(b,1)},i=function(a,b,c){var d,e;if("string"==typeof b)for(b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,""),d=b.split(".");d.length;){if(e=d.shift(),"object"!=typeof a)return void 0;!c||e in a||(a[e]={}),a=a[e]}return a},j=function(a,b,c){a=i(a,b,!0),amdocs.utils.isScope(c)||(c=angular.copy(c)),angular.extend(a,c)};this.initialize=function(){a.subscribeTopic(b,f)},this.destroy=function(){a.unsubscribeTopic(b,f),d=amdocs.utils.polyfill.createArray([])},this.fetchTopicInfo=function(a){if(!angular.isFunction(a))throw"Argument exception: callback must be a function.";var b={subscribe:function(){a(c),h(b)}};g(b)},this.syncScope=function(c,d){var e,f={},k=function(a){j(c,d,a.data),c.$root.$$phase||c.$digest()},l=function(e){var g=i(c,d);amdocs.utils.isScope(g)||(g=angular.copy(g)),a._hasExpPackageLoaded()?a.publish(b,g):angular.extend(f,e)},m=function(){e&&e(),e=c.$watch(d,l,!0)},n=function(a){angular.extend(a.data,f),k(a),m()},o=function(a){c.$emit(a.action,a.data),c.$emit("$actions",a)},p={change:k,subscribe:n,action:o};g(p),m();var q=this,r=c.$on("$destroy",function(){q.destroy()}),s=function(){h(p),r(),e&&e()};return s},this.triggerAction=function(c){a.publish(b,{},c)},this.getMyName=function(){return b},this._hasExpPackageLoaded=function(){return a._hasExpPackageLoaded()},this.initialize()};this.wrap=function(a,d,e,f){var g=function(d,f){var g=d+"Factory";return f=f||"uxfData",b.indexOf(g)<0&&(a.factory(g,[function(){return new c(d)}]),e.register(d+"Controller",["$scope",g,function(a,b){b.syncScope(a,f)}]),b.push(g)),g},h=function(a,b,c){var e=function(){var c=Array.prototype.slice.call(arguments,0,arguments.length-1),d=arguments[arguments.length-1],e="amdocs-uxf-"+a;return{template:'<div class="amdocs-uxf-widget '+e+'"></div>',restrict:"E",scope:{servicesData:"="},link:function(a,e,f){var g=function(){var b=function(b,c){var e=c.action;if(f[e]){var g=d(f[e]);g(a.$parent,c)}},e="servicesData";angular.isUndefined(a.servicesData)&&(e="uxfData",a[e]={}),angular.forEach(c,function(c){c.syncScope(a,e+"."+c.getMyName()),a.$on("$actions",b)}),a.$on("$destroy",function(){a.myWidget.destroy()})},h={el:e.children()[0],config:f};"object"==typeof b?require(["jquery","lightsaber",b.expPackgePath],function(c,d,e){var f=this;e[b.widgetName](h,function(b){a.myWidget=b,g.call(f)})}):require(["jquery","lightsaber",b],function(b,c,d){a.myWidget=new d(h),g()})}}},f=angular.copy(c);f.push("$parse"),f.push(e),d.directive(a,f)};angular.forEach(f.topics,function(a){g(a.name)}),angular.forEach(f.widgets,function(a){var b=[];a.topics&&angular.forEach(a.topics,function(a){b.push(g(a.name))}),h(a.name,a.path,b)})},this.$get=function(){}}},amdocs.wrapAsAngular=function(a,b,c){c||(c="amdocs.uxf"),b||(b="amdocsExpPackage");var d;try{d=angular.module(c)}catch(e){d=angular.module(c,[])}d.constant("expPackage",b),d.provider("uxfHub",["expPackage",amdocs.providers.uxfHub]),d.provider("uxfWrapper",["uxfHubProvider",amdocs.providers.uxfWrapper]),d.config(["uxfWrapperProvider","$compileProvider","$provide","$controllerProvider",function(b,c,d,e){b.wrap(d,c,e,a)}])};
//# sourceMappingURL=uxfWrapper.min.js.map