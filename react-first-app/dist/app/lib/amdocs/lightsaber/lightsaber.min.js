define("src/core/util/Utils",["jquery","underscore","backbone","knockout","knockout.mapping"],function(e,t,i,n,s){var a=/:\w+/g,o=/\*\w+/g,r=/[-[\]{}()+?.,\\^$|#\s]/g,l=function(){new Date("2014-01-01T00:00:00+00:00");return function(e){var t,i,n=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,s=n.exec(e)||[];if(s[1]){t=s[1].split(/\D/);for(var a=0,o=t.length;o>a;a++)t[a]=parseInt(t[a],10)||0;return t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(s[5]&&(i=60*parseInt(s[5],10),s[6]&&(i+=parseInt(s[6],10)),"+"==s[4]&&(i*=-1),i&&t.setUTCMinutes(t.getUTCMinutes()+i)),t):0/0}return new Date(e)}}(),d={configure:function(e,i,n){this.options&&(i=t.extend({},this.options,i));for(var s=0,a=n.length;a>s;s++){var o=n[s];t.isUndefined(i[o])||(e[o]=i[o])}e.options=i},guid:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},checkConfig:function(e,i){for(var n in e)if(t.isUndefined(i[e[n]]))throw"attribute '"+e[n]+"' was not found for validation '"+i.check+"'"},getValueByPath:function(e,i,a){var o,r,l,d;if(i&&"string"==typeof i){for(i=i.replace(/\[(\w+)\]/g,".$1"),i=i.replace(/^\./,""),o=i.split(".");o.length;){if(r=o.shift(),l=n.isObservable(e)?n.unwrap(e):e,!("object"==typeof l&&r in l))return void 0;e=l[r]}return d=a?e:t.isObject(e)?s.toJS(e):n.unwrap(e)}},_getValueByPropPath:function(e,i,a,o){var r,l,d,u;if(i&&"string"==typeof i){for(i=i.replace(/\[(\w+)\]/g,".$1"),i=i.replace(/^\./,""),r=i.split(".");r.length;){if(l=r.shift(),d=n.isObservable(e)?n.unwrap(e):e,"object"!=typeof d)return void 0;if(t.isArray(d)){for(var h=0;h<d.length;h++)if(t.has(d[h],a)&&d[h][a]===l){e=d[h];break}}else{if(!t.has(d,l))return void 0;e=d[l]}}return u=o?e:t.isObject(e)?s.toJS(e):n.unwrap(e)}},setOrInitValueByPath:function(e,i,s,a){var o,r,l,d=e;if(i){o=i.split(".");for(var u=0,h=o.length;h>u;u++){if(r=o[u],u===h-1){if(!a){n.isObservable(d[r])?d[r](s):d[r]=t.isObject(d[r])?t.extend({},d[r],s):s;break}if(t.isUndefined(d[r])){d[r]=s;break}t.isArray(d[r])?d[r]=t.extend([],s,d[r]):t.isObject(d[r])&&(d[r]=t.extend({},s,d[r])),l=d[r]}else t.isUndefined(d[r])&&(d[r]={});d=d[r]}}return l},setValueByPath:function(e,i,s){var a,o,r=e;if(i){a=i.split(".");for(var l=0,d=a.length;d>l;l++){if(o=a[l],l===d-1){n.isObservable(r)?r()[o]=s:n.isObservable(r[o])?n.isObservable(s)?r[o]=s:r[o](s):r[o]=s;break}n.isObservable(r)?r=r()[o]:t.isUndefined(r[o])?r[o]={}:r=r[o]}}},safeUnwrap:function(e){var t,i=n.computed(function(){t=s.toJS(e)});return i.dispose(),t},_normalizeVmKey:function(e){var t=e.split(":");return 2===t.length?["subViewModels",t[0].replace(/\./g,".subViewModels."),t[1]].join("."):e},asLiteral:function(e){var i,n=e;return t.isObject(e)?(n=e,this._objectPropsAsLiterals(n)):e!==!0&&e!==!1&&""!==e&&(i=Number(e),t.isNaN(i)||(n=i)),n},_objectPropsAsLiterals:function(e){var i=this;t.each(e,function(n,s){t.isObject(n)?i._objectPropsAsLiterals(n):e[s]=i.asLiteral(n)})},getFieldValue:function(e,i,n,s){var a=i[e],o=n[a];return t.isUndefined(o)&&i.invar&&(o=s.get(a)),o},getDate:l,extend:function(i,n){i=t.clone(i||{}),n=t.clone(n||{}),t.each(i,function(e,n){t.isFunction(e)&&this.prototype[n]&&p.test(e)&&e!=f&&(i[n]=h(e,this.prototype,n))},this),this.mergeProperties=this.mergeProperties?this.mergeProperties:{},t.extend(this.mergeProperties,{optionsMap:"merge"}),this.mergeProperties&&(t.each(this.mergeProperties,function(n,s){i[s]=t.isArray(this.prototype[s])||t.isArray(i[s])?t.union(this.prototype[s]||[],i[s]||[]):e.extend(!0,{},this.prototype[s]||{},i[s]||{})},this),n.mergeProperties=t.extend({},n.mergeProperties||{},this.mergeProperties));var s=u.call(this,i,n);return s.postExtend&&s.postExtend(),s._super=this,s},routeToRegExp:function(e){return e=e.replace(r,"\\$&").replace(a,"([^/]+)").replace(o,"(.*?)"),new RegExp("^"+e+"$")},clone:function(e,i){return i?t.clone(e):JSON.parse(JSON.stringify(e))},extractParameters:function(e,t){return e.exec(t).slice(1)},create:function(n,s,a,o){var r,l,u,h,c,p,f=[],m=s===i.Model||s.prototype instanceof i.Model||s===i.Collection||s.prototype instanceof i.Collection,v=s===i.View||s.prototype instanceof i.View;for(m||(o=a),f.push(d.getMappedOptions(this,n,s,a)),this.hasOwnProperty("cust")&&this.cust[n]&&f.push(this.cust[n]),p=this.constructor.prototype;;){if(p.hasOwnProperty("cust")&&p.cust[n]&&f.push(p.cust[n]),!p.constructor._super)break;p=p.constructor._super.prototype}for(o&&f.push(o),h={},r=f.length-1;r>=0;--r)if(o=f[r],t.isFunction(o))h=o.call(this,h);else for(t.isArray(o)||(o=[{merge:o}]),l=0,u=o.length;u>l;++l)if(t.isFunction(o[l]))h=o[l].call(this,h);else for(c in o[l])switch(c){case"component":s=o[l][c];break;case"merge":e.extend(!0,h,o[l][c]);break;case"override_top":e.extend(h,o[l][c]);break;case"override":h=e.extend({},o[l][c]);break;case"delete":g(h,o[l][c])}var _,b=t.extend(h,{___parent:this,___id:n});if(m)_=new s(a,b);else{if(v){var w=!0;(this.options.___processUnderscore===!1||this.getConfig("processUnderscore")===!1)&&(w=!1),_=new s(t.extend(b,{___processUnderscore:w}))}else if(s.isViewModel&&requirejs.appContext){var y=d._getVmGroupId(this);_=requirejs.appContext.createVM(s,b,y(s))}else _=new s(b);d.mapMethods(_),this.___children=this.___children||[],this.___children.push(_),this.___children.hash=this.___children.hash||{},this.___children.hash[n]=_}return _},collectionComparator:function(e){function i(e){return parseFloat(e).toString()==e}if("asc"==this.sortOrder)return e.get(this.sortName);var n=e.get(this.sortName);return i(n)?-n:(n=n.toLowerCase(),n=n.split(""),n=t.map(n,function(e){return String.fromCharCode(-e.charCodeAt(0))}))},_base64Chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64regex:/[^A-Za-z0-9\+\/\=]/g,decode64:function(e){var t,i,n,s,a,o,r,l=new Array(Math.ceil(.75*e.length)),d=0,u=0;if(this._base64regex.exec(e))throw"invalid base64 characters in text input"+e;do s=this._base64Chars.indexOf(e.charAt(u++)),a=this._base64Chars.indexOf(e.charAt(u++)),o=this._base64Chars.indexOf(e.charAt(u++)),r=this._base64Chars.indexOf(e.charAt(u++)),t=s<<2|a>>4,i=(15&a)<<4|o>>2,n=(3&o)<<6|r,l[d++]=t,64!=o&&(l[d++]=i),64!=r&&(l[d++]=n);while(u<e.length);return l.length=d,l},stringify:function(e){return this.stringifyForIE8(e)},stringifyForIE8:function(t){if(null===t)return"null";var i=typeof t;if("undefined"===i)return void 0;if("number"===i||"boolean"===i)return""+t;if("string"===i)return e.quoteString(t);if("object"===i){if("function"==typeof t.toJSON)return e.toJSON(t.toJSON());if(t.constructor===Date){var n=t.getUTCMonth()+1,s=t.getUTCDate(),a=t.getUTCFullYear(),o=t.getUTCHours(),r=t.getUTCMinutes(),l=t.getUTCSeconds(),d=t.getUTCMilliseconds();return 10>n&&(n="0"+n),10>s&&(s="0"+s),10>o&&(o="0"+o),10>r&&(r="0"+r),10>l&&(l="0"+l),100>d&&(d="0"+d),10>d&&(d="0"+d),'"'+a+"-"+n+"-"+s+"T"+o+":"+r+":"+l+"."+d+'Z"'}if(t.constructor===Array){for(var u=[],h=0;h<t.length;h++)u.push(e.toJSON(t[h])||"null");return"["+u.join(",")+"]"}for(var c,p,f=[],g=0;g<t.length;g++){if(i=typeof g,"number"===i)c='"'+g+'"';else{if("string"!==i)continue;c=e.quoteString(g)}i=typeof t[g],"function"!==i&&"undefined"!==i&&(p=e.toJSON(t[g]),f.push(c+":"+p))}return"{"+f.join(",")+"}"}}},u=i.View.extend,h=function(e,i,n){var s=function(){var t,s=this._super;return this._super=i[n],t=e.apply(this,arguments),this._super=s,t};return t.extend(s,e),s.prototype=e.prototype,s},c=/sometext/.test(function(){}),p=c?/\b_super\b/:/.*/,f=c?h(function(){}).toString():"$",g=function(e,i){for(var n in i)n in e&&(t.isObject(i[n])&&t.isObject(e[n])?g(e[n],i[n]):delete e[n])};d.getMappedOptions=function v(i,n,s,a,o){if(t.isUndefined(o)&&(o={}),t.isUndefined(i))return o;if("optionsMap"in i){var r={},l=i.optionsMap[n];if(!t.isUndefined(l)){for(var u in l)if(i[u]){r[u]=r[u]||{};var h;for(var c in l[u]){var p=l[u][c];h=void 0,"config"===u&&(h=d.getValueByPath(i.getConfig(),p,!0)),t.isUndefined(h)&&(t.isObject(p)?h=p.value:t.isUndefined(i[u][p])?t.isUndefined(d.getValueByPath(a[u],c))?t.isUndefined(d.getValueByPath(s.prototype[u],c))||(h=d.getValueByPath(s.prototype[u],c)):h=d.getValueByPath(a[u],c):h=i[u][p]),t.isUndefined(h)||(r[u][c]=h)}}else{var a=l[u],f={};t.isObject(a)&&!t.isUndefined(a.value)&&1===t.keys(a).length?f=a.value:t.each(a,function(e,t){f[t]=e.value}),r[u]=f}e.extend(o,r)}}return t.isUndefined(i.___id)?o:v(i.___parent,i.___id+(n?"."+n:""),s,a,o)},d._getVmGroupId=function(e){return t.isUndefined(e)?function(){}:"getGroupId"in e?e.getGroupId.bind(e):d._getVmGroupId(e.___parent)};var m=function _(e,i,n){if(e)if(e.actionMap){var s=e.actionMap[n];if(s)for(var a in s)e[s[a]]=t.bind(i[a],i)}else n=e.___id+(n?"."+n:""),_(e.___parent,i,n)};return d.mapMethods=function(e){m(e,e)},d.isEventSupported=function(){function e(e){var t=e.split(":"),i=document.createElement(t[0]||"div");e="on"+t[1];var n=e in i;return n||(i.setAttribute(e,"return;"),n="function"==typeof i[e]),i=null,n}return e}(),d.Factory={create:d.create,getChildById:function(e){return this.___children.hash[e]}},d.Common={getPropertyByPrecedence:function(e,i){var n=i;return t.isUndefined(this.options[e])?t.isUndefined(this[e])||(n=this[e]):n=this.options[e],n}},d.FileUpload={getXhrOptions:function(e,i){var n=this._getFileObj(i,e),s=this._buildFormDataObj(n,e);return t.extend({data:s,contentType:!1},i)},submitDataAsForm:function(t,i){var n=this,s={readyState:0,getResponseHeader:function(){return null},getAllResponseHeaders:function(){return null},setRequestHeader:function(){return this},overrideMimeType:function(){return this},statusCode:function(){return this},abort:function(){return this}},a=jQuery.Deferred(),o=jQuery.Callbacks("once memory");a.promise(s).complete=o.add,s.success=s.done;var r=e(this._getFileObj(i,t)),l=r.attr("id")+"_iframe",d=this._createIframe(l),u=this._createForm(l,r,t,i);return d.bind("load",function(){try{var e=n._getIframeContentAsJSON(l);i.success(e,200,s),a.resolveWith(this,[e])}catch(t){-2146828218===t.number&&i.error({})}u.remove(),d.remove()}),u.submit(),s},isFormDataSupported:function(){return window.FormData},_isFormDataObj:function(e){return this.isFormDataSupported()&&e instanceof FormData},_isFormDataElm:function(e){return e&&e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&"file"===e.type.toLowerCase()},_getFileObj:function(t,i){var n=t.file;if(!n){var s=this;e.each(i,function(e,t){if(s._isFormDataObj(t))return n=t,!1;if(s._isFormDataElm(t)){var i=t;if(s.isFormDataSupported()){n||(n=new FormData);for(var a=0;a<i.files.length;a++){var o=i.files[a];n.append(i.name,o,o.name)}}else n||(n=new Array),n.push(i)}return!0})}return n},hasFileToSubmit:function(i,n){if(n=t.extend({},n),n.file===!1)return!1;var s=this._isFormDataObj(n.file)||this._isFormDataElm(n.file),a=this;return e.each(i,function(e,t){return a._isFormDataObj(t)||a._isFormDataElm(t)?(s=!0,!1):!0}),s},_buildFormDataObj:function(t,i){if(!this.isFormDataSupported()||!this._isFormDataObj(t))return null;var n=this;return e.each(i,function(e,i){n._isFormDataElm(i)||n._isFormDataObj(i)||t.append(e,i)}),t},_createIframe:function(t){var i=e('<iframe id="'+t+'" name="'+t+'" style="display:none;">');return i.appendTo(e("body")),i},_createForm:function(t,i,n,s){var a=e('<form method="post" enctype="multipart/form-data" action="'+s.url+'" target="'+t+'" style="display:none;"></form>');a.appendTo(e("body"));var o=i.clone();i.replaceWith(o),a.append(i);var r=this;return e.each(n,function(e,t){r._isFormDataElm(t)||a.append('<input type="hidden" name="'+e+'" value="'+t+'" />')}),s.headers&&e.each(s.headers,function(e,t){a.append('<input type="hidden" name="'+e+'" value="'+t+'" />')}),a},_getIframeContentAsJSON:function(e){var t=document.getElementById(e),i=t.contentDocument?t.contentDocument:t.contentWindow.document,n=null,s=i.body.innerHTML;i.body.firstChild&&"pre"==i.body.firstChild.nodeName.toLowerCase()&&(s=i.body.firstChild.firstChild.nodeValue);try{n=JSON.parse(s)}catch(a){n={}}return n}},d.HistoryStack=function(){var e=[],i=-1;return{push:function(n){i<e.length-1&&(e=t.first(e,i)),e.push(n),i=e.length-1},next:function(){return this.move(1)},prev:function(){return this.move(-1)},move:function(t){var n=i+t;return 0>n||n>=e.length?void 0:(i=n,e[i])},peek:function(t){var n=i+t;return 0>n||n>=e.length?void 0:e[n]}}},d.KO={getCustomExtendedContextObservable:function(e,t,i){"undefined"==typeof i&&(i=2);var s=function(){return arguments.length>=i?t.apply(this,arguments):n.isObservable(e)?1===arguments.length?e(arguments[0]):e():e};return n.utils.extend(s,n.observable.fn),s}},d}),define("src/core/resourceBundle/ResourceBundle",["underscore","src/core/util/Utils"],function(e,t){var i=function(e,t){this.availableBundles=e,t&&(this.currentBundle=this.availableBundles[t])};return e.extend(i,{extend:t.extend}),e.extend(i.prototype,{_generateFinalString:function(e,t){for(var i=e,n=0;n<t.length;n++)i=i.replace("{"+String(n)+"}",t[n]);return i},getString:function(e,t,i){var n=i?this.availableBundles[i]:this.currentBundle;if(!n)throw new Error("Current bundle is not defined");var s=n[e];return s&&t&&(s=this._generateFinalString(s,t)),s},getKeys:function(){var t=bundleStr?this.availableBundles[bundleStr]:this.currentBundle;if(!t)throw new Error("Current bundle is not defined");return e.keys(t)},getValues:function(){var t=bundleStr?this.availableBundles[bundleStr]:this.currentBundle;if(!t)throw new Error("Current bundle is not defined");return e.values(t)},create:t.create}),i}),define("src/core/dataSource/DataSource",["underscore","backbone","src/core/util/Utils"],function(e,t,i){var n=function(t){var i=this;this.sync=this.sync||function(e,t,n){return i[e].call(i,t,n)},e.bindAll(this,"mapModel"),this.initialize(t)},s={};return e.each(["create","read","update","delete"],function(e){s[e]=function(i,n){return t.sync.call(this,e,i,n)}}),e.extend(n,{extend:i.extend}),e.extend(n.prototype,t.Events,s,{initialize:function(){},getSync:function(){return this.sync},defaults:{},prepareOptions:function(t){return e.extend({},{mapModel:this.mapModel},this.defaults,t||{})},attrMap:{id:"orig_id",orig_id:"id"},mapModel:function(e){var t={},i={};for(var n in this.attrMap)e.has(n)&&(i[this.attrMap[n]]=e.get(n),t[n]=void 0);e.set(t,{silent:!0,unset:!0}),e.set(i)},getProperties:function(){return{supportsPagination:!1,supportsSorting:!1,supportsFiltering:!1}},create:i.create}),n}),define("src/core/util/StorageUtil",["jquery","underscore"],function(e,t){var i={get:function(e){return d(this._s[e])},set:function(e,t){this._s[e]=l(t)},deleteKey:function(e){e?t.isArray(e)||(e=[e]):e=this.getKeys(),t.each(e,function(e){this._s.removeItem(e)},this)},getKeys:function(){return t.keys(this._s)},getStorageType:function(){return"local"},_isAvailable:function(){return"undefined"!=typeof Storage},_s:window.localStorage},n=t.defaults({getStorageType:function(){return"session"},_s:window.sessionStorage},i),s=t.defaults({getStorageType:function(){return"memory"},_isAvailable:function(){return!0},_s:{}},i),a={get:function(e){return d(h(e,this.isPersistent))},set:function(e,t){u(e,l(t),this.isPersistent)},deleteKey:function(e){p(e,this.isPersistent)},getKeys:function(){return c(this.isPersistent)},getStorageType:function(){return"securedSessionCookie"},_isAvailable:function(){return!0}},o=t.defaults({isPersistent:!0,getStorageType:function(){return"securedPersistentCookie"}},a),r={_storageObjects:{memory:{storage:s},session:{storage:n},local:{storage:i},securedSessionCookie:{storage:a},securedPersistentCookie:{storage:o}},getStorage:function(e,i){t.isString(e)||(i=e,e="session");var n=i&&i.fallback||"memory";if(!this._storageObjects[e])throw"Storage type "+e+" is not supported";return t.isUndefined(this._storageObjects[e].isAvailable)&&(this._storageObjects[e].isAvailable=this._storageObjects[e].storage._isAvailable()),this._storageObjects[e].isAvailable?this._storageObjects[e].storage:this.getStorage(n)},setTestingMode:function(e){this.testingMode=e},get:function(e){return this.getStorage().get(e)},set:function(e,t){return this.getStorage().set(e,t)},deleteKey:function(e){return this.getStorage().deleteKey(e)},getKeys:function(){return this.getStorage().getKeys()},getStorageType:function(){return this.getStorage().getStorageType()}},l=function(e){return e=JSON.stringify(e)},d=function(e){return"undefined"===e?e=void 0:t.isString(e)&&(e=JSON.parse(e)),e},u=function(e,t,i){var n=(i?"p":"s")+e+"="+escape(t);if(i){var s=new Date;s.setFullYear(s.getFullYear()+1),n+=";expires="+s.toUTCString()}r.testingMode||(n+=";secure"),document.cookie=n},h=function(e,t){var i=document.cookie.match("(?:^|;) *"+(t?"p":"s")+e+"=([^;]*)(?:;|$)");return i?unescape(i[1]):void 0},c=function(e){var i=e?/\bp[^;=\s]+(?:(?==))/g:/\bs[^;=\s]+(?:(?==))/g,n=t.map(document.cookie.match(i),function(e){return e.slice(1)});return n},p=function(e,i){var n=new Date(0).toUTCString();e?t.isArray(e)||(e=[e]):e=c(i),t.each(e,function(e){document.cookie=(i?"p":"s")+e+"=; expires="+n})};return r}),define("src/core/dataSource/LocalStorageDataSource",["jquery","src/core/util/StorageUtil","src/core/dataSource/DataSource","src/core/util/Utils"],function(e,t,i,n){var s=i.extend({_delimiter:"/",_pathRegEx:/^[/][\w-_.~/]*$/,create:function(e,t){var i=t&&t.url||a(e,"url");if(!i||!this._pathRegEx.test(i))return _.isFunction(t.error)&&t.error("URL is mandatory and restricted to URL scheme"),o;var s=e.id||t.id||n.guid();e.id||e.set(e.idAttribute,s),this._addToUrl(i,s);var l=e.toJSON();return this.storage.set(i+this._delimiter+s,l),_.isFunction(t.success)&&t.success(l,"OK"),r},read:function(e,t){var i,n,s=r,l=t&&t.url||a(e,"url");if(l&&this._pathRegEx.test(l)){if(t.id||e.id){var d=e.id?l:l+this._delimiter+t.id;i=this.storage.get(d)}else i=this._readAll(l);i||(n="not found")}else n="URL is mandatory and restricted to URL scheme";return n?(_.isFunction(t.error)&&t.error(n),s=o):_.isFunction(t.success)&&t.success(i,"OK"),s},update:function(e,t){var i=t&&t.url||a(e,"url");if(!i||!this._pathRegEx.test(i))return _.isFunction(t.error)&&t.error("URL is mandatory and restricted to URL scheme"),o;var n=e.toJSON();return this.storage.set(i,n),_.isFunction(t.success)&&t.success(n,"OK"),r},"delete":function(e,t){var i=t&&t.url||a(e,"url");if(i&&this._pathRegEx.test(i)){var n=i.lastIndexOf(this._delimiter),s=i.substring(0,n),l=i.substring(n+1),d=this.storage.get(s);return!d.children[l]&&t&&_.isFunction(t.error)?(t.error("not found"),o):(delete d.children[l],this.storage.set(s,d),this.storage.deleteKey(i),t&&_.isFunction(t.success)&&t.success(),r)}return o},localStorageSize:function(e){var t=this.storage.get(e);return t&&t.children&&_.size(t.children)},_addToUrl:function(e,t){e||(e=this._delimiter);var i=this.storage.get(e);if(i)i.children||(i.children={});else{if(e!==this._delimiter){var n=e.lastIndexOf(this._delimiter),s=e.substring(0,n),a=e.substring(n+1);this._addToUrl(s,a)}i={children:{}}}i.children[t]||(i.children[t]=!0,this.storage.set(e,i))},_readAll:function(e){var t=null,i=this.storage.get(e);if(i&&i.children&&!_.isEmpty(i.children)){t=[];for(var n in i.children){var s=this.storage.get(e+this._delimiter+n);s&&(delete s.children,t.push(s))}}return t}}),a=function(e,t){return e&&e[t]?_.isFunction(e[t])?e[t]():e[t]:null},o=e.Deferred().reject().promise(),r=e.Deferred().resolve().promise();return _.each([o,r],function(e){_.extend(e,{abort:function(){},readyState:4})}),s.prototype.storage=t.getStorage("local"),s}),define("src/core/model/Validator",["underscore","backbone","src/core/util/Utils"],function(e,t,i){var n=function(){};return n.prototype.defined=function(t,i,n){this.checkConf(["fieldName"],t);var s=this.getFieldValue("fieldName",t,i,n);return e.isUndefined(s)?this.makeErrorObject(t,"value for '"+t.fieldName+"' should be defined",t.fieldName,s):void 0},n.prototype.notEmpty=function(t,i,n){this.checkConf(["fieldName"],t);var s=this.getFieldValue("fieldName",t,i,n);return e.isEmpty(s)?this.makeErrorObject(t,"value for '"+t.fieldName+"' should not be empty",t.fieldName,s):void 0},n.prototype.type=function(t,i,n){this.checkConf(["fieldName","type"],t);var s=this.getFieldValue("fieldName",t,i,n),a=typeof s;return e.isUndefined(s)||a===t.type?void 0:this.makeErrorObject(t,t.fieldName+"'s type should be "+t.type+", was "+a,t.fieldName,s)},n.prototype.lessThan=function(t,i,n){this.checkConf(["field1Name","field2Name"],t);var s=this.getFieldValue("field1Name",t,i,n);if(!e.isUndefined(s)){var a=Number(s);if(isNaN(a))return this.makeErrorObject(t,t.field1Name+"("+s+") should be a number",t.field1Name,s);var o=this.getFieldValue("field2Name",t,i,n);if(!e.isUndefined(o)){var r=Number(o);return isNaN(r)?this.makeErrorObject(t,t.field2Name+"("+o+") should be a number",t.field2Name,o):a>=r?this.makeErrorObject(t,t.field1Name+"("+a+") should be less than "+t.field2Name+"("+r+")",t.field1Name,s,t.field2Name,o):void 0}}},n.prototype.minLength=function(t,i,n){this.checkConf(["fieldName","min"],t);var s=this.getFieldValue("fieldName",t,i,n);if(!e.isUndefined(s))return!e.isString(s)||s.length<t.min?this.makeErrorObject(t,t.fieldName+"'s length should not be less than "+t.min+", was >"+s+"<",t.fieldName,s):void 0},n.prototype.length=function(t,i,n){this.checkConf(["fieldName"],t);var s=this.getFieldValue("fieldName",t,i,n);if(!e.isUndefined(s))return e.isString(s)?s.length>t.max?this.makeErrorObject(t,t.fieldName+"'s length should not be longer than "+t.max+", was >"+s+"<",t.fieldName,s):s.length<t.min?this.makeErrorObject(t,t.fieldName+"'s length should not be shorter than "+t.min+", was >"+s+"<",t.fieldName,s):void 0:this.makeErrorObject(t,t.fieldName+" should be a string",t.fieldName,s)},n.prototype.maxLength=function(t,i,n){this.checkConf(["fieldName","max"],t);var s=this.getFieldValue("fieldName",t,i,n);if(!e.isUndefined(s))return!e.isString(s)||s.length>t.max?this.makeErrorObject(t,t.fieldName+"'s length should not be longer than "+t.max+", was >"+s+"<",t.fieldName,s):void 0},n.prototype.min=function(t,i,n){this.checkConf(["fieldName","min"],t);var s=this.getFieldValue("fieldName",t,i,n);if(!e.isUndefined(s))return isNaN(s)||s<t.min?this.makeErrorObject(t,t.fieldName+" should be at least "+t.min+", was >"+s+"<",t.fieldName,s):void 0},n.prototype.max=function(t,i,n){this.checkConf(["fieldName","max"],t);var s=this.getFieldValue("fieldName",t,i,n);if(!e.isUndefined(s))return isNaN(s)||s>t.max?this.makeErrorObject(t,t.fieldName+" should be at most "+t.max+", was >"+s+"<",t.fieldName,s):void 0},n.prototype.regExp=function(e,t,i){this.checkConf(["fieldName","pattern"],e);var n=this.getFieldValue("fieldName",e,t,i);return e.pattern instanceof RegExp||(e.pattern=new RegExp(e.pattern,e.modifiers)),!e.pattern.test(n)==!e.not?this.makeErrorObject(e,e.fieldName+' does not match "'+e.pattern.source+'"',e.fieldName,n):void 0},n.prototype.not=function(e,t,i){this.checkConf(["op"],e);var n=this[e.op.check](e.op,t,i);return n?void 0:this.makeErrorObject.apply(this,this.makeArgs(e,"NOT has failed",t))},n.prototype.and=function(e,t,i){this.checkConf(["op1","op2"],e);var n=this[e.op1.check](e.op1,t,i),s=this[e.op2.check](e.op2,t,i);return n||s?this.makeErrorObject.apply(this,this.makeArgs(e,"AND has failed",t)):void 0},n.prototype.or=function(e,t,i){this.checkConf(["op1","op2"],e);var n=this[e.op1.check](e.op1,t,i),s=this[e.op2.check](e.op2,t,i);return n&&s?this.makeErrorObject.apply(this,this.makeArgs(e,"OR has failed",t)):void 0},n.prototype.checkConf=function(t,i){for(var n in t)if(e.isUndefined(i[t[n]]))throw"configuration attribute '"+t[n]+"' was not found for validation '"+i.check+"'"},n.prototype.getFieldValue=function(t,i,n){var s=i[t],a=s.split(".");return e.reduce(a,function(e,t){return e?e[t]:void 0},n)},n.prototype.makeArgs=function(e,t,i){var n,s=[e,t];for(n in e.fieldNames)s.push(e.fieldNames[n]),s.push(i[e.fieldNames[n]]);return s},n.prototype.makeError=function(e,t){for(var i={},n=2;n<arguments.length;n+=2)i[arguments[n]]=arguments[n+1];return{source:"validation",status:"lightsaber.core."+e,statusText:t,attrs:i}},n.prototype.makeErrorObject=function(e,t){for(var i={},n=2;n<arguments.length;n+=2)i[arguments[n]]=arguments[n+1];var s=e.status?e.status:"lightsaber.core."+e.check;return{source:"validation",status:s,statusText:t,attrs:i,conf:e}},n.extend=i.extend,n}),define("src/core/model/ErrorHandler",["underscore","backbone","src/core/util/Utils"],function(e,t,i){var n=function(){};return n.handleError=function(e,t){n.lastResponse=t},n.extend=i.extend,n.prototype.create=i.create,n}),define("src/core/model/Model",["jquery","underscore","backbone","src/core/model/Validator","src/core/model/ErrorHandler","src/core/util/Utils"],function(e,t,i,n,s,a){var o=i.Model.extend({_validate:function(e,i){if(!this.validate||this.validations&&!this.validator)return!0;e=t.extend({},this.attributes,e);var n=this.validate(e,i);if(!n)return!0;if(i&&i.error)i.error(this,n,i);else if(!i.silent&&(this.trigger("error",this,n,i),this.trigger("invalid",this,n,t.extend(i||{},{validationError:n})),n.errors))for(var s=0;s<n.errors.length;s++)for(var a in n.errors[s].attrs)this.trigger("error:"+a,this,n.errors[s],i);return!1},validate:function(e,t){var i,n=[],s=[];if(this.validations){for(var a in this.validations)if(this._ensureCheck(this.validations[a],e,t)){var o=this.validator[this.validations[a].check].call(this.validator,this.validations[a],e,this);o&&(this._isWarning(t,this.validations[a])?s.push(o):n.push(o))}if(t&&delete t.api,n.length)i={source:"validation",status:"error",statusText:"operation has failed",errors:n,warnings:s};else if(s.length){var r={source:"validation",status:"warning",statusText:"operation has succeeded with warnings",warnings:s};if(t&&t.warning)t.warning(this,r,t);else{t._warningWasFound=!0,this.trigger("warning",this,r,t);for(var l=0;l<s.length;l++)for(var d in s[l].attrs)this.trigger("warning:"+d,this,s[l],t)}}}return i},_ensureCheck:function(e,i,n){if(n=n||{},e.onlyIf&&!e.onlyIf.call(i))return!1;var s=e.check;if(!s)throw"'check' attribute was not found on validation: "+JSON.stringify(e);var a=this.validator[s];if(!t.isFunction(a))throw"the specified 'check' ("+s+") is not a function";var o=n.hasOwnProperty("validateSetOnly")?n.validateSetOnly:this.options.validateSetOnly,r="set"!=n.api||!o;if(!r){var l=e.fieldName&&[e.fieldName]||e.fieldNames||[];r=0==l.length;for(var d=0;d<l.length&&!r;){var u=l[d++];if(r=i.hasOwnProperty(u),!r){var h=u.split(".");r=h.length>1&&t.reduce(h,function(e,t){return e?e[t]:void 0},i)}}}return r},_isWarning:function(e,i){var n=!1,s=e&&e.api;return i.warn&&(n=s?i.warn[s]||t.isUndefined(i.warn[s])&&i.warn.all:i.warn.all),n},set:function(e,n,s){var a;t.isObject(e)||null==e?(a=e,s=n):(a={},a[e]=n),a&&delete a.__EmptyObject__,s&&"set"===s.api||(s=t.defaults({api:"set"},s));var o=i.Model.prototype.set.call(this,a,s);if(!o)return o;var r=this;return t.each(a,function(e,t){e&&r.isBindable(e)&&e.on("all",function(e,i,n){r!==i&&(e=r.adjustEventName(e,t),r.trigger(e,i,n))})}),o},setDataSource:function(e,t){this.dataSource=e,this.setSync(e.getSync(),t)},getDataSource:function(){return this.dataSource},initialize:function(e,i){if(i=t.defaults({},i,this.options,{api:"init"}),i.url&&(this.urlRoot=i.url,delete this.url),this.validations){this.validator=new n;for(var s in this.validations){var a=this.validations[s].warn||{};t.defaults(a,{set:!0,save:!1}),this.validations[s].warn=a}}i.errorHandler&&(this.errorHandler=i.errorHandler),this.options=t.pick(i,"autoSnapshot","deepAutoSnapshot","validateSetOnly")},get:function(e){return e?i.Model.prototype.get.call(this,e):this.attributes},isValid:function(e){return this._validate(void 0,t.extend({api:"isValid"},e))},fetch:function(e){e=e?t.clone(e):{},void 0===e.parse&&(e.parse=!0);var n=this,s=e.success;return e.success=function(t){return n.set(n.parse(t,e),e)?(s&&s(n,t,e),void n.trigger("sync",n,t,e)):!1},i.wrapError(this,e),this.sync("read",this,e)},save:function(e,n,s){var a,o,r,l=this.attributes;if(null==e||"object"==typeof e?(a=e,s=n):(a={})[e]=n,s&&"save"===s.api||(s=t.defaults({api:"save"},s)),!(!a||s&&s.wait||this.set(a,s)))return!1;if(s=t.extend({validate:!0},s),!this._validate(a,s))return!1;a&&s.wait&&(this.attributes=t.extend({},l,a)),void 0===s.parse&&(s.parse=!0);var d=this,u=s.success;return s.success=function(e){d.attributes=l;var i=d.parse(e,s);return s.wait&&(i=t.extend(a||{},i)),t.isObject(i)&&!d.set(i,s)?!1:(u&&u(d,e,s),void d.trigger("sync",d,e,s))},i.wrapError(this,s),o=this.isNew()?"create":s.patch?"patch":"update","patch"===o&&(s.attrs=a),r=this.sync(o,this,s),a&&s.wait&&(this.attributes=l),r},destroy:function(e){e=e?t.clone(e):{};var n=this,s=e.success,a=function(){n.trigger("destroy",n,n.collection,e)};if(e.success=function(t){(e.wait||n.isNew())&&a(),s&&s(n,t,e),n.isNew()||n.trigger("sync",n,t,e)},this.isNew())return e.success(),!1;i.wrapError(this,e);var o=this.sync("delete",this,e);return e.wait||a(),o},takeSnapshot:function(t){this._snapshotAttributes=t?e.extend(!0,{},this.attributes):e.extend({},this.attributes)},revertToSnapshot:function(e){var t={silent:e};this.clear(t),this.set(this._snapshotAttributes,t)},setSync:function(e,n){if(!e||!t.isFunction(e))throw"setSync: sync should be a function";var s=this;this.sync=function(i,n,a){if(this.currentErrorHandler!==this.errorHandler&&(this.currentErrorHandler&&this.off("error",this.currentErrorHandler),this.currentErrorHandler=this.errorHandler,this.on("error",this.currentErrorHandler)),a=t.defaults({},a,this.options),a.autoSnapshot){var o=a.success;a.success=function(){s.takeSnapshot(a.deepAutoSnapshot),o&&o.apply(void 0,arguments)}}return e(i,n,a)},n=n||{};var a=n.mapModel;a&&t.isFunction(a)&&a(this);var o=n.idAttribute;o&&t.isString(o)&&(this.idAttribute=o,this.id=i.Model.prototype.get.call(this,o))},isBindable:function(e){return e.on&&t.isFunction(e.on)},adjustEventName:function(e,t){var i=e.indexOf(":");return-1!=i&&(e=e.substring(0,i+1)+t+e.substring(i)),e},errorHandler:s.handleError,create:a.create},{postExtend:function(){this.pool={}},getInstance:function(e,i){var n=e[this.prototype.idAttribute];if(n){i&&"getInstance"===i.api||(i=t.defaults({api:"getInstance"},i));var s=this.findInstance(n);return s?s.set(e,i):(s=new this(e,i),this.getPool()[n]=s),s}},removeInstance:function(e){var t=this.findInstance(e);return delete this.getPool()[e],t},findInstance:function(e){return this.getPool()[e]},getPool:function(){return this.pool?this.pool:this.pool={}},setGlobalErrorHandler:function(e){this.prototype.errorHandler=e},unsetGlobalErrorHandler:function(){delete this.prototype.errorHandler}});return i.wrapError=function(e,t){var i=t.error;t.error=function(n){(!i||!i(e,n,t))&&e.trigger("error",e,n,t)}},o.extend=a.extend,o}),define("src/core/util/Configuration",["src/core/model/Model","text!lightsaber.config.json"],function(Model,ConfigData){var Configuration=Model.extend({loadConfiguration:function(configData){"string"==typeof configData&&(configData=eval("("+configData+")")),this.set(configData)},loadCoreConfiguration:function(e){e===!0&&this.clear(),this.loadConfiguration(ConfigData)}}),configuration=new Configuration;return configuration.loadCoreConfiguration(),configuration}),define("src/core/dataSource/RESTDataSource",["jquery","underscore","backbone","src/core/util/Utils","src/core/util/Configuration"],function(e,t,i,n,s){var a=function(e){var i={create:{method:"POST",contentType:"application/json"},read:{method:"GET"},readPage:{method:"GET",supportsPagination:!1,supportsSorting:!1,supportsFiltering:!1,parse:u},update:{method:"PUT",contentType:"application/json"},"delete":{method:"DELETE"}};this.namedParam=e&&e.namedParam?e.namedParam:/:(\w+)/g,this.methods=t.extend({},e),delete this.methods.namedParam,t.each(i,function(e,i){this.methods[i]?t.defaults(this.methods[i],e):this.methods[i]=e},this),this.defaults=this.methods.defaults||{};var n=s.get("REST data source")||{};this.globalDefaults=n.defaults||{},this.initialize.apply(this,arguments)};a.prototype.sync=function(i,s,a){var o=this.methods[i]||r("method "+i+" is not defined");a=t.extend({},a);
var l=this.getProperty("fullURL",o,a)||this.composeURL(o,s,a);this.lastUrl=l;var u=a.type||o.method||this.defaults.method||r("no HTTP method is defined for "+i),h=this.getProperty("dataType",o,a)||"json",c={type:u,dataType:h,url:l};c.headers=this.mergeProperty("headers",o,a),delete a.headers,c.contentType=this.getProperty("contentType",o,a),c.timeout=this.getProperty("timeout",o,a);var p=a.success,f=this;a.success=function(e,t,i){p&&p(f.parse(e,o,a),t,i)};var g=s.toJSON();if(n.FileUpload.hasFileToSubmit(g,a)){if(!n.FileUpload.isFormDataSupported()){var m=n.FileUpload.submitDataAsForm(g,t.extend(c,a));return m}a=n.FileUpload.getXhrOptions(g,a)}if(!a.data&&s){var v=this.getProperty("contentType",o,a);if("application/json"==v||"application/x-www-form-urlencoded"==v){c.contentType=v;var _=s.toJSON(),b=this.getProperty("payload",o,a);b&&(_=d.apply(_,b)),c.data=JSON.stringify(_)}"application/x-www-form-urlencoded"==v&&(c.data=c.data?{model:c.data}:void 0)}"GET"!==c.type&&(c.processData=!1);var w=e.ajax(t.extend(c,a));return s&&s.trigger("request",s,w,a),w},a.prototype.parse=function(e,i,n){var s=e,a=this.getProperty("parse",i,t.isFunction(n.parse)?n:{});return t.isFunction(a)&&(s=a(e)),s},a.prototype.setQueryParams=function(e){this.dynamicQueryParams=e},a.prototype.getProperties=function(){return{supportsPagination:this.methods.readPage.supportsPagination,supportsSorting:this.methods.readPage.supportsSorting,supportsFiltering:this.methods.readPage.supportsFiltering}},a.prototype.setFullURL=function(e,t){this.methods[e].fullURL=t},a.prototype.getSync=function(){return t.bind(this.sync,this)},a.prototype.composeURL=function(e,i,n){var s=this.getProperty("url",e,n)||o(i,"url");n.url&&delete n.url;var a=this.makeQueryParams(e,n);s=this.appendQueryString(s,a);var r=s.match(this.namedParam);if(r)for(var l=0;l<r.length;l++){var d=r[l].substring(1),u=n.params&&n.params[d]||e.params&&e.params[d]||i&&i.get(d)||this.defaults.params&&this.defaults.params[d]||this.globalDefaults.params&&this.globalDefaults.params[d];t.isString(u)&&"@"===u.charAt(0)?(u=u.substring(1),u=n[u]||i&&i.get(u)):t.isUndefined(u)&&(u=n[d]),s=s.replace(r[l],encodeURIComponent(u))}return s=this.prefixUrl(s,e,n)},a.prototype.makeQueryParams=function(e,i){var n={};if(i.pagination){var s=this.getProperty("names",e,i)||{pageStart:"indexOfFirst",pageSize:"pageSize"};n[s.pageStart]=i.pagination.pageStart,n[s.pageSize]=i.pagination.pageSize}for(var a in i.sorting)n[a]=i.sorting[a];for(a in i.filtering)n[a]=i.filtering[a];var o="qParams";return t.defaults(n,i[o],this.dynamicQueryParams,e[o],this.defaults[o],this.globalDefaults[o])},a.prototype.appendQueryParam=function(e,t){var i="";return t instanceof Array?1===t.length?i=this.appendQueryParam(e,t[0]):t.length>1&&(i=this.appendQueryParam(e,t.shift())+"&"+this.appendQueryParam(e,t)):i=e+"="+encodeURIComponent(t),i},a.prototype.appendQueryString=function(e,t){var i="";for(var n in t)i+=(i?"&":"")+this.appendQueryParam(n,t[n]);return e+(i?"?":"")+i},a.prototype.prefixUrl=function(e,t,i){var n="",s=this.getProperty("protocol",t,i)||window.location.protocol;n=s+(":"==s.charAt(s.length-1)?"":":")+"//";var a=this.getProperty("host",t,i)||window.location.hostname,o=this.getProperty("port",t,i)||window.location.port;n=n+a+(o?":"+o:"");var r=this.getProperty("module",t,i);return r&&(n+="/"+encodeURI(l(r))),n+="/"+l(e)},a.prototype.getProperty=function(e,t,i){return i[e]||t[e]||this.defaults[e]||this.globalDefaults[e]},a.prototype.mergeProperty=function(e,i,n){return t.defaults({},n[e],i[e],this.defaults[e],this.globalDefaults[e])},a.prototype.initialize=function(){};var o=function(e,i){return e&&e[i]?t.isFunction(e[i])?e[i]():e[i]:null},r=function(e){throw new Error(e)},l=function(e){var t="/"==e.charAt(0)?1:0,i=e.length-("/"==e.charAt(e.length-1)?1:0);return e.substring(t,i)},d=function(){var e={},i=this;return t.each(Array.prototype.slice.call(arguments,0),function(n){t.isUndefined(i[n])||(e[n]=i[n])}),t.isEmpty(e)?void 0:e},u=function(e){return{pageStart:e.indexOfFirst,pageSize:e.pageSize,totalSize:e.numberOfRows,hasMore:e.hasMore,data:e.data}};return a.extend=n.extend,a.prototype.create=n.create,a}),define("src/core/dataSource/LSRESTDataSource",["jquery","underscore","src/core/dataSource/RESTDataSource","src/core/util/StorageUtil","src/core/util/Utils","src/core/util/Configuration"],function(e,t,i,n,s,a){var o=i.extend({lsSessionTokenAlias:a.get("lsSessionTokenAlias")||"LightsaberSessionToken",initialize:function(){if(!o.initialized){var t=this;e(window).bind("storage",function(e){e.key==t.lsSessionTokenAlias&&t.setToken(e.newValue)}),o.initialized=!0}},setToken:function(e,t){o.token!==e&&(o.token=e,t&&this.storage.set(this.lsSessionTokenAlias,e),o.trigger(o.TOKEN_UPDATE_EVENT,{token:e}))},getToken:function(){return o.token||(o.token=this.storage.get(this.lsSessionTokenAlias)),o.token},sync:function(e,n,s){s=t.extend({},s);var a=this,r=s.error;s.error=function(e,t){if(a.handleXhr(e),r){var i;try{i=JSON.parse(e.responseText)}catch(n){i=e.responseText}o.trigger(o.ERROR,{statusCode:e.status,data:i,xhr:e}),r(e,t)}};var l=s.success;return s.success=function(e,t,i){a.handleXhr(i),l&&l(e,t,i)},this.applySecurity(s),i.prototype.sync.call(this,e,n,s)},handleXhr:function(e){var t=e.getResponseHeader("uxfauthorization");t&&this.setToken("null"===t?void 0:t,!0)},applySecurity:function(e){var t=this.getToken();if(t){e.LSPassword&&(t+=" UXF_SecActionPSW:"+e.LSPassword,delete e.LSPassword);var i=e.headers||(e.headers={});i.authorization=t}else if(e.LSPassword)throw"Protected Lightsaber service requires a token"},getSync:function(){return t.bind(this.sync,this)},create:s.create});return o.extend=s.extend,o.prototype.storage=n.getStorage("session"),o.TOKEN_UPDATE_EVENT="tokenUpdated",o.ERROR="error",o.TOKEN_INVALID="tokenInvalid",o.TOKEN_EXPIRED="tokenExpired",t.extend(o,Backbone.Events),o}),define("src/core/model/RESTModel",["underscore","src/core/model/Model","src/core/dataSource/RESTDataSource","src/core/dataSource/LSRESTDataSource","src/core/util/Utils"],function(e,t,i,n,s){var a=t.extend({initialize:function(i,n){var s=e.defaults({},n&&n.rest,this.options&&this.options.rest);t.prototype.initialize.call(this,i,n),this.setRESTConfig(s)},setRESTConfig:function(e){var t=e&&e.unsecured?new i(e):new n(e);this.setDataSource(t)},setQueryParams:function(e){this.getDataSource().setQueryParams(e)},create:s.create});return a.extend=s.extend,a}),define("src/core/dataSource/RESTSession",["underscore","backbone","src/core/util/Utils","src/core/model/RESTModel"],function(e,t,i,n){var s=function(){};return s.init=function(){if(!this.model){var e={read:this.rest&&this.rest.login};this.model=new n(null,{rest:e})}},s.login=function(e,t,i){this.init(),this.model.set({user:e,password:t}),this.model.fetch(i)},s.logout=function(){this.init(),this.model.getDataSource().setToken(void 0,!0)},s.extend=i.extend,s.prototype.create=i.create,s}),define("src/core/model/Collection",["jquery","underscore","backbone","src/core/model/Model","src/core/dataSource/RESTDataSource","src/core/dataSource/LSRESTDataSource","src/core/model/ErrorHandler","src/core/util/Utils"],function(e,t,i,n,s,a,o,r){var l=i.Collection.extend({model:n,initialize:function(e,i){var n=t.defaults(i||{},this.options);n.rest&&this.setRESTConfig(n.rest),n.url&&(this.url=n.url),n.pagination&&(this.pagination={},this.reset(),this.setPagination(n.pagination)),n.sorting&&this.setSorting(n.sorting,!0),n.filtering&&this.setFiltering(n.filtering,!0),n.errorHandler&&(this.errorHandler=n.errorHandler),this.on("change",function(){this.hasModelChanged=!0},this),this.on("sort",function(e){this.trigger("reset",e)},this),this.added=0},add:function(e,n){var s=t.isArray(e)?e.length:1;if(0!==s&&e){if(n||(n={}),!n.isRest&&this.pagination&&this.pagination.all&&this.length!==this.pagination.all.length)throw"cannot add when holes exist";var a=n.at?n.at:this.models.length;if(n.isRest||(this.added+=s),i.Collection.prototype.add.call(this,e,n),this.serverPagination&&this.pagination)if(n.isRest||!n.at)for(var o=n.isRest?this.added+n.pageStart:this.pagination.all.length;0!==s--;)this.pagination.all[o]=this.at(a),o++,a++;else e=this.models.slice(a,a+s),Array.prototype.splice.apply(this.pagination.all,[n.at,0].concat(e))}},setDataSource:function(e,t){this.dataSource=e,e?(this.serverPagination=e.getProperties().supportsPagination,this.serverSorting=e.getProperties().supportsSorting,this._checkSortingCriteria(this.sorting)||(this.sorting=void 0),this._checkSortingCriteria(this.comparator)||(this.comparator=void 0),this.setSync(e.getSync(),t)):(this.serverPagination=void 0,this.serverSorting=void 0);var i=this.models;this.reset(null,{silent:!0}),this.add(i,{silent:!0})},getDataSource:function(){return this.dataSource},setAttribute:function(e,t){this.attributes||(this.attributes={}),this.attributes[e]=t},getAttribute:function(e){return this.attributes?this.attributes[e]:void 0},get:function(e){var n=t.isString(e)?this.getAttribute(e):void 0;return t.isUndefined(n)?i.Collection.prototype.get.call(this,e):n},setRESTConfig:function(e){var t=e&&e.unsecured?new s(e):new a(e);this.setDataSource(t)},setPagination:function(e){this.pagination||(this.pagination={}),t.isNumber(e.pageStart)&&(this.pagination.pageStart=e.pageStart),t.isNumber(e.pageSize)&&(this.pagination.pageSize=e.pageSize)},setSorting:function(e,i){if(!this._checkSortingCriteria(e))throw"sorting is not compatible with data source";var n=!e&&this.sorting;t.isFunction(e)?(this.comparator=e,this.sorting=void 0):(this.sorting=t.clone(e),this.comparator=void 0),this.serverSorting&&(n||this.sorting)&&!i&&this.fetch(),this.comparator&&this.sort()},getSorting:function(){return this.sorting?this.sorting:this.comparator},setFiltering:function(e,i){e||(this.filterator=void 0,this.filtering=void 0),t.isFunction(e)?this.filterator=e:this.filtering=t.clone(e),this.getDataSource()&&!i&&this.fetch()},getFiltering:function(){return this.filtering},setNextURL:function(e){return this.pagination.nextURL=e},setPrevURL:function(e){return this.pagination.prevURL=e},getProperties:function(){return this.dataSource.getProperties()},gotoRows:function(n,s,a){if(0>n&&(n=0),t.isNumber(s)||(a=s,s=this._getDefaultTo(n)),n>=s)throw'"from" should be less than "to"';if(this.pagination.maxIndex&&s>this.pagination.maxIndex+this.added)throw"requested rows are out of bounds";if(n>this.length&&this.added)throw"cannot goto when items were added";if(a=a?t.clone(a):{},this.pagination.pageStart=n,this.pagination.pageNum=Math.ceil((s-n)/this.pagination.pageSize-1),this.isPageAvailable(n,s))return a.success&&a.success(this,void 0),this.triggerDataReady(n,s-n),e.Deferred().resolve().promise();for(var o=n;s>o&&!t.isUndefined(this.serverPagination?this.pagination.all[o]:this.at(o));o++)n++;if(t.isUndefined(this.dataSource))throw"data source does not exist";var r;this.serverPagination?(r="readPage",a.pagination={pageStart:n-this.added,pageSize:s-n}):r="read";var l=this,d={orig:this.pagination.ver},u=a.success;return a.success=function(e){if(d.orig===l.pagination.ver){l.filterator&&(l.serverPagination?e.data=t.filter(e.data,l.filterator):e=t.filter(e,l.filterator)),l.serverPagination||(e={pageStart:0,pageSize:l.pagination.pageSize,totalSize:e.length,data:e}),e.totalSize?l.pagination.maxIndex=e.totalSize:t.isUndefined(e.hasMore)||(l.pagination.maxIndex=e.hasMore?e.pageStart+e.data.length+1:e.pageStart+e.data.length,l.pagination.hasMore=e.hasMore);var i={silent:!0,isRest:!0,pageStart:e.pageStart};l.add(e.data,i),l.length===e.data.length?l.trigger("reset",l):l.triggerDataReady(e.pageStart+l.added,e.data.length),u&&u(l,e.data,e)}},i.wrapError(l,a),this.serverSorting&&(a.sorting=this.sorting),a.filtering=this.filtering,this.sync.call(this,r,this,a)},gotoPage:function(e,t){var i=e*this.pagination.pageSize;return this.gotoRows(i,t)},updateOptionsWithFullURL:function(e,i){return t.isString(this.pagination[e])&&(i||(i={}),i.fullURL||(i.fullURL=this.pagination[e]),delete this.pagination[e]),i},next:function(e,i){var n=this.pagination.pageStart;return t.isNumber(e)?n+=this.pagination.pageSize*e:(i=e,n+=this.pagination.pageSize),i=this.updateOptionsWithFullURL("nextURL",i),this.gotoRows(n,i)},accNext:function(){var e=0,t=this.updateOptionsWithFullURL("nextURL"),i=this.getPageNum()+1,n=i*this.pagination.pageSize+this.pagination.pageSize;return n=Math.min(this.pagination.maxIndex,n),this.gotoRows(e,n,t)},prev:function(e,i){var n=this.pagination.pageStart;return t.isNumber(e)?n-=this.pagination.pageSize*e:(i=e,n-=this.pagination.pageSize),i=this.updateOptionsWithFullURL("prevURL",i),this.gotoRows(n,i)},accPrev:function(){var e=0,t=this.updateOptionsWithFullURL("prevURL"),i=this.getPageNum()+1,n=i*this.pagination.pageSize-this.pagination.pageSize;return n=Math.min(this.pagination.maxIndex,n),this.gotoRows(e,n,t)},fetch:function(e){return this.reset(void 0,{silent:!0}),e||(e={}),(this.serverSorting&&this.sorting||this.filtering)&&(this.serverSorting&&(e.sorting=this.sorting),e.filtering=this.filtering),e.reset=!0,this.pagination?this.gotoRows(0,e):i.Collection.prototype.fetch.call(this,e)},getPage:function(e){t.isUndefined(e)&&(e=0);var i=this.pagination?e*this.pagination.pageSize:0;return this.getRows(i)},getRows:function(e,t){var i;if(this.hasModelChanged&&(this.hasModelChanged=void 0,this.setSorting(this.getSorting())),this.pagination){var n=0===this.pagination.maxIndex;i=this.isPageAvailable(e,t,n)?this._makePage(e,t,n):{data:[],info:{totalSize:0}}}else i={data:this.models.slice(),info:{totalSize:this.length}};return i},isPageAvailable:function(e,i,n){t.isBoolean(i)&&(n=i,i=void 0),t.isNumber(i)||(i=this._getDefaultTo(e));var s=void 0;if(this.serverPagination){(e>=i||i>this.pagination.all.length&&!n)&&(s=!1);for(var a=e;void 0===s&&i>a;a++)t.isUndefined(this.pagination.all[a])&&!n?s=!1:!t.isUndefined(this.pagination.all[a])&&n&&(s=!0);void 0===s&&(s=!n)}else s=i>e&&(i<=this.models.length||n)||!this.getDataSource();return s},triggerDataReady:function(e,t){this.trigger("dataReady",{pageStart:e,pageNum:this.getPageNum(e),pageSize:t},this)},reset:function(e,n){if(this.pagination){n||(n={});var s=n.silent;n.silent=!0}if(this.added=0,i.Collection.prototype.reset.call(this,e,n),this.pagination){if(t.isUndefined(this.pagination.ver)?this.pagination.ver=0:this.pagination.ver++,this.serverPagination){this.pagination.all=[];for(var a=0;a<this.length;a++)this.pagination.all[a]=this.at(a)}this.pagination.pageStart=0,t.isNumber(this.pagination.pageSize)||(this.pagination.pageSize=0),this.pagination.maxIndex=0,this.pagination.nextURL=void 0,this.pagination.prevURL=void 0,s||(this.trigger("reset",this,n),n.silent=s)}return this},isAccumelated:function(){return this.pagination&&t.isNumber(this.pagination.pageStart)?0===this.pagination.pageStart&&this.pagination.pageNum>=1:!1},getPageNum:function(e){if(this.pagination){if(this.isAccumelated()&&t.isNumber(this.pagination.pageNum))return this.pagination.pageNum;var i=t.isUndefined(e)?this.pagination.pageStart:e;return Math.floor(i/this.pagination.pageSize)}return 0},setSync:function(e,i){i||(i={});var n=function(t,i,n){return this.currentErrorHandler!==this.errorHandler&&(this.currentErrorHandler&&this.off("error",this.currentErrorHandler),this.currentErrorHandler=this.errorHandler,this.on("error",this.currentErrorHandler)),e(t,i,n)};this.sync=n,this.model.sync=n,this.model.idAttribute=i.idAttribute,t.each(this.models,function(t){t.setSync(e,i)}),i.idAttribute&&this.reset(this.models)},setPayload:function(e){this.payload=e},toJSON:function(){return this.payload?this.payload:i.Collection.prototype.toJSON.call(this)},getTotalPagesNumber:function(){var e=!t.isUndefined(this.pagination.hasMore)&&!this.pagination.hasMore||t.isUndefined(this.pagination.hasMore)&&this.pagination.maxIndex?Math.ceil((this.pagination.maxIndex+this.added)/this.pagination.pageSize):void 0;return e},getCurrentPageNumber:function(){return this.getPageNum()},hasPrev:function(e){!t.isUndefined(e)||(e=this.getPageNum());var i=void 0,i=t.isUndefined(this.pagination.maxIndex)?void 0:e>0&&(e-1)*this.pagination.pageSize<this.pagination.maxIndex+this.added;return i},hasNext:function(e){!t.isUndefined(e)||(e=this.getPageNum());var i=void 0;return i=t.isUndefined(this.pagination.maxIndex)?void 0:(e+1)*this.pagination.pageSize<this.pagination.maxIndex+this.added?!0:this.pagination.hasMore===!1?!1:void 0},_prepareModel:function(e,t){if(e instanceof i.Model)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)}return e.sync=this.model.sync,this.model.idAttribute&&(e.idAttribute=this.model.idAttribute),e},_makePage:function(e,i,n){t.isBoolean(i)&&(n=i,i=void 0),t.isNumber(i)||(i=this._getDefaultTo(e));var s=this.serverPagination?this.pagination.all:this.models,a=t.reduce(s,function(n,s,a){return a>=e&&i>a&&!t.isUndefined(s)&&n.push(s),n},[]),o=this.getDataSource()&&!this.pagination.maxIndex?0:this.pagination.maxIndex+this.added;return{data:a,info:{pageStart:e,pageNum:this.getPageNum(e),pageSize:this.pagination.pageSize,totalSize:o,hasMore:this.pagination.hasMore,totalPages:Math.ceil(o/this.pagination.pageSize)}}},_getDefaultTo:function(e){if(this.pagination){var t=e+this.pagination.pageSize;this.pagination.maxIndex&&(t=Math.min(t,this.pagination.maxIndex+this.added))}else t=this.models.length;return t},_checkSortingCriteria:function(e){var i=!0;return!this.getDataSource()||t.isNull(e)||t.isUndefined(e)?i:i=this.serverPagination?this.serverSorting&&!t.isFunction(e)&&t.isObject(e):this.serverSorting?t.isObject(e):t.isFunction(e)},errorHandler:o.handleError,createComponent:r.create},{setGlobalErrorHandler:function(e){this.prototype.errorHandler=e},unsetGlobalErrorHandler:function(){delete this.prototype.errorHandler}});return l.extend=r.extend,l}),define("src/core/viewModel/ViewModelConstructor",["underscore","src/core/util/Utils","src/core/model/Model"],function(e,t,i){var n={visible:!0,enabled:!0},s=function(s){this.cid=e.uniqueId("vm"),s=s?e.clone(s):{},s.models=e.extend({},this.models,s.models),s.data=e.extend({},this.defaults,this.data,s.data),t.configure(this,s,["events","subViewModels"]),this.modelKeys=e.extend({},this.modelKeys,s.modelKeys),s.attrs&&(s.data=s.attrs),this._models=s.models,this._instantiateModels(s),this.delegateEvents(this._models),this.models=this._models||(this._models={}),this._initializeData(s),this.data.on("all",this._dataEventsHandler,this),this.config=new i(e.extend({},n,this.config,s.config||{})),this.config.on("all",this._configEventsHandler,this),this.dataBindings=[].concat(s.dataBindings||[],this.dataBindings),this.dataBindings=e.uniq(this.dataBindings,!1,function(e){var t;for(var i in e)if("options"!=i){t=i;break}return t}),this.subViewModels=e.extend({},s.subViewModels,this.subViewModels),this._instantiateSubViewModels(s),this._references=0,this.set("subViewModels",this.subViewModels),this.initialize.apply(this,arguments),this._bindData()};return s}),define("src/core/formatter/DateFormatter",[],function(){var e=function(e){e&&e.resourceBundle&&(this.resourceBundle=e.resourceBundle)};e.prototype.format=function(e,t,i){var n=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,d=i?"getUTC":"get",u=e[d+"Date"](),h=e[d+"Day"](),c=e[d+"Month"](),p=e[d+"FullYear"](),f=e[d+"Hours"](),g=e[d+"Minutes"](),m=e[d+"Seconds"](),v=e[d+"Milliseconds"](),_=i?0:e.getTimezoneOffset(),b={d:u,dd:s(u),ddd:r(this.resourceBundle,h),dddd:r(this.resourceBundle,h,"long"),m:c+1,mm:s(c+1),mmm:l(this.resourceBundle,c),mmmm:l(this.resourceBundle,c,"long"),yy:String(p).slice(2),yyyy:p,h:f%12||12,hh:s(f%12||12),H:f,HH:s(f),M:g,MM:s(g),s:m,ss:s(m),l:s(v,3),L:s(v>99?Math.round(v/10):v),tt:a(this.resourceBundle,f),TT:a(this.resourceBundle,f,"caps"),o:(_>0?"-":"+")+s(100*Math.floor(Math.abs(_)/60)+Math.abs(_)%60,4),S:o(this.resourceBundle,u)};return t.replace(n,function(e){return e in b?b[e]:e.slice(1,e.length-1)})};var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tueday","Wedesday","Thursday","Friday","Saturday"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],n=["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31th"],s=function(e,t){for(e=String(e),t=t||2;e.length<t;)e="0"+e;return e},a=function(e,t,i){var n=12>t?"am":"pm",s=d(e,n);return"caps"==i?s.toUpperCase():s},o=function(e,t){return d(e,n[t-1])},r=function(e,i,n){var s="long"==n?7+i:i;return d(e,t[s])},l=function(e,t,n){var s="long"==n?12+t:t;return d(e,i[s])},d=function(e,t){if(e){var i=e.getString(t);return"undefined"!=typeof i?i:t}return t};return e}),define("src/core/formatter/FormattersContainer",["src/core/util/Utils","src/core/util/Configuration","src/core/formatter/DateFormatter"],function(e,t,i){var n=function(){},s=function(e){return isNaN(e)||_.isString(e)&&(e=parseFloat(e)),e},a={absNumberFormatter:function(e){{var i=this.getParams(),n=this.getResourceBundle(),a=t.get("defaultNumberOfDecimalsKey");n&&n.getString(a)}e=s(e),_.isNumber(e)&&0>e&&(e=Math.abs(e));var o=i&&!isNaN(i.decimals)?i.decimals:i&&!isNaN(i.fixed)?i.fixed:n&&n.getString(a);str=new String(isNaN(o)?e:Number(e).toFixed(o));var l=str.match(/(.*)\.(.*)$/,"$2")?str.replace(/(.*)\.(.*)$/,"$2"):"",d=n&&n.getString("thousandsSeparator")||",",u=n&&n.getString("decimalSeparator")||".",h=r(e).toString(),c=h.length,p=/^\d{4,}$/.test(h)?c%3:0,f=(p?h.slice(0,p)+d:"")+h.slice(p).replace(/(\d{3})(?=\d)/g,"$1"+d)+(l?u+l:"");return f},negativeSignFormatter:function(e){var t="";return e=s(e),0>e&&(t="-"),t},negativeSignLocation:function(){var e=this.getResourceBundle(),t=this.getParams();return t&&t.negativeLocation||e&&e.getString("negativeLocation")||"left"}},o={default_number_formatter:function(e){var t=a.absNumberFormatter.call(this,e),i=a.negativeSignFormatter.call(this,e),n=a.negativeSignLocation.call(this);return"right"===n||"r"===n?t+i:i+t},default_mask_formatter:function(e){var t=this.getResourceBundle(),i=this.getParams();if(t&&i.type){var n=t.getString(i.type);if(n)return String(e).replace(n[0],n[1])}return e},default_date_formatter:function(t){if(_.isNull(t)||_.isUndefined(t))return void 0;var n=e.getDate(t);if("Invalid Date"===n.toString())return void 0;var s=this.getResourceBundle();if(s){var a=this.getParams(),o=[this.getType()];a.type&&o.push(a.type),o.push("mask");var r=s.getString(o.join("_"))||s.getString(this.getType()+"_mask");if(r)return new i({resourceBundle:s}).format(n,r)}return n.toLocaleString()},default_currency_formatter:function(e){var t=this.getParams(),i=this.getResourceBundle(),n=a.negativeSignFormatter.call(this,e),s=a.negativeSignLocation.call(this),o=t&&t.hasOwnProperty("currencySpacer")?t.currencySpacer:i&&i.getString("currencySpacer")||"",r=t&&t.currency||i&&i.getString("currencySymbol")||"$",l=i&&i.getString("currencyLocation")||"left",d=a.absNumberFormatter.call(this,e),u="";if("right"===s||"r"===s)switch(l){case"right":case"r":u=d+r+o+n;break;case"absRight":u=d+n+o+r;break;default:u=r+o+d+n}else switch(l){case"right":case"r":case"absRight":u=n+d+o+r;break;case"absLeft":u=r+o+n+d;break;default:u=n+r+o+d}return u}};_.extend(n,{extend:e.extend}),_.extend(n.prototype,o);var r=function(e){var t=Math.floor(0>e?-e:e);return 0>e?-t:t};return n}),define("src/core/formatter/Formatter",["underscore","backbone","src/core/util/Configuration","single!src/core/formatter/FormattersContainer"],function(e,t,i,n){var s=function(){};return s.prototype.format=function(t,s){var a=s.formatType;if("undefined"==typeof a)throw new Error("Format type must be specified");var o,r=i.get(a+"_formatter");o=r&&n[r]?r:"default_"+a+"_formatter";for(var l=e.extend(t,{getParams:function(){return s.formatParams||{}},getType:function(){return a}}),d=s.fields||[],u=[],h=0;h<d.length;h++)u.push(t.getVMData(d[h]));return n[o]?n[o].apply(l,u):u.join(",")},s.prototype.formatCurrentBindingContext=function(t,i,n){var s={fields:e.isArray(t)?t:[t]};return i&&(s.formatType=i),n&&(s.formatParams=n),this.format(this.bindContext,s)},s}),define("src/core/binding/Binding",["jquery","underscore","backbone","single!src/core/formatter/Formatter","knockout"],function(e,t,i,n,s){var a=function(){this.groups={},this.bindings={},this.counter=0};a.prototype.bindAll=function(e,t){var i=t||e&&e.dataBindings||[];for(var n in i){var s,a;for(var o in i[n])switch(o){case"options":break;default:s=o,a=i[n][o]}this.bind(e,s,a,i[n].options)}},a.prototype.bind=function(e,i,n,s){(t.isFunction(e)||t.isString(e))&&(s=n,n=i,i=e,e=null),s=t.extend({},s);var a=i,o=n;if(s.twoWay&&(!t.isString(i)||!t.isString(n)))throw"Two way binding can only be used for paths";if(s.setter){if(s.set)throw'Options "set" and "setter" should not both be provided';i=s.setter}if(t.isString(i))i=this.handleTargetPath(i,e,s);else if(!t.isFunction(i))throw"Target cannot be an expression";if(t.isString(n)?n=this.handlePath(n,e,s):t.isFunction(n)||(n=this.handleExpression(n.exp,e,s)),s.dependencySet&&s.dynamicDependency)throw"Either options.dependencySet or options.dynamicDependency can be set";this._bind(e,i,n,s),s.twoWay&&(delete s.dependencySet,delete s.setter,s.setOnBind=!1,delete s.targetField,delete s.targetObject,delete s.valueField,delete s.twoWay,this.bind(e,o,a,s))},a.prototype.unbind=function(e){if(e){for(var t in this.groups[e]){var i=this.groups[e][t];this.unbindDependencySet(this.bindings[i].dependencySet,this.bindings[i].handler),delete this.bindings[i]}delete this.groups[e]}else{for(var n in this.bindings)this.unbindDependencySet(this.bindings[n].dependencySet,this.bindings[n].handler);this.bindings={},this.groups={}}},a.prototype._bind=function(e,i,n,s){var a=this.counter++,o=r(s,!0),d=r(s,!1),u=l(s),h=t.defaults({error:o,warning:d},s);s.targetObject&&s.targetField&&u&&s.targetObject.on&&s.targetObject.on("error:"+s.targetField,u,this);var c=function(t,o,r){var l=this.calcValue(n,e,s,s.dynamicDependency);l.v!==this.bindings[a].v&&(this.bindings[a].v=l.v,h._warningWasFound=r&&r._warningWasFound,h._bound=!0,i.call(e,l.v,h),delete h._warningWasFound),s.dynamicDependency&&(this.handleDependencySet(l.dependencySet,c,this.bindings[a].dependencySet,this.bindings[a].handler),this.bindings[a].dependencySet=l.dependencySet)},p=s.dependencySet,f=this.calcValue(n,e,s,!p),g=p||f.dependencySet;(0===g.length||s.setOnBind!==!1)&&(s._bound=!0,i.call(e,f.v,s)),g.length>0&&(this.handleDependencySet(g,c),this.bindings[a]={},this.bindings[a].dependencySet=g,this.bindings[a].handler=c,this.bindings[a].v=f.v,s&&s.groupId&&(this.groups[s.groupId]||(this.groups[s.groupId]=[]),this.groups[s.groupId].push(a)))},a.prototype.handleTargetPath=function(e,i,n){var a=e.split(".");if(t.isEqual(a[0],"context")){if(t.isUndefined(n.context)||t.isUndefined(n.context[a[1]]))throw"When using context in path - options.context is mandatory"}else if(t.isNull(i))throw"When using this or models in path - default context is mandatory";var o,r="return ";switch(a[0]){case"this":o=i,r+="this";break;case"models":o=i.models,r+="this.models";break;case"subViewModels":o=i.subViewModels,r+="this.subViewModels";break;case"context":o=n.context,r+="options.context";break;default:a.unshift("this"),o=i,r+="this"}a.length>2&&"object"==typeof o.data&&o.data.__vmdata__&&(r+=".data",o=o.data);for(var l,d=1;d<a.length-1;d++){var u=a[d];s.isSubscribable(o[u])?(l=r,r+="."+u+"()",o=o[u]()):t.isFunction(o.get)?(l=r,r+='.get("'+u+'")',o=o.get(u)):(r+='["'+u+'"]',o=o[u])}u=a[d],n.targetField=n.targetField||u;var h=n.set||"set";return s.isSubscribable(o[u])?(l=r,r+="."+u+"(v)"):t.isFunction(o[h])?(l=r,r+="."+h+'("'+u+'", v, options)'):r+='["'+u+'"] = v',n.targetObject||(n.targetObject=l?new Function("options",l).call(i,n):void 0),new Function("v","options",r)},a.prototype.handlePath=function(e,i,n){var a=e.split(".");if(t.isEqual(a[0],"context")){if(t.isUndefined(n.context)||t.isUndefined(n.context[a[1]]))throw"When using context in path - options.context is mandatory"}else if(t.isNull(i))throw"When using this or models in path - default context is mandatory";var o,r=a[0];switch(a[0]){case"this":o=i;break;case"models":o=i.models;break;case"subViewModels":o=i.subViewModels,r="this.subViewModels";break;case"context":o=n.context;break;default:a.unshift("this"),o=i,r="this"}for(var l=1;l<a.length;l++){var d=a[l];if(!o)throw"Object does not exist";s.isSubscribable(o[d])?(r+="."+d+"()",l<a.length-1&&(o=o[d]())):t.isFunction(o.get)?(r+='.get("'+d+'")',l<a.length-1&&(o=o.get(d))):(r+='["'+d+'"]',l<a.length-1&&(o=o[d]))}return n.valueObject=o,n.valueField=d,this.handleExpression(r,i,n)},a.prototype.handleExpression=function(e){if(!t.isString(e)||0===e.length)throw"expression cannot not be empty";return new Function("context","models","return "+e)},a.prototype.calcValue=function(e,t,n,a){var o,r=i.Model.prototype.get,l=[];i.Model.prototype.get=function(e){return a&&l.push({bean:this,field:e}),r.call(this,e)};try{var d=function(){return o=e.call(t,n.context,t?t.models:null)},u=s.computed(d);u.isActive()&&l.push({KO:!0,subscribable:u})}finally{i.Model.prototype.get=r}return{v:o,dependencySet:l}},a.prototype.handleDependencySet=function(e,t,i,n){this.unbindDependencySet(i,n);for(var s in e)e[s].KO?e[s].subscription=e[s].subscribable.subscribe(t,this):e[s].bean.on("change:"+e[s].field,t,this)},a.prototype.unbindDependencySet=function(e,t){for(var i in e)e[i].KO?e[i].subscription.dispose():e[i].bean.off("change:"+e[i].field,t,this)},a.prototype.bindDOM=function(e){this.unbindDOM(e);var i="_"+e.cid,n={groupId:i};e.events||(e.events={});var s=this._handle(this,e,n);e.$root.attr("data-ls-bind")&&e.$root.each(s),e.$root.find("[data-ls-bind]").each(s),s=this._handleAttribute(e,n),e.$root.attr("data-ls-bind-attr")&&e.$root.each(s),e.$root.find("[data-ls-bind-attr]").each(s),t.isEmpty(e.events)||e.delegateEvents()},a.prototype.unbindDOM=function(e){var t="_"+e.cid;this.unbind(t),e.undelegateEvents()},a.prototype._handle=function(t,i,n){var s=this;return function(){var o=e(this),r=a.getBindOptions(o.attr("data-ls-bind")),l=r.fields;switch(r.bindSetType){case"text":s._handleText(o,l[0],t,i,n,r);break;case"value":s._handleValue(o,l[0],t,i,n,r)}}},a.getBindOptions=function(e){var i=e.replace(/\s+/g,""),n={},s={},a=/.*?\((.*)?\)/;if(i.match(a)){var o=i.replace(a,"$1");t.each(o.split(","),function(e){var t=e.split(":");s[t[0]]=t[1]})}var r=/(.*?)\|(.*?)\(.*|(.*?)\|(.*?)/;i.match(r)&&(n.formatType=i.replace(r,"$2"));var l=/^(.*?):.*/;n.bindSetType=i.replace(l,"$1");var d=/.*?:(.*?)\|.*|.*?:(.*?)/,u=i.replace(d,"$1");return n.fields=u.split(","),t.extend(n,t.isEmpty(s)?{}:{formatParams:s})},a.prototype._handleAttribute=function(t,i){var n=function(e,t){return function(i){e.attr(t,i)}},s=this;return function(){for(var a=e(this),o=a.attr("data-ls-bind-attr").replace(" ","").split(","),r=0;r<o.length;r++){var l=o[r].split(":"),d=s._getValue(l[1],t),u=n(a,l[0]);s._bind(t.viewModel,u,d,i)}}};var o=function(e,i,n){var s=t.clone(e);return s.statusText=e.statusText&&e.statusText.replace(n,i),s.attrs={},s.attrs[i]=e.attrs[n],s},r=function(e,i){return function(n,s,a){s&&"validation"===s.source&&a&&a.valueObject&&t.each(i?s.errors:s.warnings,function(t){if(t.conf.fieldName==a.targetField){var s=o(t,a.valueField,a.targetField),r=i?e.error:e.warning;r?r(n,s,a):a.valueObject.trigger((i?"bindingError:":"bindingWarning:")+a.valueField,a.valueObject,s,a)}})}},l=function(e){return e&&e.targetField&&e.valueObject&&e.valueField?function(t,i){var n=o(i,e.valueField,e.targetField);e.valueObject.trigger("bindingError:"+e.valueField,e.valueObject,n)}:void 0};a.prototype._getValue=function(e,t){var i=e.split("."),n=d(i[0],t);return n!==i[0]&&(e=e.replace(i[0],n)),this.handlePath(e,t.viewModel,{})},a.prototype._handleText=function(e,t,i,s,a,o){var r=function(t){var i=o.formatType?n.format(s.getBindContext(),o):t;
e.text(i)},l=this._getValue(t,s);i._bind(s.viewModel,r,l,a)},a.prototype._handleValue=function(e,t,i,n,s){var a=function(t){e.val(t)},o=t.split("."),r=d(o[0],n),l=r!==o[0]?t.replace(o[0],r):t,u=this.handlePath(l,n.viewModel,{});i._bind(n.viewModel,a,u,s);var h='change [data-ls-bind*="value:'+t+'"]',c=this.handleTargetPath(l,n.viewModel,{});n.events[h]=function(){return c.call(n.viewModel,e.val())}};var d=function(e,t){var i;return(i=t.vmKeys["data."+e])?i:e};return a}),define("src/core/viewModel/BaseViewModel",["jquery","underscore","backbone","src/core/viewModel/ViewModelConstructor","src/core/util/Utils","src/core/binding/Binding","src/core/model/Model","src/core/model/Collection"],function(e,t,i,n,s,a,o,r){var l=/^\s*(\S*)\s*(\S*)?\s*$/,d=/{([^}]*)}/;return t.extend(n,{isViewModel:!0,extend:s.extend,mergeProperties:{config:"merge",defaults:"merge",models:"merge",viewModels:"merge",dataBindings:"merge"}}),t.extend(n.prototype,i.Events,{initialize:function(){},defaults:{},config:{},dataBindings:[],coreEvents:{"error *":"dataError","all *":"errorHandler"},mapValidationError:function(e,i){t.isEmpty(this.modelKeys)||(e.attrs=t.reduce(e.attrs,function(e,t,n){var s=this.modelKeys[i+"."+n];return e[s?s:n]=t,e},{},this))},_errorEventPattern:/^(error:|warning:)(.+)$/,errorHandler:function(i,n,s){var a=this._errorEventPattern.exec(i);if(a){if(t.isEmpty(this.modelKeys)||(s=e.extend(!0,{},s)),s&&"validation"===s.source){var o=n&&n.cid&&this._modelsMap[n.cid]?this._modelsMap[n.cid]:"*";this.mapValidationError(s,o);var r=this.modelKeys[o+"."+a[2]];r&&(i=a[1]+r)}this.trigger(i,n,s)}},dataError:function(i,n,s){if(t.isEmpty(this.modelKeys)||(n=e.extend(!0,{},n)),n&&"validation"===n.source){var a=i&&i.cid&&this._modelsMap[i.cid]?this._modelsMap[i.cid]:"*";if(n.errors)for(var o in n.errors)this.mapValidationError(n.errors[o],a);if(n.warnings)for(var o in n.warnings)this.mapValidationError(n.warnings[o],a)}this.trigger("error",i,n,s)},_instantiateModels:function(){var e;for(var i in this._models)e=this._models[i],t.isFunction(e)?this._models[i]=this.create(t.uniqueId("_model"),e,{}):t.isArray(e)?this._models[i]=this.create(t.uniqueId("_model"),r,e):t.isObject(e)&&t.has(e,"id")&&t.has(e,"class")&&2===t.keys(e).length?this._models[i]=this.create(e.id,e["class"],{}):e instanceof o||e instanceof r||(this._models[i]=this.create(t.uniqueId("_model"),o,e));this._modelsMap={},this.modelKeys&&t.each(this._models,function(e,t){this._modelsMap[e.cid]=t},this)},_instantiateSubViewModels:function(){},delegateEvents:function(e,i){if(e){t.isFunction(i)&&(i=i.call(this)),i=t.defaults({},i,this.events,this.coreEvents),this.undelegateEvents();var n=this._delegatedEvents={},s=this.defaultModel();for(var a in i){var o=i[a],r=o.match(d);if(r)o=t.bind(this._triggerWithoutModels,this,r[1]);else if(o=this[o],!o)throw new Error('Method "'+i[a]+'" does not exist');var u,h=a.match(l),c=h[1],p=h[2]||s;if("*"===p)u=t.values(e);else{if(!e[p])throw new Error('Model "'+p+'" does not exist');u=[e[p]]}t.each(u,function(e){if("*"!==p||t.isFunction(e.on)){e.on(c,o,this);var i=n[p]||(n[p]=[]);i.push({name:c,handler:o,producer:e})}},this)}}},_triggerWithoutModels:function(){var e=t.filter(arguments,function(e){return!(e instanceof o||e instanceof r)});this.trigger.apply(this,e)},undelegateEvents:function(e){var i;e?i=this._delegatedEvents[e]||[]:(i=t.flatten(t.values(this._delegatedEvents||{})),delete this._delegatedEvents);for(var n=0,s=i.length;s>n;++n){var a=i[n];a.producer.off(a.name,a.handler)}},_initializeData:function(e){var i=o,n=[].concat(e.validations||[],this.validations||[]);n.length&&(i=o.extend({validations:n})),this.data=new i(t.extend({},this.defaults,e.data))},_bindData:function(){this._binding=new a,this._binding.bindAll(this)},defaultModel:function(){var e=this._models&&t.keys(this._models);return e&&1===e.length?e[0]:void 0},setModel:function(){throw new Error("ViewModel.setModel() is not supported.")},getModel:function(e){return this._models[e]},destroy:function(){this.off(),this.clean(),this.undelegateEvents(),this._binding.unbind(),this._unbindSubViewModelEvents()},_unbindSubViewModelEvents:function(){this.subViewModels&&t.each(this.subViewModels,function(e){e&&"function"==typeof e.off&&e.off(null,null,this)},this)},clean:function(){},addRef:function(){++this._references},retain:function(){return this.addRef.apply(this,arguments)},release:function(){--this._references},fetch:function(){this.trigger("vm:ready")},handleUserAction:function(e){if(t.isUndefined(this[e])||!t.isFunction(this[e]))throw new Error("Unknown user action '"+e+"'.");this[e].apply(this,t.tail(arguments,1))},handleAction:function(e){if(!t.isString(e)&&t.isObject(e)&&this.subViewModels[e.vm]){var i=this.subViewModels[e.vm];return void i.handleAction.apply(i,t.union([e.key],t.rest(arguments)))}var n=this.getConfig("actions");n&&n[e]?n[e].apply(this,t.tail(arguments,1)):!t.isUndefined(this[e])&&t.isFunction(this[e])?this[e].apply(this,t.rest(arguments)):(arguments[0]="action:"+arguments[0],this.trigger.apply(this,arguments))},search:function(e){this.set("value",e),this.trigger("user:search",e)},click:function(){this.trigger("user:action",this.attr("action"))},set:function(e,i,n){if(e&&("config"===e||e.config))throw new Error("Lightsaber.Core.ViewModel.set(): `config` data attribute name is proibited");return t.isObject(e)&&e.key&&this.subViewModels[e.vm]?this.subViewModels[e.vm].set(e.key,i,n):this.data.set.apply(this.data,arguments)?this:!1},reset:function(){this.clear()},clear:function(){this.data&&this.data instanceof i.Model&&this.data.clear()},previous:function(){return this.data.previous.apply(this.data,arguments)},get:function(e){if("config"===e)throw new Error("Lightsaber.Core.ViewModel.get(): `config` data attribute name is proibited");var i;return t.isString(e)?i=this.data.get(e):t.isUndefined(e)?(i=this.data.toJSON(),delete i.subViewModels):t.isObject(e)&&this.subViewModels[e.vm]&&(i=this.subViewModels[e.vm].get(e.key)),i},setConfig:function(){return this.config.set.apply(this.config,arguments),this},getConfig:function(e){return 0===arguments.length?this.config.toJSON():this.config.get(e)},getData:function(){},_dataEventsHandler:function(e,t,i,n){var s={target:this},a=/^change:/.test(e);a&&(s.value=i),s.changed=t.changedAttributes&&t.changedAttributes(),s._warningWasFound=n&&n._warningWasFound,this.trigger(e,s)},_configEventsHandler:function(e,t,i){var n={target:this},s=/^change:/.test(e);s&&(n.value=i),t&&(n.changed={config:t.changedAttributes&&t.changedAttributes()}),e=e.replace(/^change/,"change:config"),this.trigger(e,n)},attr:function(e,i){var n,s,a;if(t.isArray(e)){for(n={},s=0,a=e.length;a>s;++s)n[e[s]]=this.get(e[s]);return n}if(t.isString(e)&&arguments.length>1||t.isObject(e))return this.set(e,i);if(t.isString(e))return this.get(e);throw new Error("Lightsaber.Core.ViewModel.attr(): invalid type of arguments")},getSubViewModel:function(e){return this.subViewModels&&this.subViewModels[e]},addSubViewModel:function(e,t){this.subViewModels[e]=t;var i=this.get("subViewModels"),n=i||{};n[e]=t,i?i[e]=t:this.set("subViewModels",n)},getDataBinding:function(){return this.dataBindings},createSubsetViewModel:function(e){e||(e={});var i=t.extend({},e.dataBindings?{dataBindings:e.dataBindings}:{},e.viewModel&&e.viewModel.settings?e.viewModel.settings:{}),s=new(e.viewModel&&e.viewModel.type||n)(i);return e.id&&(this.subViewModels||(this.subViewModels={}),this.subViewModels[e.id]=s),s},applySubsetBindings:function(e){if(!(e&&e.viewModelInstance&&e.viewModelInstance instanceof n))throw"No valid subset instance is provided.";var t=e.viewModelInstance,i=[].concat(t.dataBindings||[],e.dataBindings||[]);t._binding.bindAll(t,i),e.id&&(this.subViewModels||(this.subViewModels={}),this.subViewModels[e.id]=t)},shouldRegister:function(){return!0},shouldRestore:function(){return!1},shouldPersist:function(){return!1}},s.Factory,s.Common),n}),define("src/components/collection/viewmodel/CollectionViewModel",["underscore","jquery","src/core/viewModel/BaseViewModel","src/core/model/Collection"],function(e,t,i,n){var s=i.extend({currentModel:null,viewModelType:"Collection",initialize:function(){this._initialize()},_initialize:function(){e.bindAll(this),this.currentModel=this._getModel(),this.currentModel&&(this.currentModel.on("reset",this._processDataReset,this),this.currentModel.on("error",this.error,this),this.currentModel.on("change",this._change,this),this.currentModel.on("add",this._add,this),this.currentModel.on("remove",this._remove,this),this.currentModel.on("dataReady",this._processDataReady,this),this.on("change:config:filterFunction",this.refresh),this.on("change:config:sortFieldName",this.refresh),this.on("change:config:sortFunction",this.refresh))},nextPage:function(e,t){this.currentModel.next(e,t)},previousPage:function(e,t){this.currentModel.prev(e,t)},gotoPage:function(e,t){this.currentModel.gotoPage(e,t)},setPageSize:function(t){e.isNumber(t)||(t=Number(t)),this.currentModel.pagination.pageSize=t,this.currentModel.gotoPage(0)},_setSorting:function(e){this.currentModel.setSorting(e)},config:{autoUpdate:!0,enabled:!0,visible:!0},add:function(t,i){null==this.currentModel.get(t.cid)&&(this.currentModel.add(t,e.extend({silent:!0},i)),this._add(t,this.currentModel,i))},_add:function(e,t,i){if(this.getConfig("autoUpdate")){var n=this.getData(e);null!=n&&this.trigger("items:added",n,i&&i.at)}},change:function(e){this.currentModel.get(e.cid)&&(this.currentModel.remove(e,{silent:!0}),this.currentModel.add(e,{silent:!0}),this._change(e))},_change:function(e){if(this.getConfig("autoUpdate")){var t=this.getData(e);null!=t&&this.trigger("items:changed",t)}},remove:function(e){this.currentModel.get(e.cid)&&(this.currentModel.remove(e,{silent:!0}),this._remove(e))},_remove:function(e){if(this.getConfig("autoUpdate")){var t=this.getData(e);null!=t&&this.trigger("items:removed",t)}},refresh:function(){this.trigger("items:refreshed",this.getData())},empty:function(){this.trigger("items:emptied")},_resetData:function(){this.currentModel.fetch()},getData:function(e){return this._getData(e)},getGroupedData:function(e){return null==e&&(e=this._getPage()),e.modelData&&null!=e.modelData.data?this._handleFullList(e.modelData):null!=e.data?this._handleFullList(e):this._handleItem(e)},isGroupedCollection:function(){var e=null!=this.getConfig("itemListName");return e||(e=null!=this.getConfig("groupFieldName"),e||(e=null!=this.getConfig("groupFunction"))),e},_getData:function(e){var t=this._getSortFunction(),i=this._getItemsId(this.currentModel);if(null==e||e.data){null==e&&(e=this._getPage());var s=null,a={idAttribute:i};return null!=e&&(this.currentModel.dataSource&&this.currentModel.dataSource.getProperties().supportsPagination?(s=new n(e.data).toJSON(),a.paginationInfo=e.info):(s=this._getFilteredDataJSON(e.data),s=this._getSortedDataJSON(s,t),null!=e.info.pageSize&&(a.paginationInfo=e.info))),null==s&&(s=[]),a.items=s,a}var s=this._getFilteredDataJSON([e]);if(null==s)return null;var o=s[0];if(null==t)return{item:o,idAttribute:i,modelData:e};var r=this._getPage();if(null==r.info.pageSize){var l=this._getFilteredDataJSON(r.data),d=this._getSortedIndex(l,o,t);return{item:o,idAttribute:i,sortedIndex:d,modelData:e}}},_getModel:function(){var e=this.defaultModel();return e?this.models[e]:null},_iterator:function(e){return e[this.getConfig("sortFieldName")]},_processDataReset:function(e){this._processData(e,"items:loaded")},_processDataReady:function(e){this._processData(e,"items:paginated")},_processData:function(e,t){var i=null,n=0;n=null!=e.pageNum?e.pageNum:0;var s=this._getPage(n);i=this.getData(s),i.modelData=s,this.trigger(t,i)},error:function(e,t){this.trigger("error",e,t)},_getFilteredDataJSON:function(t){if(null==t||0==t.length)return null;var i=this.getConfig("filterFunction");return i&&(t=e.filter(t,i)),0==t.length?null:new n(t).toJSON()},_getSortedDataJSON:function(t,i){return null==t||0==t.length?null:null!=i?e.sortBy(t,i):t},_getSortFunction:function(){var e=null;return this.getConfig("sortFunction")?e=this.getConfig("sortFunction"):this.getConfig("sortFieldName")&&(e=this._iterator),e},_getItemsId:function(e){var t=e.model.prototype.idAttribute?e.model.prototype.idAttribute:"id";return t},_getSortedIndex:function(t,i,n){var s=e.sortBy(t,n),a=e.map(s,n),o=n(i),r=e.sortedIndex(a,o);return r},_getSorting:function(){return this.currentModel.sorting},_getPagination:function(){return this.currentModel.pagination},_getPage:function(e){var t=this.currentModel.getPage(e);return t&&t.data&&this.set({items:t.data}),t},_handleItem:function(e){var t;if(t=null==e.item?this._getData(e):e,null!=t){if(this.getConfig("itemListName")){var i=this._getItemsId(this.currentModel),n=e.get(this.getConfig("itemListName"));itemsId=null!=n&&n.length&&null!=n[0].models?this._getItemsId(n[0]):"id";var s={group:t.item,itemsListName:this.getConfig("itemListName"),groupIdAttribute:i,idAttribute:itemsId,sortedIndex:t.sortedIndex};return s}var a=this._getGroupFunction(),o=a(t.item),r={groupName:o,id:o,idAttribute:this._getItemsId(this.currentModel)},s=t;return s.group=r,s}return null},_handleFullList:function(e){var t=null,i=null,n=null,s=null;if(this.getConfig("itemListName")){i=this._getItemsId(this.currentModel),s=this.getConfig("itemListName");for(var a=0;a<e.data.length;a++){var o=e.data[0].get(s);null!=o&&o.length&&o.models&&(t=this._getItemsId(o))}null==t&&(t="id"),n=this._getData(e).items}else{t=this._getItemsId(this.currentModel),i=t;var r=null,l=null;n=[],s="items";for(var o=this._getData(e),d=this._getGroupFunction(),a=0;a<o.items.length;a++){var u=d(o.items[a]);u!=r&&(r=u,n[n.length]={groupName:r,id:r,items:[]},l=n[n.length-1].items),l[l.length]=o.items[a]}}var h={items:n,idAttribute:t,groupIdAttribute:i,itemsListName:s,paginationInfo:e.info};return h},_groupIterator:function(e){var t=e[this.getConfig("groupFieldName")];return null==t?"":t},_getGroupFunction:function(){var e=null;if(this.getConfig("groupFunction")?e=this.getConfig("groupFunction"):this.getConfig("groupFieldName")&&(e=this._groupIterator),null==e&&(e=this._getSortFunction(),null==e))throw"No grouping function has been defined";return e}});return s.mergeProperties={config:"merge"},s}),define("src/core/viewModel/ViewModel",["src/core/viewModel/BaseViewModel","src/components/collection/viewmodel/CollectionViewModel","src/core/model/Collection"],function(e,t,i){var n=e.extend({_instantiateSubViewModels:function(){var e;for(var s in this.subViewModels)e=this.subViewModels[s],_.isFunction(e)?this.subViewModels[s]=this.create(_.uniqueId("_viewmodel"),e,{}):_.isArray(e)?this.subViewModels[s]=this.create(_.uniqueId("_viewmodel"),t,{models:{data:new i(e)}}):_.isObject(e)&&_.has(e,"id")&&_.has(e,"class")&&2===_.keys(e).length?this.subViewModels[s]=this.create(e.id,e["class"],{}):e instanceof n||e instanceof t||(this.subViewModels[s]=this.create(_.uniqueId("_viewmodel"),n,e))}});return n}),define("src/core/knockout/ContentBinding",["jquery","knockout","src/core/util/Utils"],function(e,t,i){t.CustomBindingProvider=function(){function e(e){var t,i=null;return e.getAttribute&&(t=e.getAttribute("data-content-id"))?(i=['content: {id: "'+t+'"}'],i.join(", ")):i}var i=new t.bindingProvider;this.nodeHasBindings=function(t){return!!e(t)||i.nodeHasBindings(t)},this.getBindings=function(t,n){var s=e(t,n)||i.getBindingsString(t,n);return s?i.parseBindingsString(s,n,t):null},this.getBindingAccessors=function(t,n){var s=e(t,n)||i.getBindingsString(t,n);return s?i.parseBindingsString(s,n,t,{valueAccessors:!0}):null}};var n=function(){_.bindAll(this,"_base","init","update","_ascendToWidget","_findHandler")};return _.extend(n,{extend:i.extend}),_.extend(n.prototype,{_base:function(t,i,n,s,a){var o,r,l,d=this._findHandler(a),u=this._ascendToWidget(d.view);u&&u.contentData&&(r=i(),r&&r.id&&(l=u.contentData[r.id],l&&(o=e(t),o.text(l))))},init:function(e,t,i,n,s){this._base(e,t,i,n,s)},update:function(e,t,i,n,s){this._base(e,t,i,n,s)},_ascendToWidget:function(e){var t;return e&&(!e.isBusinessWidget||e.isBusinessWidget&&!e.contentData?e.getParent&&(t=this._ascendToWidget(e.getParent())):t=e),t},_findHandler:function(e){var t;if(e)if(e.$data&&_.isObject(e.$data)&&"__viewhandler__"in e.$data||"__viewhandler__"in e)t=e.__viewhandler__||e.$data.__viewhandler__;else for(var i=0,n=e.$parents.length;n>i;i++)if(e.$parents[i]&&"__viewhandler__"in e.$parents[i]){t=e.$parents[i].__viewhandler__;break}return t}}),n}),define("src/core/knockout/ViewCustomBinding",["knockout","src/core/util/Utils"],function(e,t){var i=function(){_.bindAll(this,"init","_findHandler")};return _.extend(i,{extend:t.extend,mergeProperties:{data:"merge",config:"merge",defaults:"merge",models:"merge",dataBindings:"merge",mapping:"merge"}}),_.extend(i.prototype,{init:function(t,i,n,s,a){var o=this._findHandler(a),r=i(),l={};if(8===t.nodeType){var d=e.virtualElements.childNodes(t);d.length>1&&(l.template=!1,t=d[1])}else t.children&&t.children.length>0&&(l.template=!1,$(t.children).wrapAll("<div/>"),t=t.children[0]);return l.name=r&&r.name?r.name:r,l.id=r&&r.id?r.id:_.uniqueId("inline_"),l.initVM=r&&"undefined"!=typeof r.initVM?r.initVM:!0,o&&o(t,l,s,a),{controlsDescendantBindings:!0}},_findHandler:function(e){var t;if(e)if(e.$data&&_.isObject(e.$data)&&"__viewhandler__"in e.$data||"__viewhandler__"in e)t=e.__viewhandler__||e.$data.__viewhandler__;else for(var i=0,n=e.$parents.length;n>i;i++)if(e.$parents[i]&&"__viewhandler__"in e.$parents[i]){t=e.$parents[i].__viewhandler__;break}return t}}),i}),define("src/core/knockout/WidgetCustomBinding",["src/core/util/Utils","knockout"],function(e,t){var i=function(){_.bindAll(this,"init","_findHandler")};return _.extend(i,{extend:e.extend,mergeProperties:{data:"merge",config:"merge",defaults:"merge",models:"merge",dataBindings:"merge",mapping:"merge"}}),_.extend(i.prototype,{init:function(e,i,n,s,a){var o=this._findHandler(a),r=i(),l={};if("string"==typeof r&&(r={name:r}),l=_.extend({},r,l),8===e.nodeType){var d=t.virtualElements.childNodes(e);d.length>1&&(l.template=!1,e=d[1])}else e.children&&e.children.length>0&&(l.template=!1,$(e.children).wrapAll("<div/>"),e=e.children[0]);return o&&o(e,l,s,a),{controlsDescendantBindings:!0}},_findHandler:function(e){var t;if(e)if(e.$data&&_.isObject(e.$data)&&"__widgethandler__"in e.$data||"__widgethandler__"in e)t=e.__widgethandler__||e.$data.__widgethandler__;else for(var i=0,n=e.$parents.length;n>i;i++)if(e.$parents[i]&&"__widgethandler__"in e.$parents[i]){t=e.$parents[i].__widgethandler__;break}return t}}),i}),define("src/core/knockout/RBACustomBinding",["src/core/util/Utils"],function(e){var t=function(){_.bindAll(this,"init","_findHandler")};return _.extend(t,{extend:e.extend}),_.extend(t.prototype,{init:function(e,t,i,n,s){var a=this._findHandler(s),o=t(),r={id:o};a(e,r,n,s)},_findHandler:function(e){var t;if(e)if(e.$data&&_.isObject(e.$data)&&"__rbaHandler__"in e.$data||"__rbaHandler__"in e)t=e.__rbaHandler__||e.$data.__rbaHandler__;else for(var i=0,n=e.$parents.length;n>i;i++)if(e.$parents[i]&&"__rbaHandler__"in e.$parents[i]){t=e.$parents[i].__rbaHandler__;break}return t}}),t}),define("src/core/knockout/IE8Blame",["knockout"],function(e){if(e.utils.ieVersion<=11){var t,i=function(t,i,n){for(var s,a=t,o=e.virtualElements.nextSibling(i);a&&(s=a)!==o;)a=e.virtualElements.nextSibling(s),n(s,a)},n=function(t,n){if(t.length){var s=t[0],a=t[t.length-1],o=s.parentNode,r=e.bindingProvider.instance,l=r.preprocessNode;if(l){if(i(s,a,function(e,t){var i=e.previousSibling,n=l.call(r,e);n&&(e===s&&(s=n[0]||t),e===a&&(a=n[n.length-1]||i))}),t.length=0,!s)return;s===a?t.push(s):(t.push(s,a),e.utils.fixUpContinuousNodeArray(t,o))}i(s,a,function(t){(1===t.nodeType||8===t.nodeType)&&e.applyBindings(n,t)}),i(s,a,function(t){(1===t.nodeType||8===t.nodeType)&&e.memoization.unmemoizeDomNodeAndDescendants(t,[n])}),e.utils.fixUpContinuousNodeArray(t,o)}},s=function(t,i,s,a,o){var r=!1;switch(a){case"replaceChildren":e.virtualElements.setDomNodeChildren(t,i),r=!0;break;case"replaceNode":e.utils.replaceDomNodes(t,i),r=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+a)}r&&(n(i,s),o.afterRender&&e.dependencyDetection.ignore(o.afterRender,null,[i,s.$data]))},a=function(e,t,i,n,a){var o=window.setTimeout(function(){s(e,t,i,n,a),window.clearTimeout(o)},10)},o=0,r=!1,l=function(i,n,l,u,h){h=h||{};var c=i&&d(i),p=c&&c.ownerDocument,f=h.templateEngine||t;e.templateRewriting.ensureTemplateIsRewritten(l,f,p);var g=f.renderTemplate(l,u,h,p);return 200>o&&!r?(o++,s(i,g,u,n,h)):(a(i,g,u,n,h),r=!0,o=0),g},d=function(e){return e.nodeType?e:e.length>0?e[0]:null};e.setTemplateEngine=function(i){if(void 0!=i&&!(i instanceof e.templateEngine))throw new Error("templateEngine must inherit from KO.templateEngine");t=i},e.renderTemplate=function(i,n,s,a,o){if(s=s||{},void 0==(s.templateEngine||t))throw new Error("Set a template engine before calling renderTemplate");if(o=o||"replaceChildren",a){var r=d(a),u=function(){return!r||!e.utils.domNodeIsAttachedToDocument(r)},h=r&&"replaceNode"==o?r.parentNode:r;return e.dependentObservable(function(){var t=n&&n instanceof e.bindingContext?n:new e.bindingContext(e.utils.unwrapObservable(n)),u="function"==typeof i?i(t.$data,t):i,h=l(a,o,u,t,s);"replaceNode"==o&&(a=h,r=d(a))},null,{disposeWhen:u,disposeWhenNodeIsRemoved:h})}return e.memoization.memoize(function(t){e.renderTemplate(i,n,s,t,"replaceNode")})},e.renderTemplateForEach=function(t,i,s,a,o){var r,d=function(e,i){r=o.createChildContext(e,s.as,function(e){e.$index=i});var n="function"==typeof t?t(e,r):t;return l(null,"ignoreTargetNode",n,r,s)},u=function(e,t){n(t,r),s.afterRender&&s.afterRender(t,e)};return e.dependentObservable(function(){var t=e.utils.unwrapObservable(i)||[];"undefined"==typeof t.length&&(t=[t]);var n=e.utils.arrayFilter(t,function(t){return s.includeDestroyed||void 0===t||null===t||!e.utils.unwrapObservable(t._destroy)});e.dependencyDetection.ignore(e.utils.setDomNodeChildrenFromArrayMapping,null,[a,n,d,s,u])},null,{disposeWhenNodeIsRemoved:a})};{e.utils.domData.nextKey()}}}),define("src/core/knockout/KOUnderscoreTemplateEngineIntegration",["src/core/util/Utils","knockout","knockout.mapping","knockout.validation"],function(e,t,i){t.underscoreTemplateEngine=function(){},t.underscoreTemplateEngine.prototype=t.utils.extend(new t.nativeTemplateEngine,{renderTemplate:function(n,s,a,o){var r,l,d,u,h,c,p,f,g,m,v,b,w,y=function(e){_.extend(e,{i18n:s.$root.__getResourceBundle__,format:s.$root.__getFormatter__})};if(v=new t.templateSources.anonymousTemplate(n),b=v.text(),h=v.nodes(),a&&b&&/\S/.test(b)){if(a.path){w=b,c=s.$data,g=e.safeUnwrap(c);var p=t.unwrap(a.path),x='[data-template-path="'+p+'"]',C=$(h).find(x);return u=C.length>0?C.prop("outerHTML"):b,this.unwrapAugmentOptions(a),t.utils.parseHtmlFragment(u)}if(a.type){w=b,c=s.$data,g=e.safeUnwrap(c);var f=t.unwrap(a.type),M='[data-template-type="'+f+'"]',V=$(h).find(M);if(V.length>0)return u=V.prop("outerHTML"),this.unwrapAugmentOptions(a),t.utils.parseHtmlFragment(u)}}if(a&&b&&/\S/.test(b)&&!a.type)return w=b,c=s.$data,g=e.safeUnwrap(c),r=_.template(w),y(g),u=r(g),this.unwrapAugmentOptions(a),t.utils.parseHtmlFragment(u);if(a&&a.name)l=this.makeTemplateSource(n,o),d=_.template("<% with($data) { %>"+l.text()+"<% } %>"),u=d(s).replace(/\s+/g," ");else if(a&&a.path)c=s.$data,g=e.safeUnwrap(c),p=t.unwrap(a.path),requirejs.defined("tpl!"+p)?r=requirejs("tpl!"+p):(r=_.template(requirejs("text!"+p)),y(g)),u=r(g);else if(a&&a.module)c=s.$data,_.isFunction(a.module)?u=a.module(i.toJS(c)):"String"==typeof a.module&&(u=_.template(a.module,i.toJS(c)));else{if(!a||!a.type)throw new Error('Template binding doesn"t have correct "name" or "path" settings.');f=t.unwrap(a.type),r=s.$root.templates[f],c=s.$data,g=e.safeUnwrap(c),_.isFunction(r)?u=r(g):"string"==typeof r&&(y(g),u=_.template(r,g))}return a&&a.augment&&(a.data=a.data||{},m=t.unwrap(a.augment.path)||t.unwrap(a.augment.id),a.data.path=t.observable(m+"/"+t.unwrap(a.data.id))),t.utils.parseHtmlFragment(u)},unwrapAugmentOptions:function(e){if(e&&e.augment){e.data=e.data||{};var i=t.unwrap(e.augment.path)||t.unwrap(e.augment.id);e.data.path=t.observable(i+"/"+t.unwrap(e.data.id))}},createJavaScriptEvaluatorBlock:function(e){return"<%= "+e+" %>"}}),t.setTemplateEngine(new t.underscoreTemplateEngine)}),define("src/core/knockout/KnockoutPlugins",["module","jquery","underscore","knockout","knockout.mapping","knockout.validation","src/core/util/Utils","src/core/knockout/ContentBinding","src/core/knockout/ViewCustomBinding","src/core/knockout/WidgetCustomBinding","src/core/knockout/RBACustomBinding","src/core/formatter/DateFormatter","src/core/knockout/IE8Blame","src/core/knockout/KOUnderscoreTemplateEngineIntegration"],function(e,t,i,n,s,a,o,r,l,d,u,h){n.subscribable.fn.unixDate=function(){var e,t=new h,i=this,s=n.computed({read:function(){var n=i();"string"==typeof n&&(n=parseInt(n,10));var s=new Date(n);return e=n?t.format(s,"yyyy-mm-dd"):""},write:function(t){e=new Date(t).getTime(),i(e)}});return s},n.extenders.backup=function(e){var t=e.subscribe(function(){e._backup=e.peek(),t.dispose()},null,"beforeChange");return e},n.subscribable.fn.reset=function(){i.isUndefined(this._backup)||this(this._backup)},n.bindingHandlers.logger={update:function(e,t,i){var s=n.utils.domData.get(e,"_ko_logger")||0,a=n.toJS(t()||i());n.utils.domData.set(e,"_ko_logger",++s),window.console&&window.console.log&&console.log(s,e,a)}},requirejs.appContext&&requirejs.appContext.config&&requirejs.appContext.config.cms&&(n.bindingProvider.instance=new n.CustomBindingProvider),n.bindingHandlers.content=new r,n.bindingHandlers.view=new l,n.bindingHandlers.widget=new d,n.bindingHandlers.rba=new u,n.virtualElements.allowedBindings.view=!0,n.virtualElements.allowedBindings.widget=!0,n.virtualElements.allowedBindings.rba=!0,n.observable.fn.apply=function(e){var t,s="."+this.peek();return t=i.isObject(e)?"uniqueId"in e?e.uniqueId+s:e.id+s:n.isObservable(e)?e.peek()+s:i.isString(e)?e+s:i.uniqueId("id_")},n.observable.fn.isArray=function(){return n.isObservable(this)&&(this.hasOwnProperty("remove")||this.hasOwnProperty("mappedRemove"))},n.observableArray.fn.size=function(){var e=this(),t=0;if(null==e||"undefined"==typeof e.length)return 0;for(var i=0,n=e.length;n>i;i++)e[i]._destroy!==!0&&t++;return t},n.extenders.mask=function(e,t){var i=n.computed({read:function(){return e()},write:function(i){e(i.replace(t))}}).extend({notify:"always"});return i},n.extenders.lazy=function(e,t){var i=n.computed({read:function(){return!i.loaded()&&t.callback&&t.context&&t.callback.call(t.context),e()},write:function(t){i.loaded(!0),e(t)},deferEvaluation:!0});return i.loaded=n.observable(),i.refresh=function(){i.loaded(!1)},i},n.extenders.process=function(e,t){var i=n.computed({read:function(){var i;return t.callback&&t.context?i=t.callback.call(t.context,e):t.callback&&(i=t.callback(e)),i},write:function(t){e(t)},deferEvaluation:!0,disposeWhenNodeIsRemoved:t.node});return i};var c=function(e){var t=[],s=n.unwrap(e());if(i.isObject(s))for(var a in s)"args"!==a&&t.push({action:s[a],event:a,args:s.args});else i.isString(s)&&t.push({action:s,event:"click"});return t},p=function(e,a,o,r,l){var d=r.__handler__;d||(d=l.$root.__handler__);var u=c(a);i.each(u,function(i){var a=n.unwrap(i.action),o=t(e);o.off(i.event),r.__vmKeys__&&r.__vmKeys__["action."+a]&&(a=n.unwrap(r.__vmKeys__["action."+a])),o.on(i.event,function(e){var t=s.toJS(r);delete t.__handler__,delete t.__ko_mapping__,delete t.__viewhandler__,delete t.__getResourceBundle__,d(a,e,t,r,l,i.args)})})};n.bindingHandlers.action={init:p,update:p};var f=function(e,t){var n;if(e)if(e.$data&&i.isObject(e.$data)&&t in e.$data||t in e)n=e[t]||e.$data[t];else for(var s=0,a=e.$parents.length;a>s;s++)if("object"==typeof e.$parents[s]&&t in e.$parents[s]){n=e.$parents[s][t];break}return n};n.bindingHandlers.click={init:function(e,t,i,s,a){var o=f(a,"__viewContextHandler__"),r=function(){var e={};return e.click=t()(o),e};return n.bindingHandlers.event.init.call(this,e,r,i,s,a)}},n.bindingHandlers.click.preprocess=function(e){return'function(newScopeFetcher){ if (typeof(newScopeFetcher) === "function") { with(newScopeFetcher()) { return '+e+"} } else { return "+e+"} }"};var g=function(e,a,o,r,l){var d=c(function(){var e=a();if(i.isFunction(e)){var t=f(l,"__viewContextHandler__");e=e(t)}return e}),u=t(e),h=function(e){return e+".view"};i.each(d,function(e){var t=n.unwrap(e.action),a=r.__clickhandler__||l.$root.__clickhandler__,d=h(e.event);u.off(d),u.on(d,function(n){var d,h=s.toJS(r);try{i.isUndefined(a)?i.isUndefined(e.action)||(d=e.action(r,n,u,l,h)):d=a(e.args?{method:t,args:e.args}:t,u,h,r,l,n)}finally{d!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}var c=o.get(e.event+"Bubble")!==!1;c||(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation())})})};n.bindingHandlers.event={init:g,update:g},n.bindingHandlers.event.preprocess=function(e){return'function(newScopeFetcher){ if (typeof(newScopeFetcher) === "function") { with(newScopeFetcher()) { return '+e+"} } else { return "+e+"} }"};var m=function(e,t,s,a,o){var r,l,d=o.$root.__getResourceBundle__,u=d(),h=n.unwrap(t());i.isObject(h)&&(r=n.toJS(h.args),h=n.unwrap(h.message)),l=u&&u.getString(h,r)?u.getString(h,r):h,i.isUndefined(l)&&(l=""),e.innerHTML=l};n.bindingHandlers.i18n={init:m,update:m},n.bindingHandlers.allowBindings={init:function(e,t){var i=n.unwrap(t());return{controlsDescendantBindings:!i}}},n.virtualElements.allowedBindings.allowBindings=!0,n.bindingHandlers.file={init:function(e,t){n.utils.registerEventHandler(e,"change",function(e){for(var i=e.target,s=new FormData,a=0;a<i.files.length;a++){var o=this.files[a];s.append(i.name,o,o.name)}n.isObservable(t())&&t()(s),n.utils.triggerEvent(i,"filesSelected")})}},n.bindingHandlers.extendWith={init:function(e,t,i,s,a){var o=s.invoke;o||(o=a.$root.invoke);var r=n.unwrap(t()),l={};l[r.name]=o(r.func,r.params);var d=a.extend(l);return n.applyBindingsToDescendants(d,e),{controlsDescendantBindings:!0}}}}),define("src/core/viewModel/ObservableViewModel",["jquery","underscore","backbone","src/core/util/Utils","src/core/binding/Binding","src/core/model/Model","src/core/model/RESTModel","src/core/model/Collection","src/components/collection/viewmodel/CollectionViewModel","src/core/viewModel/ViewModel","src/core/util/StorageUtil","knockout","knockout.mapping","knockout.validation","src/core/knockout/KnockoutPlugins"],function(e,t,i,n,s,a,o,r,l,d,u,h,c,p){var f=function(e){var i,n;this.options=e||{},this._populateModels(),i=this._getPropertyByPrecedence("mapping",{}),this._augmentMapping(i),this.observe=this._getPropertyByPrecedence("observe",!0),n=this._getPropertyByPrecedence("data",this.defaults),this.data=h.isObservable(n)?n:c.fromJS(n,i),this.config=this._getPropertyByPrecedence("config",{visible:!0,enabled:!0}),this.dataBindings=this._getPropertyByPrecedence("dataBindings",[]),this.data.__handler__=t.bind(this.handleAction,this),this.subViewModels||(this.subViewModels={}),this._instantiateSubViewModels(e),this._listenToModelChanges(),this.initialize.apply(this,arguments),this.data.__vmdata__=!0,this.data.invoke=t.bind(this.invoke,this),this._bindData(),this._initValidation(),this._processValidationPaths(),this._processRba(),delete this.data.__vmdata__};t.extend(f,{isViewModel:!0,extend:n.extend,mergeProperties:{data:"merge",config:"merge",defaults:"merge",models:"merge",dataBindings:"merge",mapping:"merge"}}),t.extend(f.prototype,i.Events,{initialize:function(){},config:{validationSettings:{insertMessages:!1,decorateInputElement:!0,errorsAsTitle:!1,errorElementClass:"is-invalid",errorMessageClass:"validationMessage",grouping:{deep:!0}}},defaults:{},processData:function(e){c.fromJS(e,this.data)},_listenToModelChanges:function(){var e=this.options.models;t.each(e,function(e,i){var n=t.bind(function(e){var t={models:{}};c.isMapped(e)&&(e=c.toJS(e)),t.models[i]=e,this.processData(t)},this),s=t.bind(function(e,t){n(t)
},this);e.on&&(e.on("dataReady",s),e.on("reset",n))},this)},_initValidation:function(){var e=this.getConfig("validationSettings");p.init(e,!0)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),i=this[e].apply(this,t);return i},getData:function(){},_augmentMapping:function(){},augment:function(e,i,n){var s=this.get(!0);t.isObject(n)?s[e]=c.fromJS(i,n):t.isUndefined(n)&&(s[e]=i)},set:function(e,i,n){t.isBoolean(n)&&n?(n={},n.copy=[e]):t.isUndefined(n)?n={}:n._bound&&(n=n.mapping||{});var s,a=n.silent,o={};t.isObject(e)?(h.isObservable(e)?o=h.toJS(e):t.isObject(i)?(n=i,o=e):(n=h.utils.unwrapObservable(e).__ko_mapping__,o=n?c.toJS(e):e),delete o.__ko_mapping__,c.fromJS(o,n,this.data),this._triggerEvent({name:"change",prop:e})):(!t.isUndefined(this.data[e])&&h.isObservable(this.data[e])?this.data[e].isArray&&this.data[e].isArray()?c.fromJS(i,n[e],this.data[e]):(s=h.unwrap(this.data[e]),this.data[e](i)):(n.observe=n.observe||[],o[e]=i,c.fromJS(o,n,this.data)),a||s!==i&&this._triggerEvent({name:"change",prop:e,value:i}))},get:function(e,i){var n;return t.isBoolean(e)&&e?n=this._getWrapped():t.isObject(e)?n=this._getMapped(e):t.isUndefined(i)?e?t.isUndefined(this.data[e])||(n=c.toJS(this.data[e])):n=c.toJS(this.data):n=this._getWrapped(e),n},setValueByPath:function(e,t,i){var s=this._getWrapped();n.setValueByPath(s,e,t,i)},getValueByPath:function(e,t){var i,s=this._getWrapped();return i=e?n.getValueByPath(s,e,t):this.get(t)},_getMapped:function(e){return c.toJS(this.data,e)},attr:function(e,i){var n,s,a;if(t.isArray(e)){for(n={},s=0,a=e.length;a>s;++s)n[e[s]]=this.get(e[s]);return n}return t.isString(e)&&arguments.length>1||t.isObject(e)?this.set(e,i):t.isString(e)?this.get(e):void 0},_getWrapped:function(e){var t;return t=e?this.data[e]:this.data},setConfig:function(e,t){this.config[e]=t,this._triggerEvent({name:"change",subname:"config",prop:e,value:t})},getConfig:function(e){var t;return t=e?this.config[e]:this.config},reset:function(){this.clear(),this.data.__handler__=t.bind(this.handleAction,this)},clear:function(){this.data={}},handleAction:function(e){var i,n;e&&t.isString(e)&&(i=this.getConfig("actions"),i&&(n=i[e],t.isString(n)&&(n=this[n])),n||(n=this[e]),n?n.apply(this,t.tail(arguments,1)):(this.trigger.apply(this,arguments),arguments[0]="action:"+arguments[0],this.trigger.apply(this,event)))},_createDataForEvent:function(e,t){var i={_warningWasFound:void 0,changed:{},target:this};return t?(i.value=t,i.changed[e]=t):i.changed=e,i},_triggerEvent:function(e){var i,n=this._createDataForEvent(e.prop,e.value),s=e.name;e.subname&&(s+=":"+e.subname,i=n.changed,n.changed={},n.changed[e.subname]=i),this.trigger(s,n),t.isObject(e.prop)?t.each(e.prop,function(t,i){n.value=e.prop[i],this.trigger(s+":"+i,n)},this):this.trigger(s+":"+e.prop,n)},_getPropertyByPrecedence:function(i,n){var s=n;return t.isUndefined(this.options[i])?t.isUndefined(this[i])||(s=this[i]):s=this.options[i],f.mergeProperties[i]&&(s=t.isArray(s)?t.union(n,this[i]||[],this.options[i]||[]):e.extend(!0,{},n,this[i],this.options[i])),s},getSubViewModel:function(e){var t;return this.subViewModels&&(t=this.subViewModels[e]),t},addSubViewModel:function(e,t){this.subViewModels=this.subViewModels||{},this.subViewModels[e]=t},getModel:function(e){return this.models[e]},create:n.create,coreEvents:{"error *":"dataError","all *":"errorHandler"},_errorEventPattern:/^(error:|warning:)(.+)$/,errorHandler:function(e,t,i){this._errorEventPattern.exec(e)&&this.trigger(e,t,i)},dataError:function(e,t,i){this.trigger("error",e,t,i)},_populateModels:function(){var e,n=this.models=t.defaults({},this.options.models,this.models);for(var s in n)e=n[s],t.isFunction(e)?n[s]=new e:t.isArray(e)?n[s]=new r(e):e instanceof i.Model||e instanceof i.Collection||(n[s]=new a(e));this.delegateEvents(n)},defaultModel:function(e){return e=t.values(e||this.models||{}),e&&1===e.length?e[0]:void 0},delegateEvents:function(e,i){if(e){t.isFunction(i)&&(i=i.call(this)),i=t.defaults({},i,this.events,this.coreEvents),this.undelegateEvents();var n=this._delegatedEvents={},s=this.defaultModel(e);t.each(i,function(a,o){var r,l=this[i[o]],d=o.match(g),u=d[1],h=d[2]||s;if("*"===h)r=t.values(e);else{if(!e[h])throw new Error('Model "'+h+'" does not exist');r=[e[h]]}t.each(r,function(e){if("*"!==h||t.isFunction(e.on)){e.on(u,l,this);var i=n[h]||(n[h]=[]);i.push({name:u,handler:l,producer:e})}},this)})}},undelegateEvents:function(e){var i;e?i=this._delegatedEvents[e]||[]:(i=t.flatten(t.values(this._delegatedEvents||{})),delete this._delegatedEvents);for(var n=0,s=i.length;s>n;++n){var a=i[n];a.producer.off(a.name,a.handler)}},dataBindings:[],_bindData:function(){this._binding=new s,this._binding.bindAll(this)},_instantiateSubViewModels:function(){var e;for(var i in this.subViewModels)e=this.subViewModels[i],t.isFunction(e)?this.subViewModels[i]=this.create(t.uniqueId("_viewmodel"),e,{}):t.isArray(e)?this.subViewModels[i]=this.create(t.uniqueId("_viewmodel"),d,{models:{data:new r(e)}}):t.isObject(e)&&t.has(e,"id")&&t.has(e,"class")&&2===t.keys(e).length?this.subViewModels[i]=this.create(e.id,e["class"],{}):e instanceof l||e instanceof d||e instanceof f||(this.subViewModels[i]=this.create(t.uniqueId("_viewmodel"),l,e))},_processValidationPaths:function(){var e=this.getConfig("validations");t.each(e,this._processSinglePath,this)},_processSinglePath:function(e,i){t.each(e,function(e){this._processSingleValidation(e,i)},this)},_processSingleValidation:function(e,i){var n=this.getConfig("rules")||{},s=t.keys(e)[0],a=t.extend({},p.rules[s],n[s]),o={validation:a};o.validation.params=e[s];var r=this.getValueByPath(i,!0);r=r.extend(o),this.setValueByPath(i,r,!0)},_processRba:function(){var e=this.getConfig("rbaUrl");if(e){var t=new o(null,{url:e}),i=this;return t.fetch({success:function(e,t){i.set(t)}})}},destroy:function(){this.off(),this.clean(),this.undelegateEvents(),this._binding.unbind(),this._unbindSubViewModelEvents()},_unbindSubViewModelEvents:function(){this.subViewModels&&t.each(this.subViewModels,function(e){e&&"function"==typeof e.off&&e.off(null,null,this)},this)},clean:function(){},shouldRegister:function(){return!0},shouldRestore:function(){return!0},shouldPersist:function(){return!0},persistent:[],restoreData:function(e){for(var t=u.get(e)||{},i={},s=function(e,t,i){for(var n=t.split(".");n.length>1;){var s=n.shift();e.hasOwnProperty(s)||(e[s]={}),e=e[s]}e[n.shift()]=i},a=0,o=this.persistent.length;o>a;a++){var r=this.persistent[a],l=n.getValueByPath(t,r);s(i,r,l)}this.set(i)},persist:function(e,t,i){for(var n=u.get(e)||{},s=t.split("."),a=n,o=0,r=s.length;r-1>o;o++)a[s[o]]=a[s[o]]||{},a=a[s[o]];a[s[s.length-1]]=i,u.set(e,n)}}),t.extend(f.prototype,{_manipulateCollectionData:function(e,i){return t.map(i,function(e){return e.toJSON?e.toJSON():e})},collectionMapper:function(e,t){this.addObservableCollection(t,e)},addObservableCollection:function(e,i){var n=this,s=this.data;s[i]=h.observableArray(),s[i].modelName=t.find(t.map(this.models,function(t,i){return e===t?i:!1}),function(e){return e}),s[i].bindPropName=i;var a=function(e){var t,a=e.getPageNum();if(e.isAccumelated()){var o=(a+1)*e.pagination.pageSize;o=Math.min(e.pagination.maxIndex,o),t=e.getRows(0,o)}else t=e.getPage(a);s[i](n._manipulateCollectionData(e,t.data))},o=function(e,t){a(t)};e.on&&(e.on("dataReady",o),e.on("reset",a))},getPagination:function(e){if(!(e&&e.items&&e.items.modelName&&e.items.bindPropName))throw"To create a pagination extension you must provide an item object that was created by calling addObservableCollection.";var t=this.models[e.items.modelName],n=e.items.bindPropName;if(!(t&&t instanceof i.Collection))throw"To create a pagination a valid collection object must be used";var s={prev:function(){t.prev()},next:function(){t.next()},accPrev:function(){t.accPrev()},accNext:function(){t.accNext()},pageNum:h.computed({read:function(){this.data[n]();return t.getPageNum()},write:function(e){"string"==typeof e&&(e=parseFloat(e)),t.gotoPage(e)},owner:this}),pageSize:h.computed(function(){this.data[n]();return t.pagination.pageSize},this),hasPrev:h.computed(function(){this.data[n]();return t.hasPrev()},this),hasNext:h.computed(function(){this.data[n]();return t.hasNext()},this),totalPages:h.computed(function(){this.data[n]();return t.getTotalPagesNumber()},this),totalSize:h.computed(function(){this.data[n]();return t.pagination.maxIndex},this),pageStart:h.computed(function(){this.data[n]();return t.pagination.pageStart},this)};return s}});var g=/^\s*(\S*)\s*(\S*)?\s*$/;return f}),define("src/core/view/View",["underscore","jquery","backbone","require","src/core/model/Model","src/core/model/RESTModel","src/core/viewModel/ViewModel","src/core/viewModel/ObservableViewModel","src/core/binding/Binding","src/core/util/Utils","single!src/core/formatter/Formatter","knockout","knockout.mapping"],function(_,$,Backbone,require,Model,RESTModel,ViewModel,ObservableViewModel,Binding,Utils,Formatter,KO,KOMapping){var commonConfig={autoRender:!0,autoRefresh:!1,rootCSS:""},actionsRegex=/action\.\b/,View=Backbone.View.extend({publicMethods:["remove","getResourceBundle","setTemplate","setId","setRootCSS","addClass","removeClass","toggleClass","hasClass","setConfig","getConfig"],config:{},placeholders:{},vmKeys:{},vmKeysChangeEvents:{},_isElProvided:!1,INNER_VIEW_ID_PREFIX:"uxf_view_",_configure:function(e){var t=this._isTemplateFalse(e);t&&this._configureTemplateFromHTML(e),this.template=e.template||this.template,this.optionsMap=e.optionsMap||this.optionsMap||{},this.vmKeysChangeEvents=_.extend({},this.vmKeysChangeEvents,e.vmKeysChangeEvents),e.attributes=_.extend({},this.attributes,e.attributes||{}),Backbone.View.prototype._configure.call(this,e),e=this.options,this.vmKeys=_.extend({},this.vmKeys,e.vmKeys||{}),this._config=new Model,e.scope&&this.setConfig("scope",e.scope),this.___id=e.___id,this.___parent=e.___parent;var i=$.extend(!0,{},commonConfig,this.config,e.config||{});i.tagName||(i.tagName=this.tagName),i.id||(i.id=this.id);var n=i.className||(i.className=this.className),s=i.el||this.el;if(i.el&&delete i.el,this.setConfig(i),s&&(this.el=s,this._isElProvided=!0),this._config.on("change",function(e){this.configChanged(e._changed)},this),n&&(this.attributes["class"]=n),this._initViewModel(e),this.insertMethod=e.insertMethod||i.insertMethod,_.bindAll(this,"_getLocaleString"),this._bindEvents(),delete this.model,this.subViews=_.extend(this.subViews||{},i.subViews||e.subViews),!_.isArray(this.subViews)){var a=[];_.each(this.subViews,function(e){a.push(e)},this),this.subViews=a}this._subViews={},this.binding=new Binding},_isTemplateFalse:function(e){var t=e.el||e.config&&e.config.el;if(t&&"#comment"!==t.nodeName){"string"!=typeof t&&t instanceof jQuery||(t=$(t),e.config&&e.config.el?e.config.el=t:e.el=t);var i=t instanceof jQuery?"attr":"getAttribute",n=e.config&&e.config.template===!1;return n||(n=t[i]("data-template"),n&&"false"===n&&(n=!0)),n}},getParent:function(){return this.___parent},_initViewModel:function(e){if(this.viewModel=e.viewModel||this.viewModel,!this.viewModel)throw new Error("viewModel property is required.")},_configureTemplateFromHTML:function(e){e.config=e.config||{},e.config.insertMethod="replace",e.insertMethod="replace";var t=e.config.el?e.config.el:e.el,i=t.find("[data-uxf-secondary-template]");if(i.length>0){var n=i[0].outerHTML;e.config.viewOptions=e.config.viewOptions?e.config.viewOptions:{},e.config.viewOptions.config?e.config.viewOptions.config.template=n:e.config.viewOptions.config={template:n},t.empty()}e.config.template=e.___processUnderscore===!1||e.config.processUnderscore===!1?t[0].outerHTML:_.unescape(t[0].outerHTML)},_getVMData:function(e){var t,i=this.vmKeys[e],n=i;return i||(n=e),t=this.viewModel.observe?this.viewModel.getValueByPath(n):this.viewModel.get(n)},_setVMData:function(e,t){var i=this.vmKeys[e],n=i;i||(n=e),this.viewModel.observe?this.viewModel.setValueByPath(n,t,!0):this.viewModel.set(n,t)},delegateVmAction:function(e){var t=this.vmKeys["action."+e];t?this.viewModel.handleAction.apply(this.viewModel,_.union([t],_.rest(arguments))):this.viewModel.handleAction.apply(this.viewModel,arguments)},_getVMConfig:function(e){var t=this.vmKeys[e];return this.viewModel.getConfig(t?t:e)},_bindEvents:function(){this.getConfig("autoRefresh")&&this.viewModel.on("change",this.onChange,this),this.viewModel.on("change:config:visible",this.onVisibleChange,this),this.viewModel.on("change:config:enabled",this.onEnableChange,this);for(var e in this.vmKeysChangeEvents){var t=this.vmKeysChangeEvents[e],i=this[t];i&&_.isFunction(i)&&this.viewModel.on("change:"+this.vmKeys[e],i,this)}},constructor:function(){var e=arguments[0]||{};this._preConstructor(e),this._createOrigEvents(e),Backbone.View.apply(this,arguments),this._postConstructor(e)},_createOrigEvents:function(e){var t=e.config||{};this.origEvents=_.extend({},this.events,t.events),t.events=null,this.events=null},_preConstructor:function(){},_postConstructor:function(){this.getConfig("autoRender")&&this.render()},render:function(){return this.augmentViewModel(),this.preRender(),this._buildRoot(),this._processRbaConfig(),this.binding.bindDOM(this),this._handleSubViews(),this._applyDataBindings(),this._handleDelegateEvents(),this.enhanceMarkup(),this.postRender(),this._processTemplateViews(),this},_handleDelegateEvents:function(){this.events=_.extend({},this.origEvents,this.events),delete this.origEvents,this.delegateEvents()},addViewModel:function(e,t,i){this.viewModels=this.viewModels||[],this.viewModels.push(i)},destroy:function(e){if(this.selfDestroy(e),this.subViews)for(var t in this.subViews)this.subViews[t].viewInstance&&this.subViews[t].viewInstance.destroy(),delete this.subViews[t].viewInstance,delete this.subViews[t];if(this._subViews)for(var t in this._subViews)this._subViews[t].instance&&this._subViews[t].instance.destroy(),delete this._subViews[t].instance,delete this._subViews[t];if(this.___children){for(var t=this.___children.length-1;t>=0;t--)this.___children[t]&&(this.___children[t].destroy(),delete this.___children[t]);delete this.___children}if(this.viewModels)for(var t=this.viewModels.length-1;t>=0;t--)this.viewModels[t]&&(this.viewModels[t].off(null,null,this),delete this.viewModels[t])},selfDestroy:function(e){this.binding.unbind(),e?Backbone.Events.off.call(this.viewModel,null,null,this):this.viewModel.off(null,null,this),this.root&&this.viewModel.observe&&KO.cleanNode(this.root),this.placeholders&&(this.placeholders=null),this.remove(),this.off(),this.undelegateEvents(),this.__parent=null},delegateEvents:function(e){if(!e&&!(e=_.result(this,"events")))return Backbone.View.prototype.delegateEvents.apply(this,arguments);for(var t in e){var i=e[t];_.isFunction(i)||(/action\.\b/.test(i)?(i=i.split(".")[1],e[t]=this._augmentSingleEvent(e,t,i)):i=this[e[t]])}return Backbone.View.prototype.delegateEvents.apply(this,arguments)},_augmentSingleEvent:function(e,t,i){return function(){this.delegateVmAction(i)}},remove:function(){var e=this.$el;return this.$el=this.$root?this.$root:this.$el,Backbone.View.prototype.remove.call(this),this.$el=e,this},_buildRoot:function(){var e=this.$('>[type="template/html"]');if(!this.templateAttr){var t=this;e.each(function(e,i){var n=$(i),s=n.data("uxf-template");void 0===s||"template"===s?t.template=n.html()||t[s]:t[s]&&"function"==typeof t[s]?t[s]=_.template(n.html())||t[s]:t[s]&&"string"==typeof t[s]&&(t[s]=n.html()||t[s]),n.remove()})}this.template?this._handleTemplate():this._createRootMarkup()},_applyDataBindings:function(){var e,t,i;if(this.root&&this.viewModel.observe&&!this.getConfig("cancelBinding")){KO.cleanNode(this.root);var n=this.viewModel.options.bindingContext,s=this._createContext(n);n?KO.applyBindingsToDescendants(s,this.el):(e=this.$root.parent(),t=this.$root,i=$("<div></div>").insertBefore(t),t.detach(),KO.applyBindings(s,this.root),i.replaceWith(t)),this._cleanContextArtifacts(s)}},_handleInlineView:function(e,t,i,n){var s,a,o=this.getConfig("scope")||this.scope,r=Utils.getValueByPath(o,t.name),l=this._createVMForInlineView(i,n,t);this._connectViewModels(l),"#comment"===e.nodeName?(s=_.extend({viewModel:l},t),a=this.create(t.id,r,{viewModel:l,config:s}),KO.virtualElements.prepend(e,a.root)):(s=_.extend({el:e,viewModel:l},t),this.create(t.id,r,{el:e,viewModel:l,config:s}))},_handleInlineWidgets:function(){},_createVMForInlineView:function(e,t,i){var n=this.viewModel;if(i.initVM)var s=this.viewModel.constructor,n=new s({data:e,bindingContext:t});return n},_connectViewModels:function(e){this.viewModel.on("all",function(t,i){e.trigger(t,i)})},_createContext:function(e){var t=this._getKnockoutContext(e),i=_.bind(this._handleInlineView,this),n=_.bind(this._handleInlineWidgets,this);i.view=this,n.view=this,t.prototype=this._createContextPrototype(e);var s=new t(this.vmKeys,i,n);return s},_getKnockoutContext:function(e){var t=_.bind(this._clickHandler,this),i=_.bind(this._rbaHandler,this),n=_.bind(this.getResourceBundle,this),s=this._handleVMKeyForContext,a=this._getViewModelData(),o=(_.extend({},a,{}),{bindContext:_.extend(this.getBindContext(),{getVMData:function(e){return KO.isObservable(e)?e():e}})}),r=_.bind(Formatter.formatCurrentBindingContext,_.extend({},Formatter,o)),l=_.bind(Utils.KO.getCustomExtendedContextObservable,this),d=_.bind(function(e,t){var i=n();return i&&(e=i.getString(e,t)),(_.isUndefined(e)||_.isNull(e))&&(e=""),e},this),u=function(e){var t,i=Array.prototype.slice.call(arguments,1);return this[e]&&(t=this[e].apply(this,i)),t},h=_.bind(u,this),c=_.bind(function(){return this},this),p=function(e,a,o){this.__viewContextHandler__=c,this.__viewhandler__=a,this.__widgethandler__=o,this.__rbaHandler__=i,this.__clickhandler__=t,this.__vmKeys__=e,this.__getResourceBundle__=n,this.__getFormatter__=r,this.format=l(this.format,r),this.viewInvoke=l(this.viewInvoke,h,1),_.each(e,s,this),this.i18n=l(this.i18n,d)};return p.prototype=this._createContextPrototype(e),p},_createContextPrototype:function(e){var t,i=e,n=this.getConfig("vmPath");return e||(i=this.viewModel.get(!0)),n&&(t=this.viewModel.getValueByPath(n,!0),t.$root=i,i=t),i},_handleVMKeyForContext:function(e,t){var i,n=t.split(".");e=KO.unwrap(e),n&&n.length>1&&"data"===n[0]&&(i=Utils.getValueByPath(this,e,!0),i&&(this[n[1]]=KO.computed({read:function(){return KO.unwrap(i)},write:function(e){i(e)},deferEvaluation:!0})))},_cleanContextArtifacts:function(e){delete e.__vmKeys__},_clickHandler:function(e,t,i,n,s,a){var o;"object"==typeof e&&(o=e.args,e=e.method),"function"==typeof e?e.call(this,t,i,n,s,a,o):this[e](t,i,n,s,a,o)},_rbaHandler:function(e,t,i,n){this.placeholders=this.placeholders||{},t&&t.id&&(this.placeholders[t.id]={el:e,context:i,bindingContext:n})},_handleRBAData:function(e){_.each(e,this._loadRBAViewAndViewModel,this)},_loadRBAViewAndViewModel:function(e,t){var i=this.getConfig("rba")||{},n=this,s=i.view||"src/ui/dynamic/DynamicView",a=i.viewModel||"src/ui/dynamic/DynamicViewModel";"string"==typeof s&&"string"==typeof a?requirejs([s,a],function(i,s){n._createRBA(i,s,e,t)}):"string"==typeof s&&"function"==typeof a?requirejs([s],function(i){n._createRBA(i,a,e,t)}):"function"==typeof s&&"string"==typeof a?requirejs([a],function(i){n._createRBA(s,i,e,t)}):"function"==typeof s&&"function"==typeof a&&n._createRBA(s,a,e,t)},_createRBA:function(e,t,i,n){var s=this.getConfig("rba")||{},a=this.placeholders[n],o=this._createRBAViewModel(t,s,a,n);this._createRBAView(e,s,a,o,n),o.load(i,{})},_createRBAViewModel:function(e,t,i,n){var s=this.create(n,e,{});return s},_createRBAView:function(e,t,i,n,s){var a=_.pick(t,"configurator","builders","validators","resolvers","deps","validation","templates");a=_.isUndefined(a.configurator)?_.extend({},a):a.configurator;var o=this.getConfig("scope")||this.scope,r=this.create(s,e,{el:$(i.el),viewModel:n,config:{configurator:a,scope:o}});return r},_handleSubViews:function(){this.root&&this.subViews&&this.addSubView(this.subViews),this.trigger("subviews:added")},addSubView:function(e){if(e){if(_.isArray(e))return void _.each(e,function(e){this.addSubView(e)},this);if(this.root){var t=e.viewInstance;if(t){var i=e.insertMethod||(t._isElProvided?"replace":"append"),n=e.el;if(n){var s;(s=this.$(n)).length>0?this._insertElement(i,s,t.$el):n=null}n||this._insertSubView(t),t.enhanceMarkup(),this._subViews[t.cid]={el:n,insertMethod:i,instance:t}}else if(e.viewType||e.viewOptions)throw new Error("'viewType' + 'viewOptions' is no longer supported. Must pass 'viewInstance'")}else this.subViews.push(e)}},_handleTemplate:function(e){var t=this._createTemplateData(),i=this.getPopulatedTemplate(this.template,t);this.placeRoot(i,e?!0:!1),this._normalizeRootDomEl()},_normalizeRootDomEl:function(){this.$root.find("[data-ls-bind]").each(function(){$(this).attr("data-ls-bind",$(this).attr("data-ls-bind").replace(/\s/g,""))})},_createTemplateData:function(){return{}},getPopulatedTemplate:function(e,t,i){"string"==typeof e&&(e=_.template(e));var n=this.getTemplateData(t,i),s=e(n);return s},getTemplateData:function(e,t){_.isBoolean(e)||e instanceof ViewModel?(t=e,e={}):void 0===e&&(e={});var i=this._getViewModelData(t),n=_.extend({},i,e),s={bindContext:_.extend(this.getBindContext(),{getVMData:function(e){return Utils.getValueByPath(n,e)}})};return _.extend(n,{i18n:this._getLocaleString,format:_.bind(Formatter.formatCurrentBindingContext,_.extend({},Formatter,s))})},_getViewModelData:function(e){var t;t=_.isUndefined(e)||e===!0?this.viewModel.get():e===!1?{}:e.get();var i=this.getConfig("vmPath");i&&(t=Utils.getValueByPath(t,i));var n,s=null;for(var a in this.vmKeys)"data."==a.substring(0,5)&&(s=this.vmKeys[a],a!="data."+s&&(t[a.substring(5)]=this._getVMData(a)),null==t[s]&&null!=(n=this.getConfig(a))&&(t[s]=n));return t},_processTemplateViews:function(){if(!this.$root.data("uxf-processed")){var e=this.getConfig("scope")||this.scope,t=this.$root.data("uxf-view");t?this._processTemplateView(e,0,this.$root):this.$root.find("[data-uxf-view]").each(_.bind(this._processTemplateView,this,e))}},_processTemplateView:function(e,t,i){var n=$(i),s=n.data("uxf-processed");if(1!=s){n.attr("data-uxf-processed","true");var a=n.data("uxf-view"),o=this._getConfigForTemplateView(n),r=this._getViewModelForTemplateView(n,o,e),l=this._getVmKeysForTemplateView(n),d=this._getPath(e,a),u=n.data("uxf-view-id");u||(u=this.INNER_VIEW_ID_PREFIX+t),o.scope=$.extend({},this.scope,o.scope,this.getConfig("scope")),this.create(u,d,{config:o,viewModel:r,vmKeys:l})}},_getConfigForTemplateView:function($viewElement){var configName=$viewElement.data("uxf-config"),config;if("object"==typeof configName?config=configName:configName&&configName.indexOf("{")>=0?config=eval("("+configName+")")||{}:configName&&(config=this.getConfig(configName)),!config){var script=$viewElement.find('>[type="config/json"]');config=script&&1===script.length?eval("("+script.html()+")"):{},script.remove()}return config||(config={}),config.el=$viewElement,config},_getViewModelForTemplateView:function(e,t,i){var n,s=t.viewModel||e.data("uxf-viewmodel");return n=s&&"string"!=typeof s?t.viewModel:i&&i[s]?i[s]:s&&this.getConfig(s)&&!_.isString(this.getConfig(s))?this.getConfig(s):s&&this.getConfig(s)&&this.viewModel.getSubViewModel(this.getConfig(s))?this.viewModel.getSubViewModel(this.getConfig(s)):this.viewModel.getSubViewModel(s)?this.viewModel.getSubViewModel(s):this.viewModel},_getVmKeysForTemplateView:function($viewElement){var vmKeysStr=$viewElement.data("uxf-vmkeys"),vmKeys;return vmKeysStr&&vmKeysStr.indexOf("{")>=0&&(vmKeys=eval("("+vmKeysStr+")")||{}),vmKeys},_getPath:function(e,t){for(var i=t.split("."),n=0;n<i.length;n++)e=e[i[n]];return e},getResourceBundle:function(){var e=this.getConfig("resourceBundle")||this.viewModel.getConfig("resourceBundle");return e},_getLocaleString:function(e,t){return this.getResourceBundle().getString(e,t)},_createRootMarkup:function(){this._elInnerHtml=this.$el.html(),this.placeRoot(this._getNewRootElem()),this._elInnerHtml&&this.$root.append(this._elInnerHtml)},_getNewRootElem:function(){var e=document.createElement(this.getConfig("tagName")||"div");return e},_refresh:function(){this.root?this.template&&(this._handleTemplate("refresh"),this.binding.bindDOM(this),this._injectSubViews(),this.enhanceMarkup()):this.render()},_injectSubViews:function(){var e;for(var t in this._subViews)e=this._subViews[t],e.el?this._insertElement(e.insertMethod,this.$(e.el),e.instance.$el):this._insertSubView(e.instance)},_insertSubView:function(e){this.$root.append(e.el)},_insertElement:function(e,t,i){switch(!(t instanceof $)&&(t=$(t)),!(i instanceof $)&&(i=$(i)),e){case"append":t.append(i);break;case"prepend":t.prepend(i);break;case"replace":if(t&&t.get(0)&&this.getConfig("copyAttributes")!==!1)for(var n=_.clone(t.get(0).attributes),s=n.length,a=i.attr("class");s--;)"class"===n[s].name&&a&&!t.hasClass(a)&&(n[s].value+=" "+a),i.attr(n[s].name,n[s].value);t.replaceWith(i);break;case"html":t.html(i)}},postRender:function(){this._postRender()},_postRender:function(){},enhanceMarkup:function(){this._enhanceMarkup()},_enhanceMarkup:function(){},preRender:function(){this._preRender()},augmentViewModel:function(){},_preRender:function(){},attr:function(e,t){if(0===arguments.length)return _.clone(this.attributes);if(_.isString(e)){if(1===arguments.length)return this.attributes[e];this.attributes[e]=t,this.$root&&this.$root.attr(e,t)}else _.extend(this.attributes,e),this.$root&&this.$root.attr(e);return this},setConfig:function(e,t,i){if(this._setConfigGuard)return this;var n;return _.isObject(e)||null==e?(n=e,i=t):(n={},n[e]=t),i&&i.suppressSetters||(this._setConfigGuard=!0,n.template&&(n.template=this.setTemplate(n.template).template),n.root&&(n.root=this.setRoot(n.root).root),n.el&&(n.el=this.setElement(n.el).el),n.rootCSS&&(n.rootCSS=this.setRootCSS(n.rootCSS).rootCSS),n.id&&this.setId(n.id),this._setConfigGuard=!1),this._config.set(n,i),this},getConfig:function(e){return 0===arguments.length?this._config.toJSON():this._config.get(e)},configChanged:function(){},setTemplate:function(e){return this.template=_.isFunction(e)?e:_.template(e),this.templateAttr=!0,this.setConfig({template:this.template},{suppressSetters:!0}),this},initTemplate:function(e){var t=this.getConfig(e);t||(t=this[e]),this[e]="function"==typeof t?t:_.template(t)},replaceElement:function(e,t){var i=$(e);if(this._isElProvided&&this.$el&&this.$el.get(0)&&this.getConfig("copyAttributes")!==!1)for(var n=_.clone(this.$el.get(0).attributes),s=n.length,a=i.attr("class");s--;)"class"===n[s].name&&a&&!this.$el.hasClass(a)&&(n[s].value+=" "+a),i.attr(n[s].name,n[s].value);return this._replaceElWithElement(e,t,i)},_replaceElWithElement:function(e,t,i){return this.$el.replaceWith(i),this.setElement(e,t)},setElement:function(){return Backbone.View.prototype.setElement.apply(this,arguments),this.setConfig({el:void 0},{suppressSetters:!0,silent:!0}),this.setConfig({el:this.el},{suppressSetters:!0}),this},placeRoot:function(e,t,i){return this[t===!0?"replaceRoot":"setRoot"](e,i),!t&&this._handleRootRelation(),this},replaceRoot:function(e,t){return e=$(e),this._isElProvided?this.$root.replaceWith(e):this.replaceElement(e),this.setRoot(e,t)},setRoot:function(e,t){var i=t===!1?!1:this.attr(),n=this.getConfig("id"),s=this.getConfig("rootCSS");return e=this._enhanceRootMarkup(e),"string"==typeof e&&(e=e.replace(/(\r\n|\n|\r)/gm,"")),this.$root=$(e),i&&this.$root.attr(i),i&&s&&this.$root.addClass(s),i&&n&&this.$root.attr({id:n}),this.root=this.$root[0],this._checkVisible(),this._checkEnable(),this.setConfig({root:this.root},{suppressSetters:!0}),this},_enhanceRootMarkup:function(e){return e},_handleRootRelation:function(){this._isElProvided&&"replace"!=this.insertMethod?this._insertElement(this.insertMethod||"append",this.$el,this.$root):this.replaceElement(this.root)},_checkVisible:function(){this.viewModel.getConfig("visible")===!1&&this.$root.hide()},_checkEnable:function(){this.viewModel.getConfig("enabled")===!1&&this.onEnableChange({value:!1})},setRootCSS:function(e){return this.$root&&(this.$root.removeClass(this.rootCSS),this.$root.addClass(e)),this.rootCSS=e,this.rootCSSPattern=new RegExp("\\b"+e+"\\b"),this.setConfig({rootCSS:e},{suppressSetters:!0}),this},setId:function(e){var t={id:e};return this.$root&&this.$root.attr(t),this.setConfig(t,{suppressSetters:!0}),this},addClass:function(e){return this.$root&&this.$root.addClass(e),this},removeClass:function(e){return e=e.replace(this.rootCSSPattern,""),this.$root&&this.$root.removeClass(e),this},toggleClass:function(e){return e=e.replace(this.rootCSSPattern,""),this.$root.toggleClass(e),this},hasClass:function(e){return this.$root.hasClass(e)},onChange:function(){this._refresh()},onVisibleChange:function(e){this.$root&&(e.value===!0?this.$root.show():this.$root.hide())},onEnableChange:function(){},processRbaData:function(e,t){t=_.defaults({},t,this.options&&this.options.config&&this.options.config.rbaContext);var i=this.$root.find("[data-uxf-rba]");i.length>0?_.each(e,function(e,i){var n={},s={},a=[],o=e.viewID||"src/core/view/View";s.view=this._getObject(o,t),s.view||a.push(o),n.viewConfig=this._getObject("refs."+i+".viewConfig",t);var r=e.viewModelID||"src/core/viewModel/ViewModel";n.viewModel=this._getObject("refs."+i+".viewModel",t),n.viewModel||(s.viewModel=this._getObject(r,t),s.viewModel||a.push(r)),n.vmData=this._getObject("refs."+i+".vmData",t);var l=e.modelID||"src/core/model/Model";n.model=this._getObject("refs."+i+".model",t),n.model||(s.model=this._getObject(l,t),s.model||a.push(l));var d=e.templateID;n.template=this._getObject("refs."+i+".template",t),!n.template&&d&&a.push("text!"+d),this._processRba(e,i,a,s,n,t)},this):_.isEmpty(this.placeholders)||this._handleRBAData(e)},_processRba:function(e,t,i,n,s,a){var o=this;o.___children||(o.___children=[]),require(i,function(){var i=0,r=n.view?n.view:arguments[i++],l=n.viewModel||s.viewModel?n.viewModel:arguments[i++],d=n.model||s.model?n.model:arguments[i++],u=s.template||arguments[i++],h=s.model?s.model:new d(e.modelData,e.modelConfig),c={data:s.vmData||e.vmData,config:e.vmConfig,models:{}};c.models[e.vmModelName||"model"]=h,_.extend(c,e.vmOptions,a[t]?a[t].vmOptions:null);var p=s.viewModel?s.viewModel:new l(c),f=a&&a.el?$(a.el):o.$el,g=f.attr("data-uxf-rba")==t?f:f.find('[data-uxf-rba="'+t+'"]');if(g&&g.length){var m=_.extend({el:g,insertMethod:"append",autoRender:!0},e.viewConfig,s.viewConfig?s.viewConfig:{},u?{template:u}:{}),v=_.extend({config:m,viewModel:p},e.viewAttributes?{attributes:e.viewAttributes}:{},e.viewVmKeys?{vmKeys:e.viewVmKeys}:{},e.viewOptions,a[t]?a[t].viewOptions:null),b=new r(v);o.___children.push(b)}})},processRbaUrl:function(e,t){var i=new RESTModel(null,{url:e}),n=this;return i.fetch({success:function(e,i){n.processRbaData(e.toJSON(),t),t&&t.callback&&t.callback(i),n.trigger("rba:loaded")}})},_processRbaConfig:function(){this.options&&this.options.config&&(this.options.config.rbaUrl?this.processRbaUrl(this.options.config.rbaUrl):this.options.config.rbaData&&this.processRbaData(this.options.config.rbaData))},_getObject:function(e,t){if(e&&t){var i=e.split(".");return _.reduce(i,function(e,t){return e?e[t]:void 0},t)}},getBindContext:function(){return _.extend(_getBindContext(this),this.getConfig("bindContext")||{})},switchClass:function(e,t,i){var n=this.$root;n.off("transitionend"),n.one("transitionend",function(){_.isFunction(i)&&i()});var s=_getElementStyles(n[0]);n.removeClass(t).addClass(e);var a=n.css("transition-delay");return a=1e3*parseFloat(a),setTimeout(function(){var e=_getElementStyles(n[0]);$.isEmptyObject(_styleDifference(s,e))&&n.trigger("transitionend")},a+100),this},getGroupId:function(e){var t=this.options&&this.options.vmGroupId||"";return _.isString(t)?t+".":t.hasOwnProperty(e.moduleID)?t[e.moduleID]+".":null}});_.extend(View.prototype,Utils.Factory,Utils.Common);var _getBindContext=function(e){var t={getVMData:_.bind(e._getVMData,e),getResourceBundle:_.bind(e.getResourceBundle,e)};return t},_getElementStyles=function(e){var t,i,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,s={};
if(n&&n.length&&n[0]&&n[n[0]])for(i=n.length;i--;)t=n[i],"string"==typeof n[t]&&(s[$.camelCase(t)]=n[t]);return s},_styleDifference=function(e,t){var i,n,s={},a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1,transitionDuration:1,WebkitTransitionDuration:1,oTransitionDuration:1};for(i in t)n=t[i],e[i]!==n&&(a[i]||($.fx.step[i]||!isNaN(parseFloat(n)))&&(s[i]=n));return s};return View.extend=Utils.extend,View.mergeProperties={scope:"merge",publicMethods:"merge",config:"merge",vmKeys:"merge",vmKeysChangeEvents:"merge"},View.getViewActions=function(){return this.prototype.publicMethods},View}),define("src/core/application/Application",["backbone","src/core/util/Utils","src/core/util/StorageUtil"],function(e,t,i){"use srtict";var n=e.View.extend({constructor:function(t){this.areaCode=t.id||"lsapp",this.context=i.get(this.areaCode)||{},e.View.apply(this,arguments)},navigate:function(e,t){i.set(this.areaCode,this.context),this.options.router.navigate(e,t)},destroy:function(){},create:t.create});return n.extend=t.extend,n}),define("src/core/application/WidgetInternalFlow",["jquery","underscore","src/core/view/View","src/core/util/Utils"],function(e,t,i,n){var s={ARGUMENTS:{MISSING:{VIEW_ROUTES:"You must initialize the class with a viewRoutes array.",WIDGET:"You must initialize the class with a widget object.",ID:"Each viewRoute must have an id defined.",UXF_POINT:"Each viewRoute must have a reference to a DOM elment using uxfPoint or el.",METHOD:"Incorrect method assignment. Please check your configuration"},DUPLICATE:{UXF_POINT:"Multiple el definition. Use uxfPoint or el not both.",ID:"You have created duplicate keys with the same amount. Please check id : ",DEFAULT:"Only 1 viewRoute per placeholder is allowed to be the default viewRoute.",NONE_DEFAULT:"All viewRoutes for a single placeholder are defiend as false. Please set one of them as true or as undefined."}},RELATION:{PLACEHOLDER:"Each placeholder must have a viewRoutes related to it.",DOM:"Requesting to show a view that is not attached to any DOM element."}},a=function(){var e=document.createElement("p").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e},o=function(e){var t=e.split("/:"),i=t.shift();return{key:i,params:t}},r=function(i,n){return e.extend({_digestHelper:e.extend(n,{paramsLength:n.params.length})},i,{toViewRoute:function(){var e=t.clone(this),i=t.reduce(this,function(e,i,n){return t.isFunction(i)&&e.push(n),e},[]);i.push("_digestHelper");var n=e._digestHelper.dynamicParamsValue,s=t.omit(e,i),a=e._digestHelper.params;return s.params=s.params||{},t.each(a,function(e,t){s.params[e]=n?n[t]:void 0}),s},setDynamicParamsValue:function(e){this._digestHelper.dynamicParamsValue=e}})},l=function(t){this.options=t||{},this.config=e.extend({},{viewRoutesKeySplitter:"#!"},t.config),this.initialize.apply(this,arguments)};return t.extend(l,{extend:n.extend,mergeProperties:{config:"merge"}}),t.extend(l.prototype,Backbone.Events,{initialize:function(){this._checkReceivedData(),this._digestViewRoute(),this._checkViewRoutesConfig()},_checkReceivedData:function(){if(this.viewRoutes=this.options.viewRoutes,this.myWidget=this.options.widget,!t.isArray(this.viewRoutes))throw s.ARGUMENTS.MISSING.VIEW_ROUTES;if(t.isUndefined(this.myWidget))throw s.ARGUMENTS.MISSING.WIDGET;t.isUndefined(this._digestViewRouteHash)&&(this._digestViewRouteHash={}),t.isUndefined(this._viewRouteHistory)&&(this._viewRouteHistory=new n.HistoryStack)},_digestViewRoute:function(){for(var e=0;e<this.viewRoutes.length;e++){var i=this.viewRoutes[e];if(t.isUndefined(i.id))throw s.ARGUMENTS.MISSING.ID;if(t.isUndefined(i.uxfPoint)&&t.isUndefined(i.el))throw s.ARGUMENTS.MISSING.UXF_POINT;if(!t.isUndefined(i.uxfPoint)&&!t.isUndefined(i.el))throw s.ARGUMENTS.MISSING.DUPLICATE.UXF_POINT;i.el=i.el||'[data-uxf-point="'+i.uxfPoint+'"]';var n=new o(i.id);if(this._digestViewRouteHash.hasOwnProperty(n.key)){if(this._getDigestViewRoute(n))throw s.ARGUMENTS.MISSING.DUPLICATE.ID+i.id}else this._digestViewRouteHash[n.key]=[];var a=new r(i,n);this._digestViewRouteHash[n.key].push(a)}},_checkViewRoutesConfig:function(){var e=this._getPlaceholdersHash();return t.each(e,function(e){var i=this._getDefaultDigestViewRoute(e);if(t.isUndefined(i))throw s.RELATION.PLACEHOLDER},this),!0},_getDefaultDigestViewRoute:function(e){if(0===e.length)throw s.RELATION.PLACEHOLDER;var i=t.where(e,{isDefault:!0});if(i.length>1)throw s.ARGUMENTS.DUPLICATE.DEFAULT;if(0===i.length&&(i=t.where(e,{isDefault:void 0}),0===i.length))throw s.ARGUMENTS.DUPLICATE.NONE_DEFAULT;return i[0]},_getDigestViewRoute:function(e){var i=function(t){return t._digestHelper.paramsLength===e.params.length};return t.find(this._digestViewRouteHash[e.key],i)},_getDigestViewRoutesByKey:function(e){t.isString(e)&&(e=e.split(this.config.viewRoutesKeySplitter));var i=[];return t.each(e,function(e){var t=new o(e),n=this._getDigestViewRoute(t);n&&(n.setDynamicParamsValue(t.params),i.push(n))},this),i},_loadDigestViewRoute:function(e,i,n){t.isArray(e)||(e=[e]),t.each(e,function(e){this._loadSingleDigestViewRoute(e,i,n)},this),this.trigger("change:viewRoute",e)},_loadSingleDigestViewRoute:function(e,i,n){if(!t.isUndefined(e)){var a=e.toViewRoute();if(t.isString(a.method)){var o=this.myWidget[a.method]||this.myWidget.options[a.method];if(!t.isFunction(o))throw s.ARGUMENTS.MISSING.METHOD;o.call(this,a)}else this._loadViewRoute(a,i);t.isFunction(n)&&n(e)}},_getPlaceholderDomUniqueName:function(e){var i=e.attr("data-uxf-point");return t.isUndefined(i)&&(i=e.attr("id")),i},_getPlaceholdersHash:function(){var e={};return t.each(this._digestViewRouteHash,function(i){t.each(i,function(i){var n=this.myWidget.$el.find(i.el),s=this._getPlaceholderDomUniqueName(n);t.isUndefined(e[s])&&(e[s]=[]),e[s].push(i)},this)},this),e},_addNoneCalledPlaceHoldersDefaultDigestViewRoutes:function(e){var i=this._getPlaceholdersHash(),n=function(i){return t.find(e,function(e){return e===i})};return t.each(i,function(i){t.find(i,n)||e.push(this._getDefaultDigestViewRoute(i))},this),e},_buildAnimationConfig:function(t){var i={time:1e3,enterClassName:"uxf-state-enter",exitClassName:"uxf-state-exit",refreshClassName:"uxf-state-refresh",displayClassName:"uxf-state-display",async:!0};return e.extend({},i,t)},_buildViewRoutesConfig:function(e){if(this._viewRouteCache||(this._viewRouteCache={}),this._placeholderViews||(this._placeholderViews={}),t.isUndefined(e.id)&&(e.id=t.uniqueId(this.cid)),t.isUndefined(e.el))throw s.RELATION.PLACEHOLDER;return e.hasOwnProperty("cached")||(e.cached=!1),e.hasOwnProperty("history")||(e.history=!0),e.animationConfig=this._buildAnimationConfig(e.animationConfig),e},_createView:function(e,t){var i=this.myWidget.create(e.viewId||e.id,t,{viewModel:t.prototype.viewModel||this.myWidget.viewModel,cached:e.cached,history:e.history,animationConfig:e.animationConfig,el:this.myWidget.$el.find(e.el),viewRouteKey:e.id,routesParams:e.params});return i},_loadViewRoute:function(e,i){t.isUndefined(i)&&(i=!1),this._buildViewRoutesConfig(e);var n=this;requirejs([e.path],function(s){var a=n._viewRouteCache[e.id];(t.isUndefined(a)||!a.options.cached||i)&&(a=n._createView(e,s)),n._showView(a)})},_showView:function(e){var i=e.options.animationConfig;if(0===e.$el.length)throw s.RELATION.DOM;var n=this._getPlaceholderDomUniqueName(e.$el),a=this._placeholderViews[n],o=this;a===e?this._showDisplayedView(e,i):(a&&!a.options.cached&&delete this._viewRouteCache[a.options.viewRouteKey],this._viewRouteCache[e.options.viewRouteKey]=e,this._placeholderViews[n]=e,a?i.async?(this._exitAnimation(a,i,function(){!a.options.cached&&t.isFunction(a.destroy)&&a.destroy()}),this._enterAnimation(e,i)):this._exitAnimation(a,i,function(){!a.options.cached&&t.isFunction(a.destroy)&&a.destroy(),o._enterAnimation(e,i)}):this._enterAnimation(e,i))},_showDisplayedView:function(e,i){t.isFunction(e.refresh)&&e.refresh(),this._enterAnimation(e,i,!0)},_enterAnimation:function(e,t,i,n){if(!e)return void(n&&n());var s=this,o=function(){e.removeClass(t.enterClassName).removeClass(t.refreshClassName).addClass(t.displayClassName),e.trigger("change:visible",{value:!0}),n&&n.call(s,e)};a()?i?e.switchClass(t.refreshClassName,[t.enterClassName,t.exitClassName].join(" "),o):e.switchClass(t.enterClassName,[t.refreshClassName,t.exitClassName,t.displayClassName].join(" "),o):(e.removeClass(t.enterClassName).removeClass(t.exitClassName),i?e.addClass(t.refreshClassName,t.time,o):e.addClass(t.enterClassName,t.time,o))},_exitAnimation:function(e,t,i){var n=this;if(!e)return void(i&&i.call(n));var s=function(){e.trigger("change:visible",{value:!1}),i&&i.call(n,e),e.removeClass(t.exitClassName)};a()?e.switchClass(t.exitClassName,[t.enterClassName,t.refreshClassName,t.displayClassName].join(" "),s):(e.removeClass(t.enterClassName).removeClass(t.refreshClassName).removeClass(t.displayClassName),e.addClass(t.exitClassName,t.time,s))},load:function(e,t){var i=this._getDigestViewRoutesByKey(e),n=this;this._loadDigestViewRoute(i,t,function(e){n._viewRouteHistory.push(e)})},navigate:function(e,t){var i=this._getDigestViewRoutesByKey(e);i=this._addNoneCalledPlaceHoldersDefaultDigestViewRoutes(i),this._loadDigestViewRoute(i,t),this._viewRouteHistory.push(i)},prev:function(){var e=this._viewRouteHistory.prev();this._loadDigestViewRoute(e,!1)},next:function(){var e=this._viewRouteHistory.next();this._loadDigestViewRoute(e,!1)}}),l}),define("src/core/application/BusinessWidget",["jquery","underscore","src/core/view/View","src/core/util/Utils","knockout","src/core/application/WidgetInternalFlow"],function(e,t,i,n,s,a){var o=function(){return"function"==typeof this.viewModel?this.create("rootViewModel",this.viewModel,{}):this.viewModel},r=i.extend({isBusinessWidget:!0,getMetaData:function(){return metaData},actionMap:{},_configure:function(e){this.contentData=e.contentData,this.viewModel=o.call(this),this.executionContext=e.executionContext||{},this._super(e)},render:function(){return this._super(),this._initInnerFlowArtifacts(),this._processRules(),this},_initInnerFlowArtifacts:function(){var i=this.options.viewRoutes||this.viewRoutes;if(!t.isUndefined(i)){this._internalFlow=new a(e.extend(this.options,{widget:this}));var n=this;this._internalFlow.on("change:viewRoute",function(e){n.trigger("change:viewRoute",e)})}},loadMode:function(e){var t=this.modes[e];this._mode!==e&&t&&"function"==typeof this[t]&&(this._mode=e,this[t]())},viewRoutesLoad:function(e,t){this._internalFlow.load(e,t)},viewRoutesNavigate:function(e,t){this._internalFlow.navigate(e,t)},viewRoutesPrev:function(){this._internalFlow.prev()},viewRoutesNext:function(){this._internalFlow.next()},_processRules:function(){var e=this.rules,t=requirejs.appContext;if(e&&t)for(var i=this,n=0,a=e.length;a>n;n++)s.computed(function(){var e=s.computedContext.isInitial(),n=i[this.evaluator](t,e);n&&i.trigger("outcome:"+this.outcome)},e[n])},getFromContext:function(e,t,i){var n;return this.executionContext&&this.executionContext.getModule&&e&&(n=this.executionContext.getModule(e)),!n&&t&&(n=this.create(e,t,i)),n},_handleInlineWidgets:function(e,i){var n,a,o,r;if(t.has(i,"path")&&t.has(i,"name"))n=requirejs(i.path),a=i.id||i.name;else{if(!t.has(i,"name"))throw new Error("Incorrect widget binding parameters: must inlcude either name or path AND name.");o=this.getConfig("scope")||this.scope,n=o[i.name],a=i.id||i.name}if("#comment"===e.nodeName){var r=this.create(a,n,{el:e,config:i});s.virtualElements.prepend(e,r.root)}else this.create(a,n,{el:e,config:i})}});return r}),define("src/core/hub/HubBaseTopic",["underscore","backbone","src/core/util/Utils","src/core/viewModel/ViewModel"],function(e,t,i,n){var s=n.extend({WRITE_ONLY:"pub",READ_ONLY:"sub",READ_WRITE:"pubsub",CHANGE_ACTION_NAME:"$change",SUBSCRIBE_ACTION_NAME:"$subscribe",initialize:function(e){this.options=e||{},this.mode=this.options.mode||this.mode||this.READ_WRITE,this.vmKeys=this.options.vmKeys},isWriteOnly:function(){return this.mode===this.WRITE_ONLY},isReadOnly:function(){return this.mode===this.READ_ONLY},destroy:function(){this.off()},unsubscribe:function(e,t){this.off(null,e,t)},publish:function(){},subscribe:function(){}});return s}),define("src/core/hub/HubTopic",["src/core/hub/HubBaseTopic","src/core/util/Utils"],function(e,t){var i={setViewModel:function(e){this.subViewModels=this.subViewModels||{},this.subViewModels.viewModel||(this.subViewModels.viewModel=e,i.createDataBindings.call(this),this._bindData())},generateTopicData:function(e,i){var n=t.clone(_.omit(this.get(),"subViewModels")),s={action:i,data:n};return i===this.SUBSCRIBE_ACTION_NAME?(s.changedAttributes=n,s.prevAttributes={},s.changedAttributes={}):i===this.CHANGE_ACTION_NAME&&(s.changedAttributes=t.clone(e.changed),s.prevAttributes=t.clone(_.omit(e.target.data.previousAttributes(),"subViewModels"))),s},parsePath:function(e){var t=e.indexOf(":")>-1;if(!t)return e;var i=e.split(":"),n=i[0].split("."),s=i[1];return"subViewModels."+n.join(".subViewModels.")+"."+s},createDataBindings:function(){this.dataBindings=[];var e,t={options:{twoWay:!this.isReadOnly()}};_.isUndefined(this.vmKeys)?_.each(_.keys(this.subViewModels.viewModel.get()),function(e){dataBinding={options:{twoWay:!this.isReadOnly()}},dataBinding[e]="subViewModels.viewModel."+e,this.dataBindings.push(dataBinding)},this):_.each(_.keys(this.vmKeys),function(n){if(0===n.indexOf("data.")){e=n.substring(5);var s=_.extend({},t);_.isString(this.vmKeys[n])?s[e]="subViewModels.viewModel."+i.parsePath.apply(this,[this.vmKeys[n]]):_.isObject(this.vmKeys[n])&&(s[e]=["subViewModels.viewModel.subViewModels",this.vmKeys[n].vm,this.vmKeys[n].key].join(".")),this.dataBindings.push(s)}},this)},getVmAction:function(e){return this.vmKeys?this.vmKeys["action."+e]:e},getTopicActions:function(){var e="action.",t=[];return _.each(_.keys(this.vmKeys||[]),function(i){0===i.indexOf(e)&&t.push(i.substring(e.length))}),t}},n=e.extend({viewModel:void 0,initialize:function(e){this._super(e),this.vmId=this.options.vmId,this.on("change",function(e){this.trigger("__change",i.generateTopicData.apply(this,[e,this.CHANGE_ACTION_NAME]))},this)},subscribe:function(e){requirejs([this.vmId],_.bind(function(t){var n;if(i.setViewModel.apply(this,[t]),(_.indexOf(e.actions,"change")>-1||!e.actions)&&this.on("__change",e.handler,e.context),this.vmKeys){n=e.actions?_.intersection(i.getTopicActions.call(this),e.actions):i.getTopicActions.call(this);var s;_.each(n,function(t){s=i.getVmAction.call(this,[t]),this.subViewModels.viewModel.on("action:"+s,function(e){var n=(_.omit(this.get(),"subViewModels"),i.generateTopicData.apply(this,[{},t]));n.args=e,this.trigger("__action:"+t,n)},this),this.on("__action:"+t,e.handler,e.context)},this)}if(!e.silent){{_.omit(this.get(),"subViewModels")}_.bind(e.handler,e.context)(i.generateTopicData.apply(this,[{},this.SUBSCRIBE_ACTION_NAME]))}},this))},publish:function(e,t){requirejs([this.vmId],_.bind(function(n){if(i.setViewModel.apply(this,[n]),e=_.pick(e,_.keys(this.get())),this.set(e),t){var s=i.getVmAction.apply(this,[t]);s&&this.subViewModels.viewModel.handleAction(s)}},this))},destroy:function(){this._super(),this.viewModel&&this.viewModel.off(null,null,this)}});return n}),define("src/core/hub/SecurityTopic",["src/core/hub/HubBaseTopic","src/core/dataSource/LSRESTDataSource"],function(e,t){var i=e.extend({TOKEN_UPDATED_EVENT:"tokenUpdated",TOKEN_TIMEOUT_EVENT:"tokenTimeout",initialize:function(e){this._super(e),t.on(t.TOKEN_UPDATE_EVENT,function(e){this.trigger(this.TOKEN_UPDATED_EVENT,{token:e.token})},this),t.on(t.ERROR,function(e){e.type=t.TOKEN_INVALID,this.trigger("error",e)},this)},subscribe:function(e){this.on(this.TOKEN_UPDATED_EVENT,e.handler,e.context)},publish:function(e){var i=_.isUndefined(e.persist)?!0:e.persist;t.prototype.setToken(e.token,i)}});return i}),define("src/core/hub/ErrorTopic",["src/core/hub/HubBaseTopic"],function(e){var t=e.extend({publish:function(e){this.trigger("error",e)},subscribe:function(e){this.on("error",e.handler,e.context)}});return _.extend(t,{UNREGISTERED_TOPIC:"unregistered",REGISTERED_TOPIC:"registered",UNKONWN_PAYLOAD:"unkownPayload",INVALID_PAYLOAD:"invalidPayload",READ_ONLY_TOPIC:"readOnly",WRITE_ONLY_TOPIC:"writeOnly"}),t}),define("src/core/hub/BusinessWidgetHub",["underscore","backbone","src/core/hub/HubTopic","src/core/hub/SecurityTopic","src/core/hub/ErrorTopic"],function(e,t,i,n,s){var a=function(){this._initialize()};e.extend(a.prototype,{_topics:{},_initialize:function(){this._setTopic("error",new s),this._setTopic("security",new n);var e=this._getTopic("security");e.on("error",function(e){this.publish("error",e)},this)},_getTopic:function(e){return this._topics[e]},_setTopic:function(e,t){this._topics[e]=t},_removeTopic:function(e){var t=this._getTopic(e);t.destroy(),delete this._topics[e]},isTopicReadOnly:function(e){if(!this.isRegistered(e))return void 0;var t=this._getTopic(e);return t.isReadOnly()},isTopicWriteOnly:function(e){if(!this.isRegistered(e))return void 0;var t=this._getTopic(e);return t.isWriteOnly()},isRegistered:function(t){return!e.isUndefined(this._getTopic(t))},register:function(t,n){e.isArray(t)?e.each(t,function(e){this.register(e.name,e)},this):this.isRegistered(t)?this.publish("error",{type:s.REGISTERED_TOPIC,topicName:t}):this._setTopic(t,new i({mode:n.mode,vmId:n.vmId,vmKeys:n.vmKeys}))},unregister:function(t){if(e.isArray(t))for(var i=0;i<t.length;i++)this.unregister(t[i]);else this.isRegistered(t)&&this._removeTopic(t)},subscribe:function(e,t){if(this.isRegistered(e)){var i=this._getTopic(e);i.isWriteOnly()?this.publish("error",{type:s.WRITE_ONLY_TOPIC,topicName:e}):i.subscribe({handler:t.handler,context:t.context,actions:t.actions,silent:t.silent})}else this.publish("error",{type:s.UNREGISTERED_TOPIC,topicName:e})},unsubscribe:function(e,t){if(!this.isRegistered(e))return void this.publish("error",{type:s.UNREGISTERED_TOPIC,topicName:e});var i=t.context||null,n=t.handler||null,a=this._getTopic(e);a.unsubscribe(n,i)},publish:function(e,t,i){if(this.isRegistered(e)){var n=this._getTopic(e);n.isReadOnly()?this.publish("error",{type:s.READ_ONLY_TOPIC,topicName:e}):n.publish(t,i)}else this.publish("error",{type:s.UNREGISTERED_TOPIC,topicName:e})},bindTopics:function(t,i,n){var a=!1;if(e.each([t,i],function(e){this.isRegistered(e)||(this.publish("error",{type:s.UNREGISTERED_TOPIC,topicName:e}),a=!0)},this),!a){{this._getTopic(t),this._getTopic(i)}n&&n.bindings&&(this.subscribe(t,{handler:function(e){var t=e.changedAttributes,s=n.aToB?n.aToB:o;this.publish(i,s(t,n.bindings))},actions:["change"],silent:!0,context:this}),this.subscribe(i,{handler:function(i){var s=i.changedAttributes,a=n.bToA?n.bToA:o;this.publish(t,a(s,e.invert(n.bindings)))},actions:["change"],silent:!0,context:this}))}},reset:function(){e.each(e.keys(this._topics),function(e){this._removeTopic(e)},this),this._initialize()}},t.Events);var o=function(e,t){var i={};for(var n in e)t[n]&&(i[t[n]]=e[n]);return i};return new a}),define("src/core/controller/RulesAggregator",["underscore","src/core/util/Utils"],function(){var e=function(){return{}};return e}),define("src/core/controller/RulesExecutor",["underscore","src/core/util/Utils","src/core/controller/RulesAggregator"],function(e,t,i){var n=function(t){var n=[];if(t.rulesAggregators)for(var s=0;s<t.rulesAggregators.length;s++)n.push(new t.rulesAggregators[s](t));else n=[new i(t)];this.rulesAggregators=n,this.execute=function(t,i){var n,s=t;if(t.rules&&(n=t.rules,n&&n.length>0))for(var a=0;a<n.length;a++){var o=this._evaluateRule(n[a],t,i);if("string"==typeof o)s={target:o};else if("object"==typeof o)s=o;else{if(o&&n[a].target){s=n[a];break}o!==!1||e.isUndefined(n[a].onFalse)||(s=""===n[a].onFalse?{}:{target:n[a].onFalse})}}return s},this._evaluateRule=function(e,t,i){var n,s;if(e.condition)n=this._evaluateRuleCondition(e.condition);else if(e.conditionFunction)for(var a=0;a<this.rulesAggregators.length;a++)if(s=this.rulesAggregators[a],s[e.conditionFunction]){n=s[e.conditionFunction](t,i);break}return n},this._evaluateRuleCondition=function(e){return e}};return n}),define("src/core/controller/FlowManager",["jquery","underscore","backbone","src/core/util/Utils","src/core/util/StorageUtil","src/core/controller/RulesExecutor","src/core/viewModel/ViewModel","src/core/dataSource/LocalStorageDataSource","src/core/model/Model"],function(e,t,i,n,s,a,o,r,l){var d=function(i){return{FLOW_NAMESPACE:"_flow",FLOW_CONFIG:/(.*?)(\[)(.*?)(\])(.*)/,MATCH_PATTERN:3,REPLACE_PATTERN:"$3",FLOW_MANAGER_ID:"flowmanager",vm:new o,router:i.router,options:i,targetAttribute:i.targetAttribute||"url",resetFlows:function(){this.flowsMap=null,this.flowPathConfig=null,this.currentPosition=null},registerFlow:function(e){e.targetAttribute||this.targetAttribute;this._createFlowsMap(e),this._initFlowState(e),this._createRouteObject(e)},_createFlowsMap:function(e){var t;this.flowsMap=this.flowsMap||{},this.flowsMap[e.id]=this.flowsMap[e.id]||{};for(var i=0;i<e.steps.length;i++)t=e.steps[i],this.flowsMap[e.id]=e,this.flowsMap[e.id].stepsMap=this.flowsMap[e.id].stepsMap||{},this.flowsMap[e.id].stepsMap[t.id]=t},_initFlowState:function(e){var t,i="start",n=this.flowsMap[e.id];for(this.flowPathConfig=this.flowPathConfig||{},this.flowPathConfig[e.id]=this.flowPathConfig[e.id]||{},this.flowPathConfig[e.id].steps=this.flowPathConfig[e.id].steps||[];;){if(t=n.actions[i],i="next",!t)break;"string"==typeof t?n=this.flowsMap[e.id].stepsMap[t]:"object"==typeof t&&(n=this.flowsMap[e.id].stepsMap[t.target]),this.flowPathConfig[e.id].steps.push(n)}},_createRouteObject:function(t){var i;if(e.mobile){var i;t.external&&(i={handler:function(e,t){return function(i,n,s,a){n.path=t.flowsMap[e.id].stepsMap[a][t.flowsMap[e.id].targetAttribute]}}(t,this)},this.router.registerSingleRoute(t.id+this.flowsMap[t.id].separator+":step",i,this.router.options))}else t.external&&(i={handler:function(t,i){return function(n,s,a,o){s.path=i.flowsMap[t.id].stepsMap[o][i.flowsMap[t.id].targetAttribute],a.queryParams&&(e.mobile?s.path="?"+a.queryParams+s.path:s.path+="?"+a.queryParams)}}(t,this)},this.router.registerSingleRoute(t.id+"/:step",i,this.router.options))},_gotoStep:function(t,i,n){var s,a,o;o=e.mobile?"_":"/";var r=this._getPosition();(i||r)&&(a={queryParams:"["+t.flowID+"/"+t.targetID+"]",fragment:t.fragment}),t.type?"navigate"===t.type?i&&t.start!==!1?this.router.navigate(t.flowID+o+t.targetID,a):(this.resetFlowData(),this.router.navigate(t.targetID,a)):"load"===t.type?t.context.load(t.targetID,{requested:!0}):t.context.load("["+t.flowID+"/"+t.targetID+"]",{requested:!0}):(s=this.flowsMap[t.flowID],s&&!s.external?t.context.load("["+t.flowID+"/"+t.targetID+"]",{requested:!0,replace:n}):this.router.navigate(t.flowID+o+t.targetID,a)),e.mobile&&(t.cleanupStep||this._setPosition(t)),this.flowPathConfig&&this.flowPathConfig[t.flowID]&&(this.flowPathConfig[t.flowID].currentPosition=t)},_removeParameter:function(e,t){var i=e.split("?");if(i.length>=2){for(var n=i.shift(),s=i.join("?"),a=encodeURIComponent(t)+"=",o=s.split(/[&;]/g),r=o.length;r-->0;)-1!==o[r].lastIndexOf(a,0)&&o.splice(r,1);e=n+"?"+o.join("&")}return e},_startFlow:function(e,t){this._gotoStep(e,!0,t)},executeAction:function(e,i,n,s){var a,r,l;if(t.isUndefined(s)||(l=s.viewModel,r=s.replace),this.vm=l||this.vm||new o,e){if(a=this._decideAction(e,i,s),!a||t.isUndefined(a.targetID))return;a.context=n,this[a.action].call(this,a,r),this.vm.trigger("flow:"+a.event,a,this.flowPathConfig)}},_decideAction:function(t,i,n){var s,a,o,r,l,d={};if(r=this._getPosition()){var u,a=this.flowsMap[r.flowID].stepsMap[r.targetID];a.actions&&a.actions[t]?u=a.actions[t]:this.flowsMap[r.flowID].actions&&this.flowsMap[r.flowID].actions[t]&&(u=this.flowsMap[r.flowID].actions[t]),o=this.flowsMap[r.flowID]}else{if(!i)return;a=this.flowsMap[i].stepsMap[t],o=this.flowsMap[i]}switch(t){case"next":d.event="next",d.action="_gotoStep",s=this._decideRealTarget(u,o),d.targetID=s.target,d.type=s.type,d.flowID=r.flowID;break;case"prev":d.event="prev",d.action="_gotoStep",s=this._decideRealTarget(u,o),d.targetID=s.target,d.type=s.type,d.flowID=r.flowID;break;case"start":n&&(l=n.step),d.event="start",d.action="_startFlow",d.flowID=i,this.flowsMap[d.flowID].actions&&(u=l||this.flowsMap[d.flowID].actions[t]),s=this._decideRealTarget(u,o),d.targetID=s.target,d.type=s.type,d.start=s.start,d.reset=s.reset,d.targetID||(d.targetID=this.flowsMap[d.flowID].steps[0].id),this.resetFlowData(d.reset);break;case"goto":d.event="goto",d.action="_gotoStep",o.actions&&o.actions["goto"]&&o.actions["goto"].length>0&&(u=this._mergetGotoTargets(o.actions["goto"],u)),s=this._decideRealTarget(u,o,i),d.targetID=s.target,d.type=s.type,d.flowID=r.flowID;break;case"finish":d.event="finish",d.action="_gotoStep",d.flowID=r.flowID,this.flowsMap[d.flowID].actions&&(u=this.flowsMap[d.flowID].actions[t]),s=this._decideRealTarget(u,o),d.targetID=s.target,d.type=s.type,d.reset=s.reset,e.mobile&&(d.cleanupStep=!0),this.resetFlowData(d.reset);break;case"cancel":d.event="cancel",d.action="_gotoStep",d.flowID=r.flowID,this.flowsMap[d.flowID].actions&&(u=this.flowsMap[d.flowID].actions[t]),s=this._decideRealTarget(u,o),d.targetID=s.target,d.type=s.type,d.reset=s.reset,e.mobile&&(d.cleanupStep=!0),this.resetFlowData(d.reset);break;default:d.action=t,d.event=t,s=this._decideRealTarget(u,o),d.targetID=s.target,d.type=s.type}return d&&n&&n.fragment&&(d.fragment=n.fragment),d},_mergetGotoTargets:function(e,i){var n=t.union(i,e),s=t.uniq(n,!1,function(e){return e.target});return s},_decideRealTarget:function(e,i,n){var s={};if(n)if(t.isArray(e)){for(var a=0;a<e.length;a++)if(e[a].target===n){s=this._executeRule(e[a],i,n);break}}else s=this._executeRule(e,i,n);else"string"!=typeof e&&e||(s.target=e),"object"==typeof e&&(s=this._executeRule(e,i));return s},_executeRule:function(e,t,i){return this._initRulesExecutor(t),this.executor.execute(e,i)},_initRulesExecutor:function(e){var i,n,s,o;if(e&&e.rulesAggregator&&this.options.rulesAggregators){if(t.isArray(e.rulesAggregator)){n=[];for(var r=0;r<e.rulesAggregator.length;r++)s=this.options.rulesAggregators[e.rulesAggregator[r]],s&&n.push(s)}else n=[this.options.rulesAggregators[e.rulesAggregator]];n||(n=[this.options.rulesAggregators["default"]])}!this.executor&&this.options&&(t.isArray(n)?o=n:this.options.rulesAggregator&&(o=[this.options.rulesAggregator]),i={rulesAggregators:o,flowManager:this},this.executor=this.options.rulesExecutor?"object"==typeof this.options.rulesExecutor?this.options.rulesExecutor:new this.options.rulesExecutor(i):new a(i))},_resetPosition:function(){this.currentPosition=null},_setPosition:function(e){this.currentPosition={targetID:e.targetID,flowID:e.flowID}},_getPosition:function(){var t,i;if(e.mobile)t=this.currentPosition,t||(i=this.router.getHash().split("_"),i&&2===i.length&&(t={flowID:i[0],targetID:i[1]}));else if(!t){var n=function(e){var t=e.match(this.FLOW_CONFIG);return t&&t.length>this.MATCH_PATTERN?t[this.MATCH_PATTERN].split("/"):null}.bind(this);i=n(this.router.getDecodedHash()),(!i||i.length<2)&&(i=n(this.router.getQueryParams())),i&&2===i.length&&(t={flowID:i[0],targetID:i[1]})}return t},getPosition:function(){return this._getPosition()},_createModel:function(){if(!this.model){this.model=new l(null,{url:"/uxf"});var e=new r;e.storage=s.getStorage("session"),this.model.setDataSource(e)}},getFlowData:function(e){var t;return this.vm&&(this._createModel(),t=this.vm.get(e),t||(this.model.fetch({id:this.FLOW_MANAGER_ID}),t=this.model.get(e),t&&this.vm.set("key",t,{silent:!0}))),t},resetFlowData:function(t){e.mobile&&this._resetPosition(),t&&this.vm.clear(),this.model?(this.model.destroy(),this.model.clear()):this._createModel()},setFlowData:function(e,t,i){this.vm=this.vm||new o,this._createModel(),this.vm.set("key",t,{silent:!i}),this.model.set(e,t),this.model.save(void 0,{id:this.FLOW_MANAGER_ID})},deleteFlowData:function(e){this._createModel(),this.model.unset(e),this.model.save(void 0,{id:this.FLOW_MANAGER_ID})},getFlowState:function(e){var t=this.flowPathConfig;return e&&(t=t[e]),t},setViewModel:function(e){this.vm=e,this._createModel()},getViewModel:function(){return this._createModel(),this.vm},getFlowConfig:function(e){return this.flowsMap[e]},markStepAs:function(e,t){this.vm.trigger("flow:step:mark",t,e)},unmarkStepAs:function(e,t){this.vm.trigger("flow:step:unmark",t,e)}}};return d.storage=s.getStorage("session"),d.extend=n.extend,d}),define("src/core/controller/Router",["jquery","underscore","backbone","src/core/util/Utils","src/core/util/StorageUtil","src/core/controller/FlowManager"],function(e,t,i,n,s,a){var o=i.Router.extend({initialize:function(e){this.key=t.uniqueId("lsKey_"),this._initFlowManager(e),this._init(e),this.registerRoutes(this.configuration.routes,e)},_init:function(t){this.configuration=e.extend(!0,{},t),this.configuration.routes=this.configuration.routes||{}},_initFlowManager:function(e){var t;this.fm||(t={router:this},e&&e.rulesExecutor&&(t.rulesExecutor=e.rulesExecutor),e&&e.rulesAggregators&&(t.rulesAggregators=e.rulesAggregators),e&&e.storageType&&(t.storageType=e.storageType),this.fm=e&&e.flowManager?"object"==typeof e.flowManager?e.flowManager:new e.flowManager(t):new a(t))},registerRoutes:function(e,t){var i;for(var n in e)i=e[n],this.registerSingleRoute(n,i,t)},registerSingleRoute:function(e,t,i){"string"==typeof t?t=i[t]&&"function"==typeof i[t]||this[t]?{handler:i[t]||this[t]}:{path:t}:"function"==typeof t&&(t={handler:t}),t.handler=("string"==typeof t.handler?i[t.handler]||this[t.handler]:t.handler)||function(){},t.regex=this._routeToRegExp(e),this.routes[e]=t},executeAction:function(e,t,i,n){this.fm&&this.fm.executeAction(e,t,i,n)},navigate:function(t,n){n=n||{},n=e.mobile?this._createRouteConfig(n):this._createRouteConfig(n,!0);var s=this._getRouteObject(t);if(n.valueObject&&this._setValueObject(n.key,n.valueObject),s){var a=n.external||s.external,o=this._extractParameters(s.regex,t);o.unshift(n),o.unshift(s),o.unshift(t);var r=s.handler.apply(this,o);!r&&s.path&&(a?(n.hash&&(s.path=s.path+"#"+n.hash.join("/#!/")),n.fragment&&(s.path=s.path+"#"+n.fragment),n.replace?window.location.replace(s.path):window.open(s.path,"_self")):i.history.fragment!==t&&i.Router.prototype.navigate(s.path,n))}else i.Router.prototype.navigate(t,n);this.trigger("route:"+t,o)},_createRouteConfig:function(t,i){var n=e.extend(!0,{},t);return void 0===n.trigger&&(n.trigger=!0),n.external=i,n},_getRouteObject:function(e){var t,i=this.routes[e];if(!i)for(var n in this.routes)if(t=this.routes[n],t.regex.test(e)){i=t;break}return i},_setValueObject:function(e,t){var i=e||this.key;t&&o.storage.set(i,t)},getValueObject:function(e,t){var i=e||this.key,n=o.storage.get(i);return n&&t&&o.storage.deleteKey(i),n},getQueryParams:function(){return window.location.search},getHash:function(){return i.history.getFragment()},getDecodedHash:function(){return decodeURIComponent(i.history.getFragment())},getFlowState:function(e){return this.fm.getFlowState(e)},getFlowData:function(e){return this.fm.getFlowData(e)},setFlowData:function(e,t){this.fm.setFlowData(e,t)},resetFlowData:function(){this.fm.resetFlowData()},deleteFlowData:function(e){return this.fm.deleteFlowData(e)},setViewModel:function(e){this.fm&&this.fm.setViewModel(e)},getViewModel:function(){return this.fm&&this.fm.getViewModel()},getFlowConfig:function(e){return this.fm&&this.fm.getFlowConfig(e)},markStepAs:function(e,t){this.fm&&this.fm.markStepAs(e,t)},unmarkStepAs:function(e,t){this.fm&&this.fm.unmarkStepAs(e,t)}});return i.History.prototype._updateHash=function(t,i,n){var s;"?"===i.charAt(0)?(s=i.split("#"),n?t.replace(t.toString().replace(/(javascript:|#|\?).*$/,"")+s[0]+"#"+s[1]):t.href=t.toString().replace(/(javascript:|#|\?).*$/,"")+s[0]+"#"+s[1]):n?t.replace(t.toString().replace(/(javascript:|#).*$/,"")+"#"+i):e.mobile?e.mobile.changePage("#"+i):t.hash=i},o.storage=s.getStorage("session"),o}),define("src/core/logger/Layout",["underscore"],function(e){var t=function(){e.extend(t.prototype,{loggerKey:"logger",timeStampKey:"timestamp",millisecondsKey:"milliseconds",levelKey:"level",messageKey:"message",urlKey:"url",getDataValues:function(e,t){var i=[[this.loggerKey,e.logger.name],[this.timeStampKey,e.timeStamp],[this.levelKey,e.level.name],[this.urlKey,window.location.href],[this.messageKey,t?e.getCombinedMessages():e.messages]];
return i},format:function(e){var t=this.format(e);return t}})};return t}),define("src/core/logger/JSONLayout",["underscore","src/core/logger/Layout"],function(e,t){var i=function(e,t){var i="\r\n";this.readable=e,this.combineMessages=t,this.batchHeader=this.readable?"["+i:"[",this.batchFooter=this.readable?"]"+i:"]",this.batchSeparator=this.readable?","+i:",",this.colon=this.readable?": ":":",this.tab=this.readable?"	":"",this.lineBreak=this.readable?i:"",this.customFields=[]};return i.prototype=new t,e.extend(i.prototype,{isReadable:function(){return this.readable},isCombinedMessages:function(){return this.combineMessages},format:function(e){var t,i,n=this.getDataValues(e,this.combineMessages),s="\n{"+this.lineBreak;for(t=0,i=n.length-1;i>=t;t++)s+=this.tab+"'"+n[t][0]+"'"+this.colon+n[t][1],i>t&&(s+=","),s+=this.lineBreak;return s+="}"+this.lineBreak},getContentType:function(){return"application/json"}}),i}),define("src/core/logger/Level",["underscore"],function(e){var t=function(e,t){this.level=e,this.name=t};return e.extend(t.prototype,{toString:function(){return this.name},equals:function(e){return this.level===e.level},isGreaterOrEqual:function(e){return this.level>=e.level}}),t.ALL=new t(Number.MIN_VALUE,"ALL"),t.TRACE=new t(1e4,"TRACE"),t.DEBUG=new t(2e4,"DEBUG"),t.INFO=new t(3e4,"INFO"),t.WARN=new t(4e4,"WARN"),t.ERROR=new t(5e4,"ERROR"),t.FATAL=new t(6e4,"FATAL"),t.OFF=new t(Number.MAX_VALUE,"OFF"),t}),define("src/core/logger/Appender",["underscore","src/core/logger/Level"],function(e,t){var i=function(){};return e.extend(i.prototype,{doAppend:function(e){e.level.level>=t.DEBUG.level&&this.append(e)}}),i}),define("src/core/logger/TopicAppender",["underscore","src/core/logger/Appender","src/core/logger/Level","src/core/logger/Layout","src/core/logger/JSONLayout"],function(e,t,i,n,s){var a=function(e,t){var i=!0,n=this;e||(i=!1,console.log("Topic Cannot be undefined"));var s=[],a=[],o=null;this.getSessionId=function(){return o},this.setSessionId=function(e){o=e,this.layout.setCustomField("sessionid",o)},this.setLayout=function(e){this.layout=e,null!==o&&this.setSessionId(o)},this.getLayout=function(){return this.layout},this.append=function(o){function r(e){for(var t,i=[],s="";t=e.shift();)i.push(n.layout.format(t));return s=1===e.length?i.join(""):n.layout.batchHeader+i.join(n.layout.batchSeparator)+n.layout.batchFooter}function l(n){i&&t.publish(e.name,{logData:n})}s.push(o);var d=1;if(s.length>=d){for(var u,h=[];u=s.shift();)h.push(u);a.push(h)}for(var c;c=a.shift();)l(r(c))}};return a.prototype=new t,e.extend(a.prototype,{layout:new s,threshold:i.DEBUG,defaults:{timed:!1,timerInterval:1e3,batchSize:1,sendAllOnUnload:!1,postVarName:"data",contentType:"application/json"},toString:function(){return"TopicAppender"}}),a}),define("src/core/logger/ModelAppender",["underscore","src/core/logger/Appender","src/core/logger/Layout","src/core/logger/JSONLayout","src/core/logger/Level"],function(e,t,i,n,s){var a=function(e){var t=this,i=!0;e||(i=!1,console.log("Model Cannot be undefined"));var n=this.defaults.timed,s=this.defaults.batchSize,a=this.defaults.timerInterval,o=this.defaults.sendAllOnUnload,r=null,l=[],d=[],u=!1,h=!1;this.getSessionId=function(){return r},this.setSessionId=function(e){r=e,this.layout.setCustomField("sessionid",r)},this.setLayout=function(e){this.layout=e,null!==r&&this.setSessionId(r)},this.getLayout=function(){return this.layout},this.isTimed=function(){return n},this.setTimed=function(e){n=e},this.getTimerInterval=function(){return a},this.setTimerInterval=function(e){a=e},this.getBatchSize=function(){return s},this.setBatchSize=function(e){s=e},this.isSendAllOnUnload=function(){return o},this.setSendAllOnUnload=function(e){o=e},this.preparePostData=function(e){for(var i,n=[],s="";i=e.shift();)n.push(t.layout.format(i));return s=1===e.length?n.join(""):t.layout.batchHeader+n.join(t.layout.batchSeparator)+t.layout.batchFooter},this.sendRequest=function(t){if(i){var n=new e({Object:t},{});n.save({})}},this.append=function(e){if(h||this.init(),i){l.push(e);var t=s;if(l.length>=t){for(var a,o=[];a=l.shift();)o.push(a);d.push(o),n||this.sendAll()}}},this.init=function(){if(h=!0,o){var e=window.onbeforeunload;window.onbeforeunload=function(){return e&&this.oldBeforeUnload(),this.sendAllRemaining()?"Sending log messages":void 0}}n&&this.scheduleSending()},this.scheduleSending=function(){var e=this;setTimeout(function(){e.sendAll()},a)},this.sendAll=function(){if(i){u=!0;for(var e;e=d.shift();)this.sendRequest(this.preparePostData(e));u=!1,n&&this.scheduleSending()}},this.sendAllRemaining=function(){var e=!1;if(i){for(var t,a=s,o=[];t=l.shift();)o.push(t),l.length>=a&&(d.push(o),o=[]);o.length>0&&d.push(o),e=d.length>0,n=!1,this.sendAll()}return e}};return a.prototype=new t,e.extend(a.prototype,{layout:new n,threshold:s.DEBUG,defaults:{timed:!1,timerInterval:1e3,batchSize:1,sendAllOnUnload:!1,requestSuccessCallback:null,failCallback:null,postVarName:"data",contentType:"application/json"},toString:function(){return"ModelAppender"}}),a}),define("src/core/logger/ConsoleAppender",["underscore","src/core/logger/Appender","src/core/logger/Level","src/core/logger/Layout","src/core/logger/JSONLayout"],function(e,t,i,n,s){var a=function(){};return a.prototype=new t,e.extend(a.prototype,{layout:new s,threshold:i.DEBUG,setLayout:function(e){e instanceof n&&(a.prototype.layout=e)},append:function(e){var t,n=this,s=function(){var t=n.layout.format(e);return"string"==typeof t?[t]:t};if((t=window.console)&&t.log){var a,o=s();a=t.debug&&i.DEBUG.isGreaterOrEqual(e.level)?"debug":t.info&&i.INFO.equals(e.level)?"info":t.warn&&i.WARN.equals(e.level)?"warn":t.error&&e.level.isGreaterOrEqual(i.ERROR)?"error":"log",t[a].apply?t[a].apply(t,o):t[a](o)}},group:function(e){window.console&&window.console.group&&window.console.group(e)},groupEnd:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},toString:function(){return"ConsoleAppender"}}),a}),define("src/core/logger/LoggingEvent",["underscore"],function(e){var t="\r\n",i=function(e,t,i,n){this.logger=e,this.timeStamp=t,this.level=i,this.messages=n};return e.extend(i.prototype,{getCombinedMessages:function(){return 1===this.messages.length?this.messages[0]:this.messages.join(t)}}),i}),define("src/core/logger/Logger",["src/core/logger/JSONLayout","src/core/logger/Appender","src/core/logger/TopicAppender","src/core/logger/ModelAppender","src/core/logger/ConsoleAppender","src/core/logger/Level","src/core/logger/LoggingEvent","underscore"],function(e,t,i,n,s,a,o,r){var l=function(){function l(r){this.name=r;var l=[],d=a.DEBUG;this.addAppender=function(e){l.push(e)},this.removeAppender=function(e){var t=[],i=[];t=l;for(var n=l.length-1;n>=0;n--)l[n]===e?t.pop():i.push(t.pop());l=i},this.removeAllAppenders=function(){var e=[];for(e=l;l.length>0;)e.pop();l=e};var u=!0;this.setEnabled=function(e){u=e},this.isEnabled=function(){return u},this.log=function(e,t){if(this.isEnabled()&&e.isGreaterOrEqual(this.getLevel())){var i,n=t.length-1,s=t[n];t.length>1&&(i=s,n--);for(var a=[],r=0;n>=r;r++)a[r]=t[r];var l=new o(this,new Date,e,a);this.callAppenders(l)}},this.callAppenders=function(e){for(var t=0,i=l.length;i>t;t++)l[t].doAppend(e)},this.setLevel=function(e){e instanceof a&&(d=e)},this.getLevel=function(){return d},this.group=function(e,t){if(this.isEnabled())for(var i=0,n=l.length;n>i;i++)l[i].group(e,t)},this.groupEnd=function(){if(this.isEnabled())for(var e=0,t=l.length;t>e;e++)l[e].groupEnd()},this.toString=function(){return"Logger["+this.name+"]"},this.Appender=t,this.Level=a,this.LoggingEvent=o,this.JsonLayout=e,this.ConsoleAppender=s,this.ModelAppender=n,this.TopicAppender=i}var d={},u=[];this.getLogger=function(e){if(!d[e]){var t=new l(e);d[e]=t,u.push(e)}return d[e]},r.extend(l.prototype,{trace:function(){this.log(a.TRACE,arguments)},debug:function(){this.log(a.DEBUG,arguments)},info:function(){this.log(a.INFO,arguments)},warn:function(){this.log(a.WARN,arguments)},error:function(){this.log(a.ERROR,arguments)},fatal:function(){this.log(a.FATAL,arguments)},isEnabledFor:function(e){return e.isGreaterOrEqual(this.getLevel())},isTraceEnabled:function(){return this.isEnabledFor(a.TRACE)},isDebugEnabled:function(){return this.isEnabledFor(a.DEBUG)},isInfoEnabled:function(){return this.isEnabledFor(a.INFO)},isWarnEnabled:function(){return this.isEnabledFor(a.WARN)},isErrorEnabled:function(){return this.isEnabledFor(a.ERROR)},isFatalEnabled:function(){return this.isEnabledFor(a.FATAL)}})};return l}),define("src/core/application/Bootstrap",["jquery","src/core/util/Utils","src/core/application/Application","src/core/controller/Router"],function(e,t,i,n){var s=function(e){this._init(e),this.init(e),this.createRouter(e),this.createApplication(e),this.postInit(e)};return _.extend(s,{extend:t.extend}),_.extend(s.prototype,{routes:{},modules:[],_init:function(){this.applicationConstructor=i},init:function(){},postInit:function(){},createRouter:function(){this.router=new n({routes:this.routes})},createApplication:function(){new this.applicationConstructor({router:this.router,modules:this.modules})}}),s}),define("src/core/application/ExecutionContext",["underscore","backbone","src/core/util/Utils"],function(e,t,i){var n="$change",s="$subscribe",a=function(e){this.options=e||{},this.modules={},this.createModules(this.options.modules)};return e.extend(a.prototype,i.Factory,{createModules:function(t){e.each(t,function(e,t){this.createModule(t,e.path,e.options)},this)},createModule:function(t,i,n){var s=requirejs(i);return"undefined"==typeof s?null:(this.modules[t]=this.create(e.uniqueId("module_"+t+"_"),s,n),this.modules[t])},getModule:function(e){return this.modules[e]},publish:function(t,i,n){var s=this.getModule(t);if(!s)throw new Error("Module '"+t+"' is not instantiated for use yet.");i=e.pick(i,e.keys(s.get())),s.set(i),n&&s.handleAction(n)},subscribe:function(t,a){var o=function(t,a,o){var r=i.clone(e.omit(t.get(),"subViewModels")),l={action:o,data:r};return o===s?(l.changedAttributes=r,l.prevAttributes={},l.changedAttributes={}):o===n&&(l.changedAttributes=i.clone(a.changed),l.prevAttributes=i.clone(e.omit(a.target.data.previousAttributes(),"subViewModels"))),l},r=this.getModule(t);if(!r)throw new Error("Module '"+t+"' is not instantiated for use yet.");(!a.actions||e.indexOf(a.actions,"change")>-1)&&r.on("change",a.handler,a.context),a.events&&e.each(a.events,function(t,i,n){e.isArray(n)&&(i=t,t=null),t||(t={}),t.handler=t.handler||a.handler,t.context=t.context||a.context,r.on(i,t.handler,t.context)}),a.silent||e.bind(a.handler,a.context)(o(r,{},s))}}),a}),define("src/core/application/ContextProvider",["underscore","src/core/application/ExecutionContext","src/core/util/Utils"],function(e,t,i){var n=function(e){this.options=e||{},this.modelConfigs=this.options.modules||{},this.createdContext={},this.envViewModel=null};return e.extend(n.prototype,i.Factory,{createExecutionContext:function(i){var n;return this.envViewModel||(this.envViewModel=this.createEnvViewModel(this.options.env)),e.isString(i)?this.createExecutionContext([i]):(e.isArray(i)&&(n=this.create(e.uniqueId("module_"),t,{}),e.each(i,function(e){var t=this.modelConfigs[e];if(t){var i=n.createModule(e,t.path,t.option);i.addSubViewModel&&i.addSubViewModel("env",this.envViewModel)}},this)),n)},createEnvViewModel:function(){}}),n}),define("lightsaber.core",["underscore","backbone","src/core/util/Utils","src/core/resourceBundle/ResourceBundle","src/core/dataSource/DataSource","src/core/dataSource/LocalStorageDataSource","src/core/dataSource/RESTDataSource","src/core/dataSource/LSRESTDataSource","src/core/dataSource/RESTSession","src/core/model/ErrorHandler","src/core/model/Model","src/core/model/RESTModel","src/core/model/Validator","src/core/model/Collection","src/core/viewModel/BaseViewModel","src/core/viewModel/ViewModel","src/core/viewModel/ObservableViewModel","src/components/collection/viewmodel/CollectionViewModel","src/core/view/View","src/core/binding/Binding","src/core/application/Application","src/core/application/BusinessWidget","src/core/hub/BusinessWidgetHub","src/core/controller/Router","src/core/controller/FlowManager","src/core/util/Configuration","src/core/util/StorageUtil","src/core/formatter/FormattersContainer","src/core/application/WidgetInternalFlow","src/core/logger/Logger","src/core/application/Bootstrap","src/core/application/ContextProvider"],function(e,t,i,n,s,a,o,r,l,d,u,h,c,p,f,g,m,v,_,b,w,y,x,C,M,V,S,E,T,k,I,A){var D={DataSource:s,LocalStorageDataSource:a,RESTDataSource:o,LSRESTDataSource:r,RESTSession:l,ErrorHandler:d,Model:u,RESTModel:h,Collection:p,Validator:c,View:_,BaseViewModel:f,ViewModel:g,ObservableViewModel:m,CollectionViewModel:v,DataBinding:b,Application:w,BusinessWidget:y,BusinessWidgetHub:x,Router:C,FlowManager:M,Utils:i,ResourceBundle:n,Configuration:V,StorageUtil:S,FormattersContainer:E,WidgetInternalFlow:T,Logger:k,Bootstrap:I,ContextProvider:A};return D}),define("text!src/components/button/view/template/anchorButtonTemplate.html",[],function(){return'<a class="uxf-button" data-uxf-point="buttonElement" data-role="button"><%=text%></a>'}),define("text!src/components/button/view/template/defaultButtonTemplate.html",[],function(){return'<button class="uxf-button" data-uxf-point="buttonElement"><%=text%></button>'}),define("text!src/components/button/view/template/inputButtonTemplate.html",[],function(){return'<input class="uxf-button" data-uxf-point="buttonElement" type="button" value="<%=text%>"></input>'}),define("src/components/button/view/BaseButtonView",["jquery","underscore","text!./template/anchorButtonTemplate.html","text!./template/defaultButtonTemplate.html","text!./template/inputButtonTemplate.html","lightsaber.core"],function(e,t,i,n,s,a){var o=a.View.extend({publicMethods:["reapplyAttrs","refresh"],template:n,tagName:"button",vmKeys:{"data.text":"text","data.label":"label","action.click":"click"},vmKeysChangeEvents:{"data.text":"onChange","data.label":"onChange"},initialize:function(){t.bindAll(this,"_clicked")},_preRender:function(){var e=this.getConfig("template");e||this._decideDefaultTemplate()},_postRender:function(){this._calcWrapper()},_calcWrapper:function(){var e=this.$root.parentsUntil(this.$el);this.$wrapper=e.eq(e.length-1),this.$wrapper.length&&"replace"!=this.options.insertMethod||(this.$wrapper=this.$el)},_createTemplateData:function(){var e=this.viewModel.get(this.vmKeys["data.text"])||this.viewModel.get(this.vmKeys["data.label"])||this.viewModel.getConfig(this.vmKeys["data.label"])||this.getConfig(this.vmKeys["data.label"]),t={text:e,disabled:this.attr("disabled")};return t},_decideDefaultTemplate:function(){switch(this.tagName=this.getConfig("tagName")||this.tagName,this.tagName){case"input":this.template=t.template(s);break;case"a":this.template=t.template(i);break;case"button":default:this.template=t.template(n)}},_enhanceMarkup:function(){},onChange:function(e){this.refresh(e)},refresh:function(e){if(e)switch(this.tagName){case"input":this.$root.val(e.value),this.$root.button("refresh");break;case"a":this.$root.find("span").html(e.value);break;case"button ":default:this.$root.html(e.value),this.$root.button("refresh")}else this.reapplyAttrs()},_clicked:function(e){this._handleEventOnClick(e);var t=this.vmKeys["action."+e.type];t||(t=e.type),this.viewModel.handleAction(t,e),this.getConfig("stopPropagation")!==!1&&e.stopPropagation(),this.getConfig("preventDefault")!==!1&&e.preventDefault()},_handleEventOnClick:function(){},reapplyAttrs:function(){}});return o}),define("src/components/button/view/ButtonView",["jquery","jquery.ui","src/components/button/view/BaseButtonView","lightsaber.core"],function(e,t,i){var n=i.extend({_enhanceMarkup:function(){this.$root.button(this.getConfig()),this.buttonEnhanced=!0,this._checkEnable()},_postRender:function(){this._super(),this.$root.off("click",this._clicked),this.$root.on("click",this._clicked)},refresh:function(e){if(e)switch(this.tagName){case"input":this.$root.val(e.value),this.$root.button("refresh");break;case"a":case"button ":default:this.$root.find("span").html(e.value),this.$root.button("refresh")}else this.reapplyAttrs()},onEnableChange:function(e){this.buttonEnhanced&&this.$root.button("option","disabled",!e.value)},reapplyAttrs:function(){this.$wrapper&&this.$root.button(this.attr("disabled")?"disable":"enable")}});return n}),define("text!src/components/header/view/template/header.html",[],function(){return'<div data-role="header" class="custom_header ui-header ui-bar-a" data-position="fixed" data-inline="true" data-tap-toogle="false">\n	<h1 class="ui-title"><%=title%></h1>	\n</div>'}),define("src/components/header/view/HeaderView",["jquery","underscore","lightsaber.core","text!./template/header.html"],function(e,t,i,n){var s=i.View.extend({vmKeys:{"data.title":"title"},config:{autoRefresh:!0,template:t.template(n),"data.title":""},_enhanceMarkup:function(){this.$el.trigger("create")}});return s}),define("text!src/components/forminput/view/template/input_template.html",[],function(){return'<div class="uxf-input">\n	<legend data-uxf-point="myLegend"><%=legend%></legend>\n	<fieldset data-uxf-point="myInput"></fieldset>\n	<div data-uxf-point="LS-error" class="LS-error is-hidden"></div>\n</div>\n'}),define("text!src/components/forminput/view/template/minimal_input_template.html",[],function(){return'<span class="uxf-minimalinput">\n	<span data-uxf-point="myInput"></span>\n</span>\n'}),define("text!src/components/forminput/view/template/textInput_template.html",[],function(){return'<span class="uxf-textinput">\n<label for="<%=id%>"><%=display%></label><input data-uxf-point="myElement" type="<%=type%>" id="<%=id%>" name="<%=name%>" value="<%=value%>"></input>\n</span>'}),define("src/components/forminput/view/BaseFormElementView",["jquery","underscore","backbone","lightsaber.core","text!./template/input_template.html","text!./template/minimal_input_template.html","text!./template/textInput_template.html"],function(e,t,i,n,s,a,o){var r=n.View.extend({publicMethods:["getData","refresh"],events:{'vclick [data-uxf-point="myElement"]':"_clicked",'dblclick [data-uxf-point="myElement"]':"_clicked",'focusin [data-uxf-point="myElement"]':"_clicked",'focus [data-uxf-point="myElement"]':"_clicked",'blur [data-uxf-point="myElement"]':"_unfocus",'focusout [data-uxf-point="myElement"]':"_unfocus",'keyup [data-uxf-point="myElement"]':"_keyboard",'keydown [data-uxf-point="myElement"]':"_keyboard",'change [data-uxf-point="myElement"]':"_changed"},vmKeys:{"data.label":"label","data.legend":"legend","data.fieldValue":"fieldValue","data.defaultValue":"defaultValue","config.collectionViewModel":"collectionViewModel","config.optionsModelName":"optionsModelName","config.optionsValueFieldName":"optionsValueFieldName","config.optionsDisplayFieldName":"optionsDisplayFieldName"},vmKeysChangeEvents:{"data.label":"_valueChanged","data.legend":"_valueChanged","data.fieldValue":"_valueChanged","data.defaultValue":"_valueChanged"},isClicked:!1,preRender:function(){this.isClicked=!1,this.inputAttr=null,this.viewData=null,this.type=null,this.template=this.getConfig("template")?this.getConfig("template"):t.template(this.getConfig("isMinimalTemplate")?a:s),this._handleCollectionForMultipleChoices()},config:{optionsValueFieldName:"value",optionsDisplayFieldName:"name"},getData:function(){var e={label:this._getVMData("data.label"),legend:this._getVMData("data.legend"),fieldValue:this._getVMData("data.fieldValue"),defaultValue:this._getVMData("data.defaultValue")};if(null!=this.selectModel||null!=this.collectionView){var t=null;null!=this.selectModel?t=this.selectModel.toJSON():null!=this.collectionView&&(t=this.collectionView.getData().items);var i={items:t};i.valueField=this._getVMConfig("config.optionsValueFieldName")||this.getConfig("optionsValueFieldName"),i.nameField=this._getVMConfig("config.optionsDisplayFieldName")||this.getConfig("optionsDisplayFieldName"),e.optionsData=i}return e},configChanged:function(){if(null!=this.inputElement){var e=this._getClonedInputAttributes();this._handleInputAttributes(e,this.getData()),this._setPropertiesAndValue(e,this.inputElement),this.inputElement.attr(e),this._postRenderFormElement(this.inputElement)}},refresh:function(){var e=this.inputAttr,i=this._getType(e),n=this.getData();n=t.extend({refresh:!0},n,this.getConfig()),this._updateDataForElement(e,n,i)},onEnableChange:function(){if(null!=this.inputElement){var e=this.viewModel.getConfig("enabled")?!1:!0;this.inputElement.prop("disabled",e)}},onVisibleChange:function(){var e=1==this.viewModel.getConfig("visible");e?this.$root.show():this.$root.hide()},_getClonedInputAttributes:function(){var e={};return this.getConfig("inputAttributes")&&(e=t.clone(this.getConfig("inputAttributes"))),e},_handleCollectionForMultipleChoices:function(){if(this.selectModel=null,this.collectionView=this.getConfig("collectionViewModel"),null!=this.collectionView);else{var e=this.getConfig("optionsModelName")||this._getVMConfig("config.optionsModelName")||this._getVMData("data.optionsModelName");null!=e&&(this.selectModel=this.viewModel.models[e])}},_handleTemplate:function(e){var t=this._createTemplateData(),i=this.getPopulatedTemplate(this.template,t);this.placeRoot(i,e?!0:!1),this._updateDataForElement(this.inputAttr,this.viewData,this.type),this._normalizeRootDomEl()},_createTemplateData:function(){return this.inputAttr=this._getClonedInputAttributes(),this.type=this._getType(this.inputAttr),this.viewData=this.getData(),this.viewData=t.extend({},this.viewData,this.getConfig()),this._getTemplateObject(this.inputAttr,this.viewData)},_postRender:function(){this._renderFormElement(this.inputAttr,this.viewData,this.type),this.inputElement=this.$root.find('[data-uxf-point="myElement"]'),this.errorElement=this.$root.find('[data-uxf-point="LS-error"]'),this._postRenderFormElement(this.inputElement);var e=this._getValue();this.viewData.fieldValue&&e!=this.viewData.fieldValue&&this._setVMData("data.fieldValue",e),this._applyStyling(),this.onEnableChange(),this.onVisibleChange(),this.viewModel.on("error",this._error,this),this.viewModel.on("error:"+this.vmKeys["data.fieldValue"],this._error,this),this.viewModel.on("warning:"+this.vmKeys["data.fieldValue"],this._error,this),this.viewModel.on("bindingError:"+this.vmKeys["data.fieldValue"],this._error,this),this.viewModel.on("bindingWarning:"+this.vmKeys["data.fieldValue"],this._error,this),this.viewModel.on("items:loaded",this.refresh,this),this.collectionViewModel?this.collectionView.on("all",this.refresh,this):this.selectModel&&this.selectModel.on("all",this.refresh,this)},_handleInputAttributes:function(e,t){e.type&&delete e.type,null==e.id&&(e.id=this.cid),null==e.name&&(e.name=e.id),e.value=this._getElementInitialValue(e,t),this._handleElementSpecificInputAttributes(e,t)},_getElementInitialValue:function(e,t){var i=e.value;return null==i&&(null!=t.fieldValue?i=t.fieldValue:null!=t.defaultValue&&(i=t.defaultValue)),i},_getTemplateObject:function(e,i,n){var s=t.extend({},e,{type:n,id:e.id,name:e.name,value:e.value,display:i.label,legend:i.legend});return s},_renderFormElement:function(e,i,n){var s=this.$root.find('[data-uxf-point="myInput"]');if(this._handleInputAttributes(e,i),null!=s){var a=this.getConfig("elementTemplate")||this._getElementTemplate();a=t.template(a),this.createElement(s,a,e,i,n)}this.binding.bindDOM(this)},createElement:function(e,t,i,n,s){var a=this._getTemplateObject(i,n,s),o=this.getPopulatedTemplate(t,a);e.append(o);var r=this.$root.find("input");this._setPropertiesAndValue(i,r),r.attr(i)},_postRenderFormElement:function(){},_clicked:function(e){this.isClicked||(this.isClicked=!0,this.trigger("clicked",{event:e}))},_unfocus:function(){this.isClicked=!1},_keyboard:function(e){this.trigger("keyboard",{event:e,value:this._getValue()})},_changed:function(e,t){this._removeError(),null==t&&(t=this._getValue(e)),this._setVMData("data.fieldValue",t),this.trigger("changed:value",{event:e,value:t})},_valueChanged:function(e){var t=this._getVMData("data.fieldValue");t!=this._getValue()&&(!e._warningWasFound&&this._removeError(),this._setValue(t))},_removeError:function(){var e=this.getConfig("errorRemoveHandler");(!e||e(this))&&null!=this.errorElement&&(this.getConfig("useErrorClass")?this.errorElement.removeClass("is-visible").addClass("is-hidden"):this.errorElement.hide())},_getErrorText:function(e,t){var i=void 0;try{i=this._getLocaleString(e,t)}catch(n){}return i},validationErrorTextHandler:function(e,t){t.errors&&t.errors.length?t=t.errors[0]:t.warnings&&t.warnings.length&&(t=t.warnings[0]);var i=e&&(this._getErrorText(e+"."+t.status,t.conf)||this._getErrorText(e,t.conf))||this._getErrorText(t.status,t.conf)||t.statusText;return i},_error:function(e,t,i){var n=this.getConfig("errorHandler");if((!n||n(e,t,this))&&null!=this.errorElement){var s="",a=this.getConfig("errorTextKey"),o=this.getConfig("errorTextHandler");o?s=o(e,t,i):"validation"===t.source?s=this.validationErrorTextHandler(a,t,i):a?s=this._getErrorText(a):"string"==typeof t&&(s=t),this.errorElement.text(s),this.getConfig("useErrorClass")?this.errorElement.removeClass("is-hidden").addClass("is-visible"):this.errorElement.show()}},_setPropertiesAndValue:function(e,t){e.value&&(t.val(e.value),delete e.value),e.checked&&(t.prop("checked",e.checked),delete e.checked),e.disabled&&(t.prop("disabled",e.disabled),delete e.disabled)},_handleMultipleOptionsElement:function(){},_getType:function(e){return e.type?e.type:"text"},_getElementTemplate:function(){return o},_getValue:function(){return this.inputElement&&this.inputElement.val()},_setValue:function(e){this.inputElement.val(e)},_handleElementSpecificInputAttributes:function(){},_updateDataForElement:function(){},_applyStyling:function(){}});return r}),define("src/components/forminput/view/FormElementTouchpointBaseView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/BaseFormElementView","text!./template/textInput_template.html"],function(e,t,i,n,s){var a=s.extend({});return a}),define("src/components/forminput/view/InputTextView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/FormElementTouchpointBaseView","text!./template/textInput_template.html"],function(e,t,i,n,s,a){var o=s.extend({_jqueryMobilePluginType:"textinput",_getType:function(e){return e.type?e.type:"text"},_getElementTemplate:function(){return a}});return o.widgetName="uxf.uxfinputtext",o}),define("text!src/components/forminput/view/template/textArea_template.html",[],function(){return'<span class="uxf-textarea">\n	<label for="<%=id%>"><%=display%></label>\n	<textarea id="<%=id%>" name="<%=name%>" data-uxf-point="myElement"><%=value%></textarea> \n</span>'}),define("src/components/forminput/view/InputTextAreaView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/FormElementTouchpointBaseView","text!./template/textArea_template.html"],function(e,t,i,n,s,a){var o=s.extend({_jqueryMobilePluginType:"textinput",_getType:function(){return null},_getElementTemplate:function(){return a},createElement:function(e,t,i,n,s){var a=this._getTemplateObject(i,n,s),o=this.getPopulatedTemplate(t,a);e.append(o);var r=this.$root.find("textarea");this._setPropertiesAndValue(i,r),r.attr(i)}});return o}),define("text!src/components/forminput/view/template/clickInput_template.html",[],function(){return'<span class="uxf-clickinput">\n<input data-uxf-point="myElement" type="<%=type%>" value="<%=value%>" name="<%=name%>" id="<%=id%>"></input>\n<label for="<%=id%>"><%=display%></label>\n</span>\n'}),define("src/components/forminput/view/CheckboxView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/FormElementTouchpointBaseView","text!./template/clickInput_template.html"],function(e,t,i,n,s,a){var o=s.extend({_jqueryMobilePluginType:"checkboxradio",_getType:function(){return"checkbox"},_getElementTemplate:function(){return a},_getValue:function(){for(var t=new Array,i=this._getInputElementsArray(),n=0;n<i.length;n++){var s=e(i[n]),a=s.prop("checked");a&&(t[t.length]=s.val().replace(",","\\,"))}return t.length>0?t.join(","):this.getConfig("falseValue")?this.getConfig("falseValue"):null},_setValue:function(i){t.isUndefined(i)&&(i=""),i=i.replace("\\,","MYQUOTE");for(var n=i.split(","),s=this._getInputElementsArray(),a=0;a<s.length;a++){var o=e(s[a]),r=o.val();t.indexOf(n,r.replace(",","MYQUOTE"))>-1?o.prop("checked",!0):o.prop("checked",!1)}},createElement:function(e,t,i,n){if(!n.optionsData)return void s.prototype.createElement.apply(this,arguments);var a=n.optionsData.items,o=i.id,r=i.value;delete i.value;for(var l=0;l<a.length;l++){i.id=o+"-"+l;var d={type:"checkbox",id:i.id,name:i.name,value:a[l][n.optionsData.valueField],display:a[l][n.optionsData.nameField]},u=this.getPopulatedTemplate(t,d);e.append(u),this.$root.find("#"+i.id).attr(i)}i.id=o,i.value=r,this._setValue(i.value),this.$root.find("fieldset").attr("data-role","controlgroup")},_handleElementSpecificInputAttributes:function(e,t){t.optionsData||null!=t.fieldValue&&e.value==t.fieldValue&&(e.value=t.defaultValue,t.defaultValue==t.fieldValue&&(e.checked="checked"))},_updateDataForElement:function(e,i){var n=i.optionsData;n&&null==i.legend?i.legend=i.label:(null==i.label&&(i.label="Available"),null==i.defaultValue&&(i.defaultValue="true"));var s=this.getPopulatedTemplate(this.template,i);if(this.placeRoot(s,!0),i.refresh&&n&&n.items&&n.items.length>0){var a=n.items,o=this.getConfig("elementTemplate")||this._getElementTemplate(),r=this.$root.find('[data-uxf-point="myInput"]');o=t.template(o);var l=e.id,d=e.value;delete e.value;for(var u=0;u<a.length;u++){e.id=l+"-"+u;var h={type:"checkbox",id:e.id,name:e.name,value:a[u][i.optionsData.valueField],display:a[u][i.optionsData.nameField]},c=this.getPopulatedTemplate(o,h);r.append(c),this.$root.find("#"+e.id).attr(e)}e.id=l,e.value=d,this._setValue(e.value),this.$root.find("fieldset").attr("data-role","controlgroup")}},_getInputElementsArray:function(){var e=this.$root.find("input");return e}});return o}),define("src/components/forminput/view/RadioView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/FormElementTouchpointBaseView","text!./template/clickInput_template.html"],function(e,t,i,n,s,a){var o=s.extend({_jqueryMobilePluginType:"checkboxradio",_getType:function(){return"radio"},_getElementTemplate:function(){return a},createElement:function(e,t,i,n){e.empty();var s=n.optionsData.items,a=i.id,o=i.value;delete i.value,delete i.checked;for(var r=(null==n.fieldValue?n.defaultValue:n.fieldValue,0);r<s.length;r++){var l=!1;i.id=a+"-"+r;var d={type:"radio",id:i.id,name:i.name,value:s[r][n.optionsData.valueField],display:s[r][n.optionsData.nameField]},u=this.getPopulatedTemplate(t,d);e.append(u),d.value==o&&(l=!0);var h=this.$root.find("#"+i.id);h.attr(i),h.prop("checked",l)}if(!l){var c=this.$root.find("[value='"+n.defaultValue+"']");c.length&&c.prop("checked",!0)}i.value=o,i.id=a},_getValue:function(t){return null!=t?e(t.currentTarget).val():this.$root.find("[type='radio']:checked").val()},_setValue:function(e){var t=this.$root.find("[value='"+e+"']");t.length&&(this.$root.find("[type='radio']:checked").prop("checked",!1),t.prop("checked",!0))},_updateDataForElement:function(e,i){null==i.optionsData&&(i.optionsData={items:[{name:"Yes",value:"true"},{name:"No",value:"false"}],nameField:"name",valueField:"value"}),null==i.label&&(i.label="Choose"),null==i.legend&&(i.legend=i.label),this.$root.find('[data-uxf-point="myLegend"]').text(i.legend);var n=this.$root.find('[data-uxf-point="myInput"]'),s=this.getConfig("elementTemplate")||this._getElementTemplate();s=t.template(s),this.createElement(n,s,e,i)}});return o}),define("text!src/components/forminput/view/template/selectInput_template.html",[],function(){return'<span class="uxf-input">\n	<label for="<%=id%>"><%=display%></label><select id="<%=id%>"  name="<%=name%>" data-uxf-point="myElement"></select> \n</span>\n'
}),define("text!src/components/forminput/view/template/selectOption_template.html",[],function(){return'<option value="<%=value%>"><%=display%></option>'}),define("src/components/forminput/view/BaseSelectView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/FormElementTouchpointBaseView","text!./template/selectInput_template.html","text!./template/selectOption_template.html"],function(e,t,i,n,s,a,o){var r=s.extend({_getType:function(){return"select"},_getElementTemplate:function(){return a},createElement:function(e,i,n,s){var a=s.optionsData.items,r=n.id,l=n.value;delete n.value;var d=this._getTemplateObject(n,s,this._getType()),u=i(d);e.append(u);var h=this.$root.find('[data-uxf-point="myElement"]');h.attr(n);var c=this.getConfig("optionTemplate")||o;c=t.template(c);for(var p=0;p<a.length;p++)d={value:a[p][s.optionsData.valueField],display:a[p][s.optionsData.nameField],disabled:a[p].disabled,placeholder:a[p].placeholder},u=this.getPopulatedTemplate(c,d),h.append(u);null!=l&&h.val(l+""),h.children().length>0&&0==h.find("option:selected").length&&a&&a.length&&h.val(a[0][s.optionsData.valueField]+""),n.id=r},_updateDataForElement:function(e,i){null==i.optionsData&&(i.optionsData={items:[{name:"Yes",value:"true"},{name:"No",value:"false"}],nameField:"name",valueField:"value"}),null==i.label&&(i.label="Choose");var n=(e.value,this.$el.find(this._getType())),s=n.val();n.empty();var a,r,l=i.optionsData.items,d=this.getConfig("optionTemplate")||o;d=t.template(d);for(var u=0;u<l.length;u++)r={value:l[u][i.optionsData.valueField],display:l[u][i.optionsData.nameField],disabled:l[u].disabled,placeholder:l[u].placeholder},a=this.getPopulatedTemplate(d,r),n.append(a);n.val(s+""),!this._getVMData("data.fieldValue")&&l&&l.length>0&&this.viewModel.set(this.vmKeys["data.fieldValue"],l[0]?l[0][this._getVMConfig("optionsValueFieldName")]:null,{silent:!0})}});return r}),define("text!src_web/components/forminput/view/template/selectInput_template.html",[],function(){return'<span class="uxf-selectinput">\n	<div class="mlabel"><label data-ls-bind="text:label" for="<%=id%>"><%=display%></label></div><select id="<%=id%>"  name="<%=name%>" data-uxf-point="myElement"></select> \n</span>\n'}),define("src_web/components/forminput/view/SelectView",["src/components/forminput/view/BaseSelectView","text!./template/selectInput_template.html"],function(e,t){var i=e.extend({_getElementTemplate:function(){return t}});return i}),define("text!src_web/components/forminput/view/template/slider_template.html",[],function(){return'<span class="uxf-slider">\n<table "width=100%">\n<tr>\n	<td><div class="mlabel"></span><label for="<%=id%>"><%=display%></label></div></td>\n	<td><input style="width:40px" class="amount" type="number" value="<%=value%>"/></td>\n	<td><span class="minElement"></span></td>\n	<td width="100%"><span class="amountText"></span><div data-uxf-point="myElement"></div></td>\n	<td><span class="maxElement"></span></td>\n</tr>\n</table>\n</span>\n'}),define("src_web/components/forminput/view/WebSliderView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/FormElementTouchpointBaseView","text!./template/slider_template.html"],function(e,t,i,n,s,a){var o=s.extend({_getType:function(){return"range"},_getElementTemplate:function(){return a},_setAmountValue:function(t){for(var i=this.$root.find(".amount"),n=0;n<i.length;n++){var s=e(i[n]);s.is("input")?s.attr("value",t):s.text(t)}},_handleChange:function(e,t,i){i?this._setAmountValue(t):(this.inputElement.slider("value",t),t=this._getValue(),this.inputElement.slider("step")&&this._setAmountValue(t)),this._changed(e,t)},_changeFromInput:function(e){this._handleChange(e,e.currentTarget.value,!1)},_postRenderFormElement:function(){var t=this,i={range:"min",slide:function(e,i){var n={currentTarget:t.inputElement};t._handleChange(n,i.value,!0)}};i.value=this.$root.find(".amount").attr("value"),i.max=this.getConfig("maxValue")?this.getConfig("maxValue"):100,i.min=this.getConfig("minValue")?this.getConfig("minValue"):0,this.getConfig("increment")&&(i.step=this.getConfig("increment")),this.inputElement.slider(i),this.amountInput=this.$root.find("input.amount"),this.amountInput.on("change",this._changeFromInput),this.getConfig("highlight")&&(e(".ui-slider-range").css("background",this.getConfig("highlight")),e(".ui-slider-handle").css("background",this.getConfig("highlight"))),this.getConfig("showTextInput")===!1&&this.amountInput.addClass("ui-helper-hidden");var n=this.getConfig("maxValue")&&this.getConfig("minValue");(n||this.getConfig("minElement"))&&this.$root.find(".minElement").append(this.getConfig("minElement")),(n||this.getConfig("maxElement"))&&this.$root.find(".maxElement").append(this.getConfig("maxElement")),this.getConfig("amountElement")&&(this.amountElementText=this.$root.find(".amountText"),this.amountElementText.append(this.getConfig("amountElement")),this._setAmountValue(this.amountInput.attr("value")))},_setValue:function(e){this.inputElement.slider("value",e),this._setAmountValue(e)},_getValue:function(){return this.inputElement.slider("value")}});return o}),define("src/components/forminput/view/FlipSwitchView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/BaseSelectView"],function(e,t,i,n,s){var a=s.extend({_jqueryMobilePluginType:"slider",_handleElementSpecificInputAttributes:function(e){e["data-role"]="none"},_postRenderFormElement:function(e){e.slider(this.viewModel.getConfig("enabled")?void 0:{disabled:"true"})},_updateDataForElement:function(e,t){if(null==t.optionsData)t.optionsData={items:[{name:"I",value:"true"},{name:"O",value:"false"}],nameField:"name",valueField:"value"};else if(2!=t.optionsData.items.length)throw"We can only display 2 values"},onEnableChange:function(e){this.inputElement&&e&&this.inputElement.slider(this.viewModel.getConfig("enabled")?"enable":"disable")},_valueChanged:function(e,t){var t=this._getVMData("data.fieldValue");t!=this._getValue()&&(this._removeError(),this._setValue(t))}});return a}),define("src/components/forminput/view/SelectView",["jquery","src/components/forminput/view/BaseSelectView"],function(e,t){var i=t.extend({_jqueryMobilePluginType:"selectmenu",onEnableChange:function(){this.viewModel.getConfig("enabled")?(this.$root.find("select").selectmenu(),this.$root.find("select").selectmenu("enable")):(this.$root.find("select").selectmenu(),this.$root.find("select").selectmenu("disable"))},_valueChanged:function(e,t){var t=this._getVMData("data.fieldValue");t!=this._getValue()&&(this._removeError(),this._setValue(t),this.$root.find("select").selectmenu(),this.$root.find("select").selectmenu("refresh"))}});return i}),define("src/components/forminput/view/BooleanView",["jquery","underscore","backbone","lightsaber.core","src/components/forminput/view/RadioView","src/components/forminput/view/FlipSwitchView","src/components/forminput/view/CheckboxView","src/components/forminput/view/SelectView"],function(e,t,i,n,s,a,o,r){var l=n.View.extend({publicMethods:["toggle"],_jqueryMobilePluginType:void 0,vmKeys:{"data.label":"label","data.legend":"legend","data.fieldValue":"fieldValue","data.defaultValue":"defaultValue","config.collectionViewModel":"collectionViewModel","config.optionsModelName":"optionsModelName","config.optionsValueFieldName":"optionsValueFieldName","config.optionsDisplayFieldName":"optionsDisplayFieldName"},initialize:function(){this._testModelItemsLength(),this.myControl=null},_testModelItemsLength:function(){var e=this.getConfig("optionsModelName")||this._getVMConfig("config.optionsModelName"),t=null,i=this.getConfig("CollectionViewModel");if(null!=i?t=i._getModel():null!=e&&(t=this.viewModel.models[e]),t&&2!=t.length)throw"boolean view can only get 2 values"},_getType:function(){return this.myControl._getType()},_getValue:function(){return this.myControl._getValue()},_setValue:function(e){return this.myControl._setValue(e)},_changed:function(e){this.myControl._changed(e)},toggle:function(){var e=this._getValue(),t=this.myControl.getData();if(null!=t&&null!=t.optionsData){var i=t.optionsData.items[0][t.optionsData.valueField];i==e&&(i=t.optionsData.items[1][t.optionsData.valueField])}else i=("false"==e)+"";this._setValue(i)},_enhanceMarkup:function(){this.$root.attr("id",this.cid)},_postRender:function(){var e=this.getConfig("viewType"),i=t.extend({},this.getConfig(),{root:null,el:null}),n={el:this.$el,viewModel:this.viewModel,config:i,attributes:this.attr(),vmKeys:this.vmKeys};switch(e){case"FlipSwitch":this.myControl=new a(n);break;case"Select":this.myControl=new r(n);break;case"Checkbox":this.getConfig("falseValue")||(n.config.falseValue="false"),this.myControl=new o(n);break;default:null==this._getVMData("data.defaultValue")&&(n.config.defaultValue="true"),this.myControl=new s(n)}this._jquery_mobile_plugin_type=this.myControl._jquery_mobile_plugin_type;var l=this;this.myControl.bind("all",function(e,t){l.trigger(e,t)}),this.$root=this.myControl.$root}});return l}),define("text!src/components/forminput/view/template/fileLoader_template.html",[],function(){return'<span class="uxf-fileloader">\n    <input data-uxf-point="fileLoader" type="<%=type%>" id="<%=id%>" name="<%=name%>" value="<%=value%>"/>\n</span>'}),define("src/components/forminput/view/FileLoaderView",["jquery","underscore","backbone","lightsaber.core","src/core/util/Utils","src/components/forminput/view/FormElementTouchpointBaseView","text!./template/fileLoader_template.html"],function(e,t,i,n,s,a,o){var r=a.extend({_jqueryMobilePluginType:void 0,events:{'change input[type="file"]':"_onFilesSelected"},_getType:function(){return"file"},_getElementTemplate:function(){return o},_onFilesSelected:function(e){var i=e.target;this.formData=i,this._setVMData("data.file",""),this.formData.uniqueId=t.uniqueId("formData"),this._setVMData("data.file",this.formData)}});return r.widgetName="uxf.uxffileloader",r}),define("text!src/components/searchinput/view/template/searchinput.html",[],function(){return'<div class="uxf-searchinput" data-role="<%=container%>" data-uxf-point="searchinput">\n	<label data-uxf-point="label" for="<%=inputId%>" class="<% if(labelIsHidden) { %>ui-hidden-accessible <% } %>"><%=label%>:</label>\n	<input type="search" data-uxf-point="input" name="<%=inputId%>" id="<%=inputId%>" <%=themeStr%> value="<%=value%>" data-inline="true" placeholder="<%=placeholder%>"/>\n</div>\n'}),define("src/components/searchinput/view/SearchInputViewBase",["jquery","underscore","lightsaber.core","text!./template/searchinput.html"],function(e,t,i,n){var s=i.View.extend({vmKeys:{"data.label":"label","data.value":"value","action.search":"search"},vmKeysChangeEvents:{"data.label":"refresh","data.value":"refresh"},_onKeyDown:function(t){if(13===t.keyCode){var i=e(t.currentTarget).val();this.viewModel.handleAction(this.vmKeys["action.search"],i)}},_onClear:function(){this._setVMData("data.value",null),this.trigger("search:input","")},onInput:function(e){this.trigger("search:input",e.target.value)},onBlur:function(e){this.trigger("search:blur",e)},config:{autoRender:!0,labelIsHidden:!0,placeholder:"Search",container:"",template:t.template(n),"data.label":"Search","data.value":""},initialize:function(){this.actionHandler=null},_createTemplateData:function(){var e=t.extend({inputId:t.uniqueId("search_")},this.getConfig()),i=null!=this.attr("theme")?this.attr("theme"):this.getConfig("theme");return e.themeStr=null!=i?'data-theme="'+i+'"':"",e},_postRender:function(){var e=i.Utils.isEventSupported("search:input");e?this.$el.on("input",'[data-uxf-point="input"]',t.bind(this.onInput,this)):this.$el.on("keyup",'[data-uxf-point="input"]',t.bind(this.onInput,this)),this.$el.on("keydown",'[data-uxf-point="input"]',t.bind(this._onKeyDown,this)),this.$el.on("input",'[data-uxf-point="input"]',t.bind(this.onInput,this)),this.$el.on("blur",'[data-uxf-point="input"]',t.bind(this.onBlur,this)),this.$el.on("vclick",".ui-input-clear",t.bind(this._onClear,this))},onChange:function(e){this.refresh(e)},refresh:function(){this.actionHandler=null,this._refresh()},onEnableChange:function(e){this.inputElement=this.$root.find('[data-uxf-point="input"]'),null!=this.inputElement&&(e.value?(this.$root.removeClass("ui-disabled"),this.inputElement.removeAttr("disabled")):(this.$root.addClass("ui-disabled"),this.inputElement.attr("disabled",!e.value)))}});return s}),define("src/components/searchinput/view/SearchInputView",["jquery","underscore","jquery.ui","src/components/searchinput/view/SearchInputViewBase","lightsaber.core","text!./template/searchinput.html"],function(e,t,i,n){var s=n.extend({_enhanceMarkup:function(e){e&&this.$root.autocomplete(e)}});return s}),define("text!src/components/itemlist/view/template/ItemListTemplate.html",[],function(){return'<div>\n	<ul data-uxf-point="uxf-itemlist"></ul>\n	<div class="listview-pagination"></div>\n</div>'}),define("text!src/components/itemlist/view/template/ItemTemplate.html",[],function(){return'<li data-uxf-point="ui-listitem" id="<%=item[idAttribute]%>"><a>(<%=item[idAttribute]%>) <%=item.name%></a></li>'}),define("text!src/components/itemlist/view/template/PaginationTemplate.html",[],function(){return" "}),define("text!src/components/pagination/view/template/PaginationTemplate.html",[],function(){return'<div id=\'pc\' class="uxf-pagination">\n<a data-uxf-point="paginationPrev" class="uxf-pagination-prev"></a>\n<div  style="display: inline" data-uxf-point="paginationGoto" class="uxf-pagination-goto"></div>\n<a data-uxf-point="paginationNext" class="uxf-pagination-next"></a>\n</div>'}),define("src/components/pagination/view/BasePaginationView",["jquery","underscore","lightsaber.core"],function(e,t,i){var n=i.View.extend({publicMethods:["hasPreviousPageSupport","createControl","generateNextControl","generatePrevControl","updateToolbar","enableControls","disableControls"],_showSinglePageNumbering:!1,initialize:function(){t.bindAll(this,"disableControls","updateGotoInner"),this.viewModel.on("items:loaded",this._updateControls,this),this.viewModel.on("items:paginated",this._updateControls,this),this.viewModel.on("items:refreshed",this._updateControls,this);var e=this.getConfig("showSinglePageNumbering");"undefined"!=typeof e&&(this._showSinglePageNumbering=e)},_postRender:function(){this.viewModel.off(null,this._updateControls,this),this.viewModel.on("items:loaded",this._updateControls,this),this.viewModel.on("items:paginated",this._updateControls,this),this.viewModel.on("items:refreshed",this._updateControls,this),this.controls=[],this.placeRoot(this._prepareControls());var e=this.viewModel.getData();this._updateControls(e)},hasPreviousPageSupport:function(){for(var e=0;e<this.controls.length;e++)if("paginationPrev"==this.controls[e].attr("data-uxf-point"))return!0;return!1},_prepareControls:function(){for(var i=null,n=["next","prev","goto"],s=e(this.getTemplate()),a=this.getConfig("controls"),o=[],r=0;r<a.length;r++)a[r].selector?i=e(a[r].selector):(i=e(this._getControlClass(a[r].control),s),o.push(a[r].control)),this.createControl(i,a[r]);return this._updateToolbarControls(s,t.difference(n,o)),s},createControl:function(e,t){switch(t.control){case"next":this.generateNextControl(e,t);break;case"prev":this.generatePrevControl(e,t);break;case"goto":this.generateGotoControl(e,t);break;default:console&&console.log("invalid control",t)}e.data("controlData",t),this.controls.push(e)},generateNextControl:function(e,t){var i=this.viewModel;e.on(t.event||"click",this.disableControls),e.disableCallback=t.disableCallBack||this.defaultDisableCallback,e.enableCallback=t.enableCallBack||this.defaultEnableCallback,e.attr("data-uxf-point","paginationNext"),e.html(t.text||"Next");var n={};n.error=t.errorCallBack,n.success=t.successCallBack,e.on(t.event||"click",function(){i.nextPage(1,n)})},generatePrevControl:function(e,t){var i=this.viewModel;e.on(t.event||"click",this.disableControls),e.disableCallback=t.disableCallBack||this.defaultDisableCallback,e.enableCallback=t.enableCallBack||this.defaultEnableCallback,e.attr("data-uxf-point","paginationPrev"),e.html(t.text||"Prev");var n={};n.error=t.errorCallBack,n.success=t.successCallBack,e.on(t.event||"click",function(){i.previousPage(1,n)})},_updateToolbarControls:function(e,t){for(var i=0;i<t.length;i++)this._removeToolbarControl(t[i],e);this.updateToolbar(e)},_removeToolbarControl:function(e,t){var i=this._getControlContainerClass(e);t.find(i).remove()},_updateControls:function(e){e.paginationInfo&&(this.enableControls(),this._updateNextControls(e.paginationInfo),this._updatePrevControls(e.paginationInfo),this.updateGotoControls(e.paginationInfo))},_updateNextControls:function(t){var i=this;e.each(this.controls,function(e,n){"paginationNext"==n.attr("data-uxf-point")&&(t.pageNum>=t.totalPages-1&&t.totalPages?(n.disableCallback(),"paginationNextContainer"==i.$root.attr("data-uxf-point")&&i.$root.hide()):(n.enableCallback(),"paginationNextContainer"==i.$root.attr("data-uxf-point")&&i.$root.show()),i._updateNextControlText(n,t))})},_updatePrevControls:function(t){var i=this;e.each(this.controls,function(e,n){"paginationPrev"==n.attr("data-uxf-point")&&(0==t.pageNum?(n.disableCallback(),"paginationPrevContainer"==i.$root.attr("data-uxf-point")&&i.$root.hide()):(n.enableCallback(),"paginationPrevContainer"==i.$root.attr("data-uxf-point")&&i.$root.show()))})},_getControlClass:function(e){switch(e){case"next":return'[data-uxf-point="paginationNext"]';case"prev":return'[data-uxf-point="paginationPrev"]';case"goto":return'[data-uxf-point="paginationGoto"]';default:return""}},_getControlContainerClass:function(e){switch(e){case"next":return'[data-uxf-point="paginationNextContainer"]';case"prev":return'[data-uxf-point="paginationPrevContainer"]';case"goto":return'[data-uxf-point="paginationGotoContainer"]';default:return""}},getTemplate:function(){},defaultDisableCallback:function(){this.hide()},defaultEnableCallback:function(){this.show()},updateToolbar:function(){},disableControls:function(){},enableControls:function(){},updateGotoInner:function(){},generateGotoControl:function(){},updateGotoControls:function(){},_updateNextControlText:function(){}});return n}),define("src/components/pagination/view/PaginationView",["jquery","underscore","lightsaber.core","text!./template/PaginationTemplate.html","src/components/pagination/view/BasePaginationView"],function(e,t,i,n,s){var a=s.extend({getTemplate:function(){var e=this.getConfig("toolbarTemplate")||t.template(n,{});return e},defaultDisableCallback:function(){this.hide()},defaultEnableCallback:function(){this.show()},disableControls:function(){e.each(this.controls,function(e,t){t.prop("disabled",!0)})},enableControls:function(){e.each(this.controls,function(e,t){t.prop("disabled",!1)})},_removeToolbarControl:function(e,t){var i=this._getControlContainerClass(e);t.find(i).remove()},generateGotoControl:function(e,t){e.pagesNum=t.pagesNum||5;this.viewModel;e.attr("data-uxf-point","paginationGoto");for(var i=0;i<e.pagesNum;i++)this.createGotoInner(e,t)},createGotoInner:function(t,i){var n=e(i.template||'<a class="uxf-pagination-page"></a>');n.attr("data-uxf-point","gotoInner");var s=this.viewModel,a={};a.success=i.successCallBack,a.error=i.errorCallBack,n.on(i.event||"click",function(){s.gotoPage(e(this).attr("pageNum"),a)}),this.updateGotoInner=i.updateGotoCallback||this.updateGotoInner,t.append(n)},updateGotoControls:function(t){var i=this;e.each(this.controls,function(n,s){if("paginationGoto"==s.attr("data-uxf-point")){var a=t.totalPages<s.pagesNum?t.totalPages:s.pagesNum,o=t.pageNum-Math.floor(a/2);o=0>o?0:o;var r=o+a-1;if(r>t.totalPages-1){var l=r-t.totalPages+1;r=t.totalPages-1,o-=l}var d=o,u=e('[data-uxf-point="gotoInner"]',s);u.removeClass("uxf-pagination-page-active"),1!==t.totalPages||i._showSinglePageNumbering?u.each(function(){d>r?e(this).hide():(t.pageNum==d&&e(this).addClass("uxf-pagination-page-active"),e(this).attr("pageNum",d++),i.updateGotoInner(this),e(this).show())}):u.hide()}})},updateGotoInner:function(t){e(t).html(parseInt(e(t).attr("pageNum"))+1)},_getControlContainerClass:function(e){switch(e){case"next":return'[data-uxf-point="paginationNext"]';case"prev":return'[data-uxf-point="paginationPrev"]';case"goto":return'[data-uxf-point="paginationGoto"]';default:return""}},_updateNextControls:function(t){var i=this;e.each(this.controls,function(e,n){"paginationNext"==n.attr("data-uxf-point")&&(t.pageNum>=t.totalPages-1?n.disableCallback():n.enableCallback(),i._updateNextControlText(n,t))})},_updatePrevControls:function(t){e.each(this.controls,function(e,i){"paginationPrev"==i.attr("data-uxf-point")&&(0==t.pageNum?i.disableCallback():i.enableCallback())})}});return a}),define("src/components/itemlist/view/BaseItemListView",["underscore","jquery","text!./template/ItemListTemplate.html","text!./template/ItemTemplate.html","text!./template/PaginationTemplate.html","lightsaber.core","src/components/pagination/view/PaginationView"],function(e,t,i,n,s,a,o){var r=a.View.extend({vmKeys:{"action.select":"select"},initialize:function(){this._initialize()},config:{itemUpdateHTMLFunction:function(){}},_postRender:function(){if(this.itemListElement=this._getItemListElement(),this._applyStyling(),this._setVisible(),this.getConfig("autoRender")){var e=this._getViewData(null);null!=e&&(this._load(e),this._handlePaginationControl(e.paginationInfo))}this._refreshListView()},_getItemListElement:function(){var e=this.$root.find('[data-uxf-point="uxf-itemlist"]');return e.length?e:(e=this.$root.find('[data-role="listview"]'),e.length?e:(e=this.$root.find("ul"),e.length?e:this.$root))},_initialize:function(){e.bindAll(this,"render","_add","_remove","_changed","_refresh","_load","_setVisible","_applyStyling","_refreshListView","_handleItem","_cleared","_enhanceMarkup","_select","_handlePage","_getItemListElement","_handlePaginationControl"),this.template=this.getConfig("template")||e.template(i),this.itemTemplate=this.getConfig("itemTemplate")||n,this.paginationTemplate=this.getConfig("paginationTemplate")||s,this.itemListElement=null,this.paginationView=null,this.viewModel.on("items:loaded",this._refresh,this),this.viewModel.on("items:emptied",this._cleared,this),this.viewModel.on("items:refreshed",this._refresh,this),this.viewModel.on("items:added",this._add,this),this.viewModel.on("items:changed",this._changed,this),this.viewModel.on("items:removed",this._remove,this),this.viewModel.on("items:paginated",this._handlePage,this)},_enhanceMarkup:function(){},_setVisible:function(){var e=this.viewModel.getConfig("visible"),t=this.viewModel.getConfig("enabled");0==e||0==t?this.$root.hide():this.$root.show()},_handlePage:function(e){var t=this._getViewData(e);this._handlePreloadPage(t),this._load(t),this._handlePaginationControl(t.paginationInfo),this._refreshListView()},_handlePaginationControl:function(e){if(null!=e&&null!=e.pageSize){if(null==this.paginationView){if(null==this.getConfig("paginationView")){var t=this.viewModel,i=this._getPaginationControlsConfiguration(),n={controls:i},s=this.getPaginationTemplate();s&&(n.toolbarTemplate=s),this.paginationView=new o({viewModel:t,config:n})}else this.paginationView=this.getConfig("paginationView");this.paginationView.render()}this._placePaginationControl()}},_refreshListView:function(){this._processTemplateViews()},_handlePreloadPage:function(){this.paginationView&&this.paginationView.hasPreviousPageSupport()&&this._cleared(!0)},_getPaginationControlsConfiguration:function(){return[{control:"next"}]},onVisibleChange:function(){this._setVisible()},onEnableChange:function(){this._setVisible()},configChanged:function(e){(e&&e.paginationView||this.itemListElement&&this.itemListElement.find('[data-uxf-point="ui-listitem"]').length>0)&&this._refresh()},onChange:function(){this._refresh()},_remove:function(e,i){var e=this._getViewData(e),n=null;if(e.sortedIndex)n=this.itemListElement.find('[data-uxf-point="ui-listitem"]').get(e.sortedIndex);else{var s=e.item[e.idAttribute];n=this.itemListElement.find("#"+s),0==n.length&&(n=this.itemListElement.find('[data-id="'+s+'"]'))}if(null!=n){n=t(n);var a=n.index();return n.remove(),i&&this._refreshListView(),a}},_changed:function(e){var t=this._getViewData(e);if(t.length){if(null!=t.paginationInfo&&null!=t.paginationInfo.pageSize)throw"Not supported";this._load(t)}else{var i=t.sortedIndex;t.sortedIndex=null;var n=this._remove(e,!0);n>-1&&(t.sortedIndex=null==i?n:i,this._add(e,t.sortedIndex))}},_add:function(e,i){var e=this._getViewData(e);if(null!=i&&(e.sortedIndex=i),null!=e.sortedIndex){var n=this.itemListElement.find('>[data-uxf-point="ui-listitem"]');e.sortedIndex<n.length&&(e.beforeElement=t(n.get(e.sortedIndex)))}this._handleItem(e),this._refreshListView()},_cleared:function(e){if(this.itemListElement.children().remove(),null==e||0==e){var t=this.$root.find(".listview-pagination");t.length&&t.hide()}},_load:function(e){for(var t=0;t<e.items.length;t++)this._handleItem({item:e.items[t],idAttribute:e.idAttribute})},_refresh:function(){this.paginationView&&this.paginationView.destroy(),this.paginationView=null,this._cleared();var e=this._getViewData(null);this._load(e),this._handlePaginationControl(e.paginationInfo),this._refreshListView()},_getViewData:function(t){var i=this.viewModel.viewModelType;if(null!=i&&"Collection"==i)return null!=t?t:this.viewModel.getData(t);var n=this.viewModel.defaultModel(),s=null;if(n&&(s=this.viewModel.models[n]),null!=s){var a;a=e.isUndefined(s.model)?s.idAttribute:s.model.idAttribute,null==a&&(a="id");var o={items:s.toJSON(),idAttribute:a};return o}return null},_handleItem:function(e){var i=t(this.getPopulatedTemplate(this.itemTemplate,e));return null==i.attr("data-uxf-point")&&i.attr("data-uxf-point","ui-listitem"),this.getConfig("itemUpdateHTMLFunction")(e,i,!1),null!=e.beforeElement?e.beforeElement.before(i):null!=e.afterElement?e.afterElement.after(i):null!=e.appendElement?e.appendElement.append(i):this.itemListElement.append(i),this._enhanceMarkup(i),i},_select:function(e){var i=t(e.target).closest('[data-uxf-point="ui-listitem"]');if(null!=i.attr("id")){this._handleEventOnSelect(e);var n=i.attr("id"),s={itemId:n,event:e};this.trigger("items:selected",s),this.viewModel.trigger("items:selected",s),this.viewModel.handleAction(this.vmKeys["action.select"],s)}else if(null!=i.attr("data-id")){this._handleEventOnSelect(e);var n=i.attr("data-id"),s={itemId:n,event:e};this.trigger("items:selected",s),this.viewModel.trigger("items:selected",s),this.viewModel.handleAction(this.vmKeys["action.select"],s)}},getPaginationTemplate:function(){return this.paginationTemplate},_placePaginationControl:function(){var e=this.$root.find(".listview-pagination"),t=this.itemListElement.find('[data-uxf-point="ui-listitem"]:last');e.length&&null!=t?e.insertAfter(t):this.itemListElement.append(this.paginationView.$root)},_applyStyling:function(){null!=this.attr("class")&&(this.addClass(this.attributes["class"]),this.itemListElement.addClass(this.attributes["class"]))},_handleEventOnSelect:function(){}});return r}),define("src/components/itemlist/view/ItemListView",["underscore","jquery","text!./template/ItemListTemplate.html","text!./template/ItemTemplate.html","lightsaber.core","src/components/itemlist/view/BaseItemListView"],function(e,t,i,n,s,a){var o=a.extend({events:{click:"_select","click .clickable":"_select"},_placePaginationControl:function(){var e=this.$root.find(".listview-pagination");e.length&&0==e.children().length&&e.append(this.paginationView.$root),e.show()},getPaginationTemplate:function(){return null},_getPaginationControlsConfiguration:function(){return[{control:"next",disableCallBack:function(){this.hide()},enableCallBack:function(){this.show()}},{control:"prev",disableCallBack:function(){this.hide()},enableCallBack:function(){this.show()}}]}});return o}),define("text!src/components/itemlist/view/template/GroupTemplate.html",[],function(){return'<li class="groupdivider"  data-uxf-point="uxf-listdivider">\nGrouped by: <%=item.groupName%>\n<ul class="groupedlist" data-uxf-point="uxf-itemlist">\n</ul>\n</li>\n'}),define("src/components/itemlist/view/BaseGroupedItemListView",["underscore","jquery","text!./template/ItemListTemplate.html","text!./template/ItemTemplate.html","lightsaber.core","src/components/itemlist/view/BaseItemListView","text!./template/GroupTemplate.html"],function(e,t,i,n,s,a,o){var r=a.extend({events:{vclick:"_select"},initialize:function(){this._initialize(),this.groupTemplate=this.getConfig("groupTemplate")||o,this.groupTemplate=e.template(this.groupTemplate)},_load:function(e){for(var t=0;t<e.items.length;t++){var i=null;if(0==t&&null!=e.paginationInfo&&null!=e.paginationInfo.pageSize&&e.paginationInfo.pageNum>0){var n=this._getLastItem(),s=this._getItemDivider(n),a=this._areDividersDOMAndDataEqual(s,{item:e.items[t]},e.idAttribute);a&&(i=n)}var o=e.items[t];this._addGroupWithItems(o,e.itemsListName,e.groupIdAttribute,e.idAttribute,null,i)}},_getViewData:function(e){return"function"==typeof this.viewModel.getData?this.viewModel.getGroupedData(e):null},_add:function(e){var t=this._getViewData(e.modelData),i=t.group;if(t.item){var n,s,a={item:t.item,idAttribute:t.idAttribute},o={item:i,idAttribute:t.idAttribute};if(null!=t.sortedIndex)var r=this._getItemFromListBySortIndex(t.sortedIndex);else r=null;if(null!=r)a.beforeElement=r,s=this._getItemDivider(r),o.beforeElement=s;else{var l=this._getLastItem();s=this._getItemDivider(l),a.afterElement=l}var n=this._handleAddGroup(o,s);null!=n&&(a.beforeElement=null,a.afterElement=null,a.appendElement=null,this._setGroupParentDOMElement(n,a));{this._handleItem(a)}}else this._addGroupWithItems(i,t.itemsListName,t.groupIdAttribute,t.idAttribute,t.sortedIndex);this._refreshListView()},_remove:function(e,i){var n=this._getViewData(e.modelData),s=n.group,a=-1;if(n.item){var o=null;if(null!=n.sortedIndex)o=this._getItemFromListBySortIndex(n.sortedIndex);else{var r=n.item[n.idAttribute];o=this.itemListElement.find("#"+r),0==o.length&&(o=this.itemListElement.find('[data-id="'+r+'"]'))}if(0==o.length)return;var l=this._getItemDivider(o);a=t(o).index(),o.remove(),this._hasInnerItems(l)||l.remove()}else{var r=s[n.groupIdAttribute],d=this.itemListElement.find("#"+r);if(0==d.length&&(d=this.itemListElement.find('[data-id="'+r+'"]')),!d.length)return;a=t(d).index(),this._removeGroup(d)}return i&&this._refreshListView(),a},_handleAddGroup:function(e,i){if(null!=i){var n=e.item.idAttribute,s=this._areDividersDOMAndDataEqual(i,e,n);if(s)return null}var a=t(this.getPopulatedTemplate(this.groupTemplate,e));return this.getConfig("itemUpdateHTMLFunction")(e,a,!0),null==a.attr("id")&&null!=e.idAttribute&&null!=e.item[e.idAttribute]&&a.attr("data-id",e.item[e.idAttribute]),null==a.attr("data-uxf-point")&&a.attr("data-uxf-point","uxf-listdivider"),null!=e.beforeElement?e.beforeElement.before(a):null!=e.afterElement?e.afterElement.after(a):this.itemListElement.append(a),this._enhanceMarkup(a),a},_removeGroup:function(e){for(;e.length;){var t=e.next();e.remove(),e=t;var i=e.attr("data-uxf-point");if(null!=i&&"uxf-listdivider"==i)return}},_getItemDivider:function(e){for(;e.length;){e=e.prev();var t=e.attr("data-uxf-point");if(null!=t&&"uxf-listdivider"==t)return e}},_getDividerByIndex:function(e){var i=this.itemListElement.find('[data-uxf-point="uxf-listdivider"]');return i.length>e?t(i[e]):null},_getGroupItems:function(e){for(var t=[],i=e.next();i.length;){var n=i.attr("data-uxf-point");if(null!=n&&"uxf-listdivider"==n)break;t[t.length]=i,i=i.next()}return t},_hasInnerItems:function(e){return e=e.next(),e.length?"uxf-listdivider"==e.attr("data-uxf-point")?!1:!0:!1},_getItemFromListBySortIndex:function(e){var i=this.itemListElement.find('[data-uxf-point="ui-listitem"]');return e<i.length?t(i.get(e)):null},_getLastItem:function(){var e=this.itemListElement.find('[data-uxf-point="ui-listitem"]').last();return e},_addGroupWithItems:function(e,t,i,n,s,a){var o={item:e,idAttribute:i};null!=s&&(o.beforeElement=this._getDividerByIndex(s));
var r={idAttribute:n};if(null==a){var l=this._handleAddGroup(o);this._setGroupParentDOMElement(l,r)}else r.afterElement=a;var d=e[t];if(d&&d.length>0)for(var u=0;u<d.length;u++)r.item=d[u],r.afterElement=this._handleItem(r)},_setGroupParentDOMElement:function(e,t){t.afterElement=e},_areGroupDOMElementsEqual:function(e,t){return e.contents().eq(0).text()==t.contents().eq(0).text()?!0:!1},_areDividersDOMAndDataEqual:function(e,i,n){if(null==e)return!1;if(null!=e.attr("id")&&n)return i.item[n]==e.attr("id");if(null!=e.attr("data-id")&&n)return i.item[n]==e.attr("data-id");var s=t(this.groupTemplate(i));return this._areGroupDOMElementsEqual(e,s)}});return r}),define("src/components/itemlist/view/GroupedItemListView",["underscore","jquery","text!./template/ItemListTemplate.html","text!./template/ItemTemplate.html","lightsaber.core","src/components/itemlist/view/BaseGroupedItemListView","text!./template/GroupTemplate.html"],function(e,t,i,n,s,a){var o=a.extend({events:{click:"_select",change:"_select"},_getItemDivider:function(e){var i=e.prevAll('[data-uxf-point="uxf-listdivider"]');if(i.length>1)return t(i.get(0));if(i.length)return i;for(;e.length;)if(e=e.parent(),"uxf-listdivider"==e.attr("data-uxf-point"))return e},_hasInnerItems:function(e){var t=e.find('[data-uxf-point="uxf-itemlist"]');if(!t.length){var i=e.next();return i.length?"uxf-listdivider"!=i.attr("data-uxf-point"):!1}return t.children().length>0},_setGroupParentDOMElement:function(e,t){var i=e.find('[data-uxf-point="uxf-itemlist"]');i.length?t.appendElement=i:(i=e.find("ul"),i.length?t.appendElement=i:t.afterElement=e)},_getDividerByIndex:function(e){var i=this.$root.find('[data-uxf-point="uxf-listdivider"]');return i.length>e?t(i[e]):null},_getItemFromListBySortIndex:function(e){var i=this.$root.find('[data-uxf-point="ui-listitem"]');return e<i.length?t(i.get(e)):null},_placePaginationControl:function(){var e=this.$root.find(".listview-pagination");e.length&&0==e.children().length&&e.append(this.paginationView.$root),e.show()},getPaginationTemplate:function(){return null},_getPaginationControlsConfiguration:function(){return[{control:"next",disableCallBack:function(){this.hide()},enableCallBack:function(){this.show()}}]}});return o}),define("src/components/navbar/viewmodel/NavBarViewModel",["underscore","lightsaber.core"],function(e,t){var i=t.ViewModel.extend({initialize:function(){e.each(this.subViewModels,function(e){e.on("user:action",function(e){this.handleUserAction(e)},this)},this)}});return i}),define("text!src_web/components/tabpanel/view/template/TabPanelTemplate.html",[],function(){return'<div class="uxf-tabpanel">\n	<ul data-uxf-point="uxf-tabs"></ul>\n</div>\n'}),define("text!src_web/components/tabpanel/view/template/TabTemplate.html",[],function(){return'<li>\n    <a href="#tabs-<%= id %>"><%= name %></a>\n</li>'}),define("src_web/components/tabpanel/view/TabPanelView",["jquery","underscore","lightsaber.core","text!./template/TabPanelTemplate.html","text!./template/TabTemplate.html"],function(e,t,i,n,s){var a=i.View.extend({publicMethods:["position","addToPane","addTab","addTabs","getPane","select"],config:{idAttribute:"id",visible:!0,enabled:!0,position:"top"},idAttribute:"id",template:n,tabTemplate:s,selected:void 0,initialize:function(){this.template=this.getConfig("template")||this.template,this.tabTemplate=t.template(this.getConfig("tabTemplate")||this.tabTemplate),this.idAttribute=this.getConfig("idAttribute")||this.idAttribute,this.setConfig("enabled",this.getConfig("enabled")&&this.viewModel.getConfig("enabled")),this.setConfig("visible",this.getConfig("visible")&&this.viewModel.getConfig("visible")),this.viewModel.on("items:loaded",this._load,this),this.viewModel.on("items:added",this._add,this)},_handleSubViews:function(){this.subViews&&(this.navSubViews=this.subViews)},_load:function(e){this.tabsData=[],this._empty(),this._handleTemplate(),this.addTabs(e)},_add:function(e){this._emptyTabs(),this.addTabs(e)},position:function(){},_postRender:function(){this.$tabs=this.$("ul"),this.$root=this.$tabs.parent(),this.$tabs=this.$root.find("ul"),this._load()},addTab:function(e){this._add(e)},_addTab:function(t){var i=e.data(this.$root.get()[0],"ui-tabs");if(i){var n=this.tabTemplate({id:t[this.idAttribute]||t.code,name:t.name});this.$root.find('> [data-uxf-point="uxf-tabs"]').append(n),this.$root.find('[data-uxf-point="uxf-tabs"]').after('<div id="tabs-'+(t[this.idAttribute]||t.code)+'"></div>'),this.$root.tabs("refresh")}else this.$root.tabs("add","#tabs-"+(t[this.idAttribute]||t.code),t.name)},addTabs:function(e){for(var i,i=this._transformData(e),n=0,s=i.length;s>n;n++)this.tabsData.push(i[n]);this.$root.off("tabsbeforeactivate").on("tabsbeforeactivate",t.bind(this._handleSelect,this)),this.$root.off("tabsshow").on("tabsshow",t.bind(this._handleSelect,this)),this.$root.tabs();for(var n=0,s=this.tabsData.length;s>n;n++)this._addTab(this.tabsData[n]);this._makeSelection(i),this._handleVisibleAndEnable()},_transformData:function(e){var t;return e=e||this.viewModel.getData()||this.viewModel.get(),t=e&&e.item?e.item:e&&!e.items?e:e&&e.items?e.items:[],"[object Array]"!==Object.prototype.toString.call(t)&&(t=new Array(t)),t},_makeSelection:function(e){var t=e&&e[0],i=this.getConfig("selected")||t&&(t[this.idAttribute]||t.code||t.name);this.select(i)},_handleVisibleAndEnable:function(){this.getConfig("enabled")?this._enableTabs():this._disableTabs(),this.getConfig("visible")||this.$root.hide()},getPane:function(e){var t="#tabs-"+e;return this.$(t)},addToPane:function(e,t){var i=this.getPane(e);i.append(t)},_empty:function(){this.$root&&this.$root.empty()&&this.$root.remove()},_emptyTabs:function(){this.$root&&this.$root.find('> [data-uxf-point="uxf-tabs"]').empty()},select:function(t){if(this.selected!=t){var i=e.data(this.$root.get()[0],"ui-tabs");if(i){var n=this.$root.find("li").index(this.$root.find('[aria-controls="tabs-'+t+'"]'));this.$root.tabs("option","active",n)}else{var n=this.$root.find("li").index(this.$root.find('li > a[href="#tabs-'+t+'"]').parent());this.$root.tabs("select",n)}}},_handleSelect:function(t,i){if(void 0!=i.tab){var n=e(i.tab).attr("href").substr(6);this._selectTab(n)}else if(void 0!=i.newTab){var n=e(i.newTab).attr("aria-controls").split(" ")[0].substr(5);this._selectTab(n)}t.stopPropagation()},_selectTab:function(e){this.selected!=e&&(this.selected=e,this._selectPane(e),this.trigger("tab:selected",e))},_selectPane:function(e){var t=this.$('[id="tabs-'+e+'"]');t.show()},_disableTabs:function(){this.$root.off("tabsshow"),this.$root.off("tabsbeforeactivate"),this.$root.tabs("disable"),this.$root.addClass("ui-state-disabled")},_enableTabs:function(){this.$root.tabs("enable"),this.$root.removeClass("ui-state-disabled"),this.$root.off("tabsshow").on("tabsshow",t.bind(this._handleSelect,this)),this.$root.off("tabsbeforeactivate").on("tabsbeforeactivate",t.bind(this._handleSelect,this))},onEnableChange:function(e){this.setConfig("enabled",this.getConfig("enabled")&&this.viewModel.getConfig("enabled")),e.value===!0?this._enableTabs():this._disableTabs()}});return a}),define("src_web/components/navbar/view/NavBarView",["underscore","lightsaber.core","src_web/components/tabpanel/view/TabPanelView"],function(e,t,i){var n=i.extend({_postRender:function(){var e="block";if("vertical"!==this.getConfig("orientation")&&(e="inline"),this.$tabs=this.$("ul"),this.$root=this.$tabs.parent(),this.$tabs=this.$root.find("ul"),this.navSubViews&&this.navSubViews.length)for(var t=0,i=this.navSubViews.length;i>t;t++){var n=$('<li style="display: '+e+';"></li>').append(this.navSubViews[t].viewInstance.$el);this.$tabs.append(n)}else this._load()},_processSubViews:function(){for(var e=0,t=this.navSubViews.length;t>e;e++){var i=$("<li></li>").append(this.navSubViews[e].viewInstance.$el.attr("data-corners",!1));this.$tabs.append(i)}this.$root.trigger("create")}});return n}),define("src/components/navbar/viewmodel/SubNavBarViewModel",["underscore","lightsaber.core"],function(e,t){var i=t.ViewModel.extend({initialize:function(){this.subViewModels.button.on("user:action",function(e){this.trigger("user:action",e)},this)}});return i}),define("src_web/components/navbar/view/SubNavBarView",["underscore","src_web/components/navbar/view/NavBarView"],function(e,t){var i=t.extend({tagName:"ul",initialize:function(e){var t=this.getConfig("subViews");if(!t.button||!t.submenu)throw new Error("Lightsaber.SubNavBarView: 'button' and 'submenu' subviews should be specified");this._subMenuDetails=t.submenu,this.subViews=[t.button],this.setConfig("subViews",this.subViews),this._super(e)},_postRender:function(){var i=new t(e.extend({viewModel:this.viewModel,tagName:"ul"},this._subMenuDetails));this.$root.children("li").append(i.$root)}});return i}),define("text!src/components/chart/view/template/labelTemplate.html",[],function(){return'<span style="font-weight: bold;" class="uxf-label"><%=value%></span>'}),define("text!src/components/chart/view/template/xAxisLabelTemplate.html",[],function(){return'<span style="font-weight: bold;"><%=value%></span>'}),define("src/components/chart/view/ChartView",["jquery","underscore","highcharts","lightsaber.core","text!./template/labelTemplate.html","text!./template/xAxisLabelTemplate.html"],function(e,t,i,n,s,a){var o=n.View.extend({publicMethods:["getChartObject","setShowPointLabels","setShowXAxisLabels","setShowYAxisLabels"],events:{},vmKeys:{"data.series":"series","data.axisLabels":"axisLabels","data.labels":"labels","data.lines":"lines","data.generic":"data"},vmKeysChangeEvents:{"data.series":"render","data.axisLabels":"render","data.labels":"render","data.lines":"render","data.generic":"render"},config:{autoRender:!1},isChartConfig:!1,initialize:function(){if(t.bindAll(this),"undefined"!=typeof this.getConfig("chartConfig"))return void(this.isChartConfig=!0);this.dataLabelFormatter=this.getConfig("dataLabelFormatter"),null==this.dataLabelFormatter&&(this.labelTmpl=this.getConfig("labelTmpl")||s,this.labelTmpl=t.template(this.labelTmpl)),this.xAxisLabelFormatter=this.getConfig("xAxisLabelFormatter"),this.yAxisLabelFormatter=this.getConfig("yAxisLabelFormatter"),null==this.xAxisLabelFormatter&&(this.xAxisLabelTmpl=this.getConfig("xAxisLabelTmpl")||a,this.xAxisLabelTmpl=t.template(this.xAxisLabelTmpl)),this.dataLabelPositionY=this.getConfig("dataLabelPositionY"),this.plotLinesY=[],this.plotLinesX=[],null==this._getVMData("data.series")&&0==this.viewModel.getDataBinding().length&&this.viewModel.models&&this.viewModel.models.items&&(this.viewModel.dataBindings=[{axisLabels:"models.items.axisLabels",options:{setOnBind:!0}},{series:"models.items.series",options:{setOnBind:!0}},{labels:"models.items.labels",options:{setOnBind:!0}},{lines:"models.items.lines",options:{setOnBind:!0}}],this.viewModel._bindData());var e=this.getConfig("highChartsConfig");this.origSeriesConfig=void 0!=e&&(void 0!=e.series||void 0!=e.plotOptions&&void 0!=e.plotOptions.series),(void 0!==this._getVMData("data.series")||this.origSeriesConfig)&&this.render()},_preRender:function(){if(!this.isChartConfig&&this._getVMData("data.series")){if(this.graphRoot=this.$el,this.chartType=this.getConfig("chartType"),void 0==this.chartType){if(void 0==this.getConfig("barDirection")||"vertical"==this.getConfig("barDirection"))this.barDirection="column";else{if("horizontal"!=this.getConfig("barDirection"))throw"bar direction is wrong!";this.barDirection="bar"}this.chartType=this.barDirection}this.mySereies=this._getSeries();var e=void 0!=this.getConfig("lines")?this.getConfig("lines"):this._getVMData("data.lines");for(var t in e)this._addLine(e[t]);this.xAxisShowTicks=this.getConfig("showXAxisLabels"),this.yAxisShowTicks=this.getConfig("showYAxisLabels"),this.pointLabelsShow=this.getConfig("showPointLabels"),this.xAxislineWidth=void 0!=this.getConfig("xAxislineWidth")?this.getConfig("xAxislineWidth"):1,this.yAxislineWidth=void 0!=this.getConfig("yAxislineWidth")?this.getConfig("yAxislineWidth"):0,this.showXAxisLine=void 0!=this.getConfig("showXAxisLine")?this.getConfig("showXAxisLine"):!0,this.showYAxisLine=void 0!=this.getConfig("showYAxisLine")?this.getConfig("showYAxisLine"):!1,this.stackingFlag=this.getConfig("stackSeries")?"normal":void 0,this.pointLabelStyle=this.getConfig("pointLabelStyle"),this.axisLabelStyle=this.getConfig("axisLabelStyle"),this.preventLegendClick=void 0!=this.getConfig("preventLegendClick")?this.getConfig("preventLegendClick"):!1}},_getSeries:function(){var t,i=this._getVMData("data.series"),n=this.getConfig("seriesColors");void 0!=this.graphRoot.attr("data-series-color")&&(n=this.graphRoot.attr("data-series-color").split(","));var s=this.getConfig("seriesName"),a=[];this.barWidth=this.getConfig("barWidth"),void 0!=this.graphRoot.attr("data-bar-width")&&(this.barWidth=this.graphRoot.attr("data-bar-width"));var o=this.getConfig("slicedIndex"),r=this._getVMData("data.axisLabels");if(r=r?r:[],0==this.origSeriesConfig){for(var l=0;l<i.length;l++){var d=this._getColor(n,l);a.push(e.isArray(i[l])?{data:i[l],color:d,name:void 0!=s?s[l]:s}:{y:i[l],color:d,name:"pie"==this.chartType&&r[l]?r[l]:void 0,sliced:"pie"==this.chartType&&l==o?!0:!1})}t="pie"==this.chartType?[{type:"pie",data:a}]:e.isArray(i[0])?a:[{data:a,name:void 0!=s?s[0]:void 0}]}return t},_postRender:function(){if(this.isChartConfig)return void this._createGenericHighchartsChart();if(this._getVMData("data.series")){var e=this._getElementSelector();void 0!==this.chart&&this.chart.destroy();var t=this.getConfig("highchartcallback");this.chart=new Highcharts.Chart(this._getHighChartObject(e),t);{this.getConfig("highChartsConfig")}}},_getHighChartObject:function(t){var i=e.extend(!0,{},this.getConfig("highChartsConfig"));return void 0==i&&(i={}),this._setChartOptions(i,t),this._setTitleOptions(i),this._setLegendOptions(i),this._setPlotOptions(i),this._setXAxisOptions(i),this._setYAxisOptions(i),this._setSeriesOptions(i),this._setTooltipOptions(i),this._setCreditsOptions(i),i},_setChartOptions:function(e,t){void 0==e.chart&&(e.chart={}),void 0==e.chart.renderTo&&(e.chart.renderTo=t),void 0==e.chart.type&&(e.chart.type=this.chartType),void 0==e.chart.backgroundColor&&(e.chart.backgroundColor=void 0==this.getConfig("backgroundColor")?null:this.getConfig("backgroundColor"))},_setTitleOptions:function(e){void 0==e.title&&(e.title=void 0!=this.getConfig("title")?this.getConfig("title"):{text:""})},_setLegendOptions:function(e){void 0==e.legend&&(e.legend=void 0!=this.getConfig("legend")?this.getConfig("legend"):{enabled:!1})},_setPlotOptions:function(e){void 0==e.plotOptions&&(e.plotOptions=null!=this.getConfig("plotOptions")?this.getConfig("plotOptions"):{}),void 0==e.plotOptions.series?e.plotOptions.series={}:void 0!=this._getVMData("data.series")&&(e.series=void 0),void 0==e.plotOptions.series.events&&(e.plotOptions.series.events={});var t=this;void 0==e.plotOptions.column&&(e.plotOptions.column={}),void 0==e.plotOptions.column.events?(e.plotOptions.column.events={},e.plotOptions.column.events.legendItemClick=function(){return!t.preventLegendClick}):void 0==e.plotOptions.column.events.legendItemClick&&(e.plotOptions.column.events.legendItemClick=function(){return!t.preventLegendClick}),void 0==e.plotOptions.series.events.click&&(e.plotOptions.series.events.click=function(e){t.trigger("barChartData:clicked",e,e.currentTarget.index,e.point.x,e.point.y)}),void 0==e.plotOptions[this.chartType]&&(e.plotOptions[this.chartType]={}),void 0==e.plotOptions[this.chartType].stacking&&(e.plotOptions[this.chartType].stacking=this.stackingFlag),void 0==e.plotOptions[this.chartType].pointWidth&&(e.plotOptions[this.chartType].pointWidth=this.barWidth),void 0==e.plotOptions[this.chartType].shadow&&(e.plotOptions[this.chartType].shadow=void 0!=this.getConfig("shadow")?this.getConfig("shadow"):!1),void 0==e.plotOptions[this.chartType].borderWidth&&(e.plotOptions[this.chartType].borderWidth=void 0!=this.getConfig("borderWidth")?this.getConfig("borderWidth"):0),void 0==e.plotOptions[this.chartType].dataLabels&&(e.plotOptions[this.chartType].dataLabels={}),void 0==e.plotOptions[this.chartType].dataLabels.enabled&&(e.plotOptions[this.chartType].dataLabels.enabled=this.pointLabelsShow),void 0==e.plotOptions[this.chartType].dataLabels.y&&(e.plotOptions[this.chartType].dataLabels.y=this.dataLabelPositionY),void 0==e.plotOptions[this.chartType].showInLegend&&(e.plotOptions[this.chartType].showInLegend=this.getConfig("legend")),void 0==e.plotOptions[this.chartType].dataLabels.formatter&&(e.plotOptions[this.chartType].dataLabels.formatter=null!=this.dataLabelFormatter?this.dataLabelFormatter:function(){var e=t._getStyle(t.pointLabelStyle,this.point.x);return null!=this.point.y?null!=e?'<span style="'+e+'">'+this.point.y+"</span>":t.labelTmpl({value:this.point.y}):void 0})},_setXAxisOptions:function(e){void 0==e.xAxis&&(e.xAxis=null!=this.getConfig("xAxis")?this.getConfig("xAxis"):{}),void 0==e.xAxis.title&&(e.xAxis.title={}),void 0==e.xAxis.title.text&&(e.xAxis.title.text=this.getConfig("xAxisTitle")),void 0==e.xAxis.type&&(e.xAxis.type=this.getConfig("xAxisType")),void 0==e.xAxis.categories&&(e.xAxis.categories=this._getVMData("data.axisLabels")),void 0==e.xAxis.labels&&(e.xAxis.labels={}),void 0==e.xAxis.labels.rotation&&(e.xAxis.labels.rotation=this.getConfig("xRotation")),void 0==e.xAxis.labels.enabled&&(e.xAxis.labels.enabled=this.xAxisShowTicks);var t=this;void 0==e.xAxis.labels.formatter&&(e.xAxis.labels.formatter=null!=this.xAxisLabelFormatter?this.xAxisLabelFormatter:function(){var e=0,i=null!=t.viewModel.get("axisLabels")?t.viewModel.get("axisLabels").length:0;return"datetime"!=t.getConfig("xAxisType")?function(){var n=t._getStyle(t.axisLabelStyle,e%i);return e++,null!=n?'<span style="'+n+'">'+this.value+"</span>":t.xAxisLabelTmpl({value:this.value})}:void 0}()),void 0==e.xAxis.stackLabels&&(e.xAxis.stackLabels={}),void 0==e.xAxis.stackLabels.enabled&&(e.xAxis.stackLabels.enabled=!0),void 0==e.xAxis.plotLines&&(e.xAxis.stackLabels.plotLines=this.plotLinesX),void 0==e.xAxis.lineWidth&&(e.xAxis.stackLabels.lineWidth=this.showXAxisLine?this.xAxislineWidth:0)},_setYAxisOptions:function(e){void 0==e.yAxis&&(e.yAxis=null!=this.getConfig("yAxis")?this.getConfig("yAxis"):{}),void 0==e.yAxis.title&&(e.yAxis.title={}),void 0==e.yAxis.title.text&&(e.yAxis.title.text=this.getConfig("yAxisTitle")),void 0==e.yAxis.stackLabels&&(e.yAxis.stackLabels={}),void 0==e.yAxis.stackLabels.enabled&&(e.yAxis.stackLabels.enabled=!0);var t=this;void 0==e.yAxis.stackLabels.formatter&&(e.yAxis.stackLabels.formatter=null!=this.dataLabelFormatter?this.dataLabelFormatter:function(){var e=t._getStyle(t.pointLabelStyle,this.x),i=this.total;return null!=i?(i=Highcharts.numberFormat(i,1),null!=e?'<span style="'+e+'">'+i+"</span>":t.labelTmpl({value:i})):void 0}),void 0==e.yAxis.gridLineWidth&&(e.yAxis.gridLineWidth=void 0!=this.getConfig("yGridLineWidth")?this.getConfig("yGridLineWidth"):0),void 0==e.yAxis.labels&&(e.yAxis.labels={}),void 0==e.yAxis.labels.enabled&&(e.yAxis.labels.enabled=this.yAxisShowTicks),void 0==e.yAxis.labels.rotation&&(e.yAxis.labels.rotation=this.getConfig("yRotation")),void 0==e.yAxis.labels.formatter&&(e.yAxis.labels.formatter=null!=this.yAxisLabelFormatter?this.yAxisLabelFormatter:null),void 0==e.yAxis.plotLines&&(e.yAxis.plotLines=this.plotLinesY),void 0==e.yAxis.lineWidth&&(e.yAxis.lineWidth=this.showYAxisLine?function(){return 0==t.yAxislineWidth?1:t.yAxislineWidth}():0)},_setSeriesOptions:function(e){void 0==e.series&&(e.series=this.mySereies)},_setTooltipOptions:function(e){void 0==e.tooltip&&(e.tooltip=void 0!=this.getConfig("tooltip")?this.getConfig("tooltip"):{}),void 0==e.tooltip.formatter&&(e.tooltip.formatter=function(){return!1})},_setCreditsOptions:function(e){void 0==e.credits&&(e.credits=void 0!=this.getConfig("credits")?this.getConfig("credits"):{}),void 0==e.credits.enabled&&(e.credits.enabled=!1)},_getStyle:function(e,t){if(null!=e){for(var i=0;i<e.length;i++)if(e[i].barIndex==t)return e[i].newStyle;return null}return null},_addLine:function(e){var t={value:e.coordinate,width:void 0==e.width?"3":e.width,color:void 0==e.color?"black":e.color,dashStyle:void 0!=e.lineType?"dash":e.lineType,label:{text:void 0==e.label?"":e.label.text,style:void 0==e.label?"":e.label.style},zIndex:void 0!=e.zIndex?e.zIndex:1001};"y"==e.axis||void 0==e.axis?this.plotLinesY.push(t):this.plotLinesX.push(t)},_getColor:function(t,i){var n=null;return null!=t&&e.isArray(t)&&(n=t.length>1?t[i]:t[0]),n},getChartObject:function(){return this.chart},setShowPointLabels:function(e){if(this.isChartConfig)throw new Error("Method not supported in SA mode");this.pointLabelsShow=e},setShowYAxisLabels:function(e){if(this.isChartConfig)throw new Error("Method not supported in SA mode");this.yAxisShowTicks=e},setShowXAxisLabels:function(e){if(this.isChartConfig)throw new Error("Method not supported in SA mode");this.xAxisShowTicks=e},_createGenericHighchartsChart:function(){if(this._getVMData("data.generic")){void 0!==this.chart&&this.chart.destroy();var e=this.getConfig("highchartcallback");this.chart=new Highcharts.Chart(this._getGenericHighChartObject(),e)}},_getGenericHighChartObject:function(){var t=e.extend(!0,{},this.getConfig("chartConfig"));return"undefined"==typeof t&&(t={}),t=e.extend({},t,this._getVMData("data.generic")),void 0===t.chart.renderTo&&(t.chart.renderTo=this._getElementSelector()),t},_getElementSelector:function(){var e=this.$el.selector;if(!e){var i=t.uniqueId("chart_");this.$el.attr("id",i),e=i}return"#"==e.charAt(0)&&(e=e.substring(1)),e},destroy:function(){var e=this.getChartObject();e&&e.destroy()}});return o}),define("src/components/proxy/viewmodel/ProxyViewModel",["jquery","underscore","lightsaber.core"],function(e,t,i){var n=i.ViewModel.extend({model:null,isTransactional:!1,initialize:function(e){if(!e.model)throw new Error("model property in options is mandatory!");this.model=e.model,this.isTransactional=this.getConfig("transactional")||this.isTransactional;var t=this;this.model.on("destroy",function(){t.trigger("model:destroy")}),this.model.on("error",this._error,this),this._setWorkingModel()},_error:function(e,t){this.trigger("model:error",t)},get:function(e){return this.workingModel.get(e)},set:function(e,t,i){return this.workingModel.set(e,t,i)},unset:function(e,t){return this.workingModel.unset(e,t)},commit:function(){this.isTransactional&&this.model.set(this.workingModel.get())},commitAndSave:function(e,t){this.commit(),this.model.save(e,t)},fetch:function(e){this.model.fetch(e)},save:function(e,t){this.model.save(e,t)},rollback:function(){this._setWorkingModel(),this.trigger("model:refresh")},destroy:function(e){this.workingModel=null,this.model.destroy(e)},_setWorkingModel:function(){this.workingModel=this.isTransactional?new i.Model(this.model.get()):this.model}});return n}),define("text!src/components/form/view/template/formCollapsible.html",[],function(){return'<fieldset class="uxf-formcollapsible"><legend><b><span data-uxf-point="openFields"></span><%=key%></b></legend>	\n	<div id="<%=divId%>" type="<%=type%>">\n			\n			<div style="display: none" class="collapsible" id="collapse_<%=divId%>">\n						\n					<div class="myObject">\n						<small><span data-uxf-point="myButtons" ></span></small>\n						<table><tbody data-uxf-point="myFields" ></tbody></table>\n						<div data-uxf-point="myObjects" ></div>\n					</div>\n			</div>\n	</div>\n</fieldset>\n'}),define("text!src/components/form/view/template/elementTemplate.html",[],function(){return'<tr id="<%=divId%>" key="<%=key%>">\n<td nowrap>\n	<span data-uxf-point="myButtons" ></span>\n</td>\n<td width="100%">\n	<div data-uxf-point="myInputElement" ></div>\n</td>\n</tr>'}),define("text!src/components/form/view/template/addNewField.html",[],function(){return'<div class="myAddFieldForm">\n	<div>\n		<div data-uxf-point="myKeyField" ></div>\n		<div data-uxf-point="myFieldOptions" ></div>\n	</div>\n	<div data-uxf-point="mySubmitButton" ></div>\n</div>'}),define("text!src/components/form/view/template/errorMessages.html",[],function(){return'<div data-uxf-point="errorMessage" style="display:none" class="uxf-error LS-error">\n	<fieldset><label>Error</label>\n	<div data-uxf-point="errorMessageText" ></div>\n	</fieldset>\n</div>'}),define("src/components/popup/view/PopupView",["jquery","underscore","lightsaber.core"],function(e,t,i){var n=i.View.extend({publicMethods:["close","show"],innerData:"",config:{autoRender:!1,autoShow:!0,blankContent:"<div id = 'blankContent'></div>"},initialize:function(){t.bindAll(this,"render","show","destroy","close")},render:function(){var e=this;this._prepareData(),this.innerData.open=function(){e._prepareHeader(this),e.getConfig("open")&&e.getConfig("open")(this)},this.getConfig("autoShow")&&this.show()},_prepareData:function(){var t=this.viewModel.get(),i=this.getConfig();this.innerData=e.extend({},i,t);var n=this.getConfig("createContent");if(n){var n=n(this);n&&(this.innerData.blankContent=n)}},_prepareHeader:function(t){var i=e(t).parent().children().first();this.innerData.closeIcon===!1&&i.addClass("dialogui-custom"),this.innerData.closeIcon?e(".ui-icon-closethick",i).addClass(this.innerData.closeIcon):this.innerData.closeText&&(e(".ui-icon",i).text(this.innerData.closeText),this.innerData.closeTitle||e(".ui-dialog-titlebar-close",i).attr("title",this.innerData.closeText)),this.innerData.closeTitle&&e(".ui-dialog-titlebar-close",i).attr("title",this.innerData.closeTitle)},show:function(){this.getConfig("createContent")&&this.$el.html(this.innerData.blankContent),this.$el.dialog(this.innerData),this.$el.attr("data-loaded","true"),this.trigger("popup:show")},destroy:function(){"true"===this.$el.attr("data-loaded")&&(this.$el.attr("data-loaded","false"),this.$el.dialog("destroy"))},close:function(){if("true"===this.$el.attr("data-loaded")){this.$el.attr("data-loaded","false");var e=this.$el.dialog("destroy");e.remove()}}});return n}),define("src/components/form/view/BaseFormView",["underscore","text!./template/formCollapsible.html","text!./template/elementTemplate.html","text!./template/addNewField.html","text!./template/errorMessages.html","lightsaber.core","src/components/forminput/view/InputTextView","src/components/forminput/view/CheckboxView","src/components/forminput/view/SelectView","src/components/popup/view/PopupView","src/components/button/view/ButtonView"],function(e,t,i,n,s,a,o,r,l,d,u){var h=a.View.extend({publicMethods:["refresh"],config:{formCollapsibleTemplate:t,addNewFieldTemplate:n,elementTemplate:i,errorMessageTemplate:s,showDeleteButtons:!0,showAddButtons:!0},initialize:function(){e.bindAll(this),this.viewModel.on("change:config:enabled",this.onEnableChange),this.viewModel.on("model:refresh",this.refresh),this.viewModel.on("model:error",this.error),this.showDeleteButtons=this.getConfig("showDeleteButtons"),this.showAddButtons=this.getConfig("showAddButtons"),this.formTemplate=e.template(this.getConfig("addNewFieldTemplate"))({}),this.errorMessageTemplate=e.template(this.getConfig("errorMessageTemplate"))({}),this.fieldTypes=[{name:"string",value:"string"},{name:"number",value:"number"},{name:"boolean",value:"boolean"},{name:"array",value:"array"},{name:"object",value:"object"}],this.excludeFields=this.getConfig("excludeFields"),this.formCollapsibleLabel=this.getConfig("formCollapsibleLabel")||"Fields"},render:function(){var e=$("<div></div>");this.placeRoot(e),this.$root.append(this.getConfig("errorMessageTemplate"));var t=this.viewModel.get();t=this._handleExcludeFields(t),this._createCollapsibleElement(e,t,this.formCollapsibleLabel,null,"object"),this.getConfig("buttons")&&this._generateFormControllers(this.getConfig("buttons"));var i=!this.viewModel.getConfig("enabled");i&&this._formEnableChange(this.$root,i),this._enhanceMarkup(this.$root)},refresh:function(){this.$root.empty(),this.render()},deleted:function(){this.$root.empty(),this.trigger("form:emtpy")},error:function(e){var t=e;null!=e.statusText&&(t=e.statusText),this.$root.find("[data-uxf-point='errorMessageText']").append(t+"<br>"),this.$root.find("[data-uxf-point='errorMessageText']").focus(),this.$root.find("[data-uxf-point='errorMessage']").show()},_clearError:function(){this.$root.find("[data-uxf-point='errorMessage']").hide(),this.$root.find("[data-uxf-point='errorMessageText']").empty()},onEnableChange:function(e){this.$root&&this._formEnableChange(this.$root,!e.value)},_generateFormControllers:function(e){var t=this._getFormControllerHTMLElement(e);for(var i in e){var n=null;e[i].submit?n=this._createInputButtonController({label:e[i].submit,tagType:"submit",actionHandler:this.submitButtonHandler}):e[i].cancel?n=this._createInputButtonController({label:e[i].cancel,actionHandler:this.cancelButtonHandler}):e[i].fetch?n=this._createInputButtonController({label:e[i].fetch,actionHandler:this.fetchButtonHandler}):e[i]["delete"]&&(n=this._createInputButtonController({label:e[i]["delete"],actionHandler:this.deleteButtonHandler})),t.append(n.$root)}this.$root.append(t)},_createInputButtonController:function(e){var t=e&&e.label,i=e&&e.tagType||"button",n=e&&e.actionHandler;return new u({viewModel:new a.ViewModel({data:{label:t},config:{actions:{click:n}}}),config:{tagName:"input",tagType:i,wrapper:this._getButtonWrapper()}})},_initializeFieldOptionsForm:function(e){var t=$(this.formTemplate),i="create"==e.get("method"),n=(new o({viewModel:new a.ViewModel({data:{label:"Key: "},models:{textModel:e},dataBindings:[{fieldValue:"models.textModel.key",options:{setOnBind:!0,twoWay:!0}}],config:{visible:i}}),el:t.find("[data-uxf-point='myKeyField']")}),new a.ViewModel({data:{label:"Type: "},models:{items:this.fieldTypes,textModel:e},config:{optionsModelName:"items"},dataBindings:[{fieldValue:"models.textModel.fieldType",options:{setOnBind:!0,twoWay:!0}}]})),s=(new l({viewModel:n,el:t.find("[data-uxf-point='myFieldOptions']")}),this._createInputButtonController({label:"Create",actionHandler:this._createFieldHandler}));return s.$root.attr("rel","close"),t.find("[data-uxf-point='mySubmitButton']").append(s.$root),t},_createModelMembers:function(e,t,i,n){var s=e.find("[data-uxf-point='myFields']").first(),a=e.find("[data-uxf-point='myObjects']").first();for(var o in t){var r;if(r=null!=i?i+"."+o:o,null==t[o])this._createInputTextElement(s,t[o],o,null,r,n);else if("string"==typeof t[o])this._createInputTextElement(s,t[o],o,"string",r,n);else if("number"==typeof t[o])this._createInputTextElement(s,t[o],o,"number",r,n);else if("boolean"==typeof t[o])this._createInputTextElement(s,t[o],o,"checkbox",r,n);else if("object"==typeof t[o])if(Array.isArray(t[o])){var l=this._createCollapsibleElement(a,{},o,r,"array");l=l.find("[data-uxf-point='myObjects']").first();for(var d=0;d<t[o].length;d++)this._createArrayElement(l,t[o][d],r,d)}else this._createCollapsibleElement(a,t[o],o,r,"object",n)}},_createArrayElement:function(e,t,i,n){var s=i+"."+n,a=this._createCollapsibleElement(e,{},"Item "+(n+1),s,"object");this._createModelMembers(a,t,s)},_createCollapsibleElement:function(t,i,n,s,a,o){var r=s?this._makeNamespaceIntoID(s):"MAIN",l=s?"":"MAIN",d=e.template(this.getConfig("formCollapsibleTemplate"))({key:n,divId:r,type:a,isMain:l});o&&o.remove();var u=$(d).appendTo(t);return this._showFieldButtons(u,s,n,a,!0),this._createModelMembers(u,i,s),u},_showFieldButtons:function(e,t,i,n,s){if(null!=t&&this.showDeleteButtons){var a=s?"Delete":null;this._createButton("Delete this field",this.deleteElementHandler,e.find("[data-uxf-point='myButtons']"),t,"delete",a)}if(this.showAddButtons&&("object"==n||"array"==n)){var o=s?"Add Field":null;this._createButton("Add a field",this._addElementHandler,e.find("[data-uxf-point='myButtons']"),t,"plus",o)}if(null==n){var r=s?"Create":null;this._createButton("Create value",this._addValueElementHandler,e.find("[data-uxf-point='myButtons']"),t,"arrow-r",r)}this._addMoreFieldButtons(e,t,i,n,s)},_createInputTextElement:function(t,i,n,s,l,d){var u=new a.ViewModel({data:{label:n,fieldValue:i},config:{enabled:null!=s}}),h=null;
d?(d.find('[data-uxf-point="myInputElement"]').empty(),d.find('[data-uxf-point="myButtons"]').empty(),h=d):(h=e.template(this.getConfig("elementTemplate"))({key:n,divId:this._makeNamespaceIntoID(l)}),h=$(h).appendTo(t));var c=null,p=null==s||"string"==s?"text":s,f={viewModel:u,attributes:{"data-namespace":l},config:{inputAttributes:{"data-namespace":l,type:p},isMinimalTemplate:!0}};if("checkbox"==s){f.config.falseValue="false",c=new r(f);var g=i;"boolean"!=typeof i&&(g="checked"===i?!0:!1),c.$root.find("input").prop("checked",g)}else c=new o(f);return c.on("keyboard",this._onKeyboard),c.on("changed:value",this._changed),this._showFieldButtons(h,l,n,s,!1),h.find("[data-uxf-point='myInputElement']").last().append(c.$el),c},_changed:function(e){var t=e.event.target.getAttribute("data-namespace"),i=e.value;this._updateFormElements("change",t,i),e.event.preventDefault(),e.event.stopImmediatePropagation()},_formEnableChange:function(t,i){e.each(t.children(),function(e){e=$(e),e.prop("disabled",i),!i&&e.removeClass("ui-disabled"),this._formEnableChange(e,i)},this)},submitButtonHandler:function(){this._clearError();var e=this;this.viewModel.commitAndSave({success:function(){e._formEnableChange(this.$root,!1)},error:function(t,i){e.error(i.statusText)}})},fetchButtonHandler:function(){this._clearError();var e=this;this.viewModel.fetch({success:function(){e.viewModel._setWorkingModel(),e.refresh()}})},deleteButtonHandler:function(){this._clearError();var e=this;this.viewModel.destroy({success:function(){e.deleted()},error:function(t,i){e.error(i.statusText)}})},cancelButtonHandler:function(){this._clearError(),this.viewModel.rollback()},deleteElementHandler:function(e){var t=e.target.getAttribute("data-namespace");this._updateFormElements("delete",t);var i=$.find("#"+this._makeNamespaceIntoID(t));$(i).empty(),e.preventDefault(),e.stopImmediatePropagation()},_addElementHandler:function(e){var t=$(e.srcElement).attr("data-namespace"),i=null;if(null!=t)var i=$("#"+this._makeNamespaceIntoID(t));else var i=$("#MAIN");"array"==i.attr("type")?(this._initNewValueModel(t,"create",null),this._createFieldHandler()):this._openPopupForm("create",t,null)},_initNewValueModel:function(e,t,i,n){return n||(n="string"),this.newValueModel=new a.Model({namespace:e,method:t,key:i,fieldType:n}),this.newValueModel},_addValueElementHandler:function(e){var t=$(e.srcElement).attr("data-namespace"),i=$("#"+this._makeNamespaceIntoID(t));t=t.indexOf(".")<0?null:t.substring(0,t.lastIndexof(".")),this._openPopupForm("change",t,i.attr("key"))},_createFieldHandler:function(){this._closePopup();var e=this.newValueModel.get("namespace"),t=this.newValueModel.get("method"),i=this.newValueModel.get("key"),n=this.newValueModel.get("fieldType"),s=e?e+"."+i:i,a="";"boolean"==n?a=!0:"number"==n?a=0:"object"==n?a={}:"array"==n&&(a=[""]);var o=this._updateFormElements(t,s,a),r=null,l=null;if("change"==t){r=$("#"+this._makeNamespaceIntoID(s));var d=r.parentsUntil(".myObject").parent();l=r,r=d}else r=$(null!=e?"#"+this._makeNamespaceIntoID(e):"#MAIN");var n=r.attr("type");if(n&&"array"==n)this._createArrayElement(r.find("[data-uxf-point='myObjects']").first(),{},e,o.length-1);else{var u={};u[i]=a,this._createModelMembers(r,u,e,l)}this._enhanceMarkup(r)},_makeNamespaceIntoID:function(e){var t=e.replace(/ /g,"_");return t=t.replace(/\./g,"_")},_onKeyboard:function(e){13==e.event.keyCode&&(e.event.preventDefault(),e.event.stopImmediatePropagation(),this._changed(e))},_updateFormElements:function(e,t,i){if(t){var n=this.viewModel.get(),s=t.split("."),a=n[s[0]];if(1==s.length)return"delete"==e?(delete n[s[0]],this.viewModel.unset(s[0])):"change"==e?(n[s[0]]=i,this.viewModel.set(s[0],i)):"create"==e&&this.viewModel.set(t,i),this.viewModel;for(var o=n[s[0]],r=1;r<s.length-1;r++)o=o[s[r]];var l=s[s.length-1];return"create"!=e?"delete"==e?delete o[l]:o[l]=i:o.length?o[o.length]=i:o[l]=i,this.viewModel.set(s[0],a),o}},_handleExcludeFields:function(t){var i={};if("object"==typeof this.excludeFields&&Array.isArray(this.excludeFields)){var n=e.keys(t);for(var s in n)elemKey=n[s],-1==e.indexOf(this.excludeFields,elemKey)&&(i[elemKey]=t[elemKey])}return e.isEmpty(i)?t:i},_enhanceMarkup:function(){},_getButtonWrapper:function(){return'div"'},_getFormControllerHTMLElement:function(){var e=$("<div>");return e},_addMoreFieldButtons:function(){},_createButton:function(){},_openPopupForm:function(){},_closePopup:function(){}});return h}),define("src/components/form/view/FormView",["underscore","text!./template/formCollapsible.html","text!./template/elementTemplate.html","text!./template/addNewField.html","text!./template/errorMessages.html","lightsaber.core","src/components/forminput/view/InputTextView","src/components/forminput/view/CheckboxView","src/components/forminput/view/SelectView","src/components/popup/view/PopupView","src/components/button/view/ButtonView","src/components/form/view/BaseFormView"],function(e,t,i,n,s,a,o,r,l,d,u,h){var c=h.extend({_getButtonWrapper:function(){return'div style="float:left"'},_getFormControllerHTMLElement:function(){var e=$("<div>");return e},_addMoreFieldButtons:function(e,t,i,n,s){if("object"==n||"array"==n){this._createButton("Open Fields",this._openElementHandler,e.find("[data-uxf-point='openFields']"),t,"arrow-r",null)}},_openElementHandler:function(e){var t=$(e.srcElement).closest("[divId]").attr("divId"),i=this.$root.find("#collapse_"+t);i.toggle();var n=i.is(":visible");$(e.srcElement).prev().removeClass("ui-icon-circle-triangle-s"),$(e.srcElement).prev().removeClass("ui-icon-circle-triangle-e"),$(e.srcElement).prev().addClass(n?"ui-icon-circle-triangle-s":"ui-icon-circle-triangle-e")},_createButton:function(e,t,i,n,s,o){if(0!=i.length){"delete"==s?(e=null,s="ui-icon-circle-close"):"plus"==s?(e=null,s="ui-icon-circle-plus"):"arrow-r"==s&&(e=null,s="ui-icon-circle-triangle-e");var r=$("<span></span>").appendTo(i),l={data:{label:e},config:{actions:{click:t}}},d=n?this._makeNamespaceIntoID(n):"MAIN",h={divId:d,tagName:"a",wrapper:"span"};s&&(h.icons={primary:s}),o&&(l.data.label=o);var c=new u({viewModel:new a.ViewModel(l),config:h,el:r,insertMethod:"append"});return c.$root.attr("divId",d),c.$root.find("span").attr("data-namespace",n),c}},_enhanceMarkup:function(){var e=this.$root.find("#collapse_MAIN");e&&e.length&&!e.is(":visible")&&(this.$root.find("#collapse_MAIN").show(),this.$root.find("[divId='MAIN']").first("button").hide())},_openPopupForm:function(e,t,i){var n=this,s=this._initNewValueModel(t,e,i);this.popupView=new d({viewModel:new a.ViewModel,config:{headerText:"Add Field",createContent:function(){$("#blankContent").empty();var e=n._initializeFieldOptionsForm(s);return $("#blankContent").append(e),n._enhanceMarkup($("#blankContent")),e}}}),this.popupView.render()},_closePopup:function(){this.popupView&&this.popupView.close&&this.popupView.close()}});return c}),define("text!src/components/carousel/view/template/carousel.html",[],function(){return'<div class="uxf-carousel carousel" style="overflow: hidden;">\n	<ul data-role="carousel" class="carousel_container">\n	</ul>\n</div>'}),define("text!src/components/carousel/view/template/carouselItem.html",[],function(){return"<div>\n</div>"}),define("src/components/carousel/view/BaseCarouselView",["jquery","underscore","backbone","text!./template/carousel.html","text!./template/carouselItem.html","carousel","lightsaber.core"],function(e,t,i,n,s,a,o){var r=o.View.extend({publicMethods:["addHtmlElement","addHtmlElements","removeHtmlElement","remove","empty","refresh","selectItem","nextItem","previousItem","firstItem","lastItem"],vmKeys:{"action.select":"select"},initialize:function(){t.bindAll(this,"empty","_selectedVm","_selectedHtml","refresh","render","_notsupported","_addModelItems","_refreshModelItems","removeHtmlElement","_addItem","addHtmlElement","addHtmlElements","_show","remove","_load","_setClickHandler","selectItem","_unBindClickEvent","_handleSelectEvent"),t.bind(this._setIdexUpdateHandler,this),this.items=[],this.carousel=null,this.carouselRoot=null,this.clickHandlerAttempt=0,this.template=this.getConfig("template")||t.template(n),this.templateItem=this.getConfig("templateItem")||s,this.templateItem=t.template(this.templateItem),this.viewModel.on("items:loaded",this._refreshModelItems,this),this.viewModel.on("items:added",this._addModelItems,this),this.viewModel.on("items:refreshed",this._refreshModelItems,this),this.viewModel.on("items:emptied",this._refreshModelItems,this),this.viewModel.on("items:removed",this._refreshModelItems,this),this.viewModel.on("items:changed",this._refreshModelItems,this),this.viewModel.on("items:emptied",this.empty,this)},render:function(){this.placeRoot(e(this.template())),this.carouselRoot=this.$root.find('ul[data-role="carousel"]'),null==this.carouselRoot.attr("id")&&this.carouselRoot.attr("id",this.cid),this.carouselRoot.attr("data-avoidBlank",this.getConfig("avoidBlank")),this.carouselRoot.attr("data-cyclic",this.getConfig("cyclic")),this.carouselRoot.attr("data-direction",this.getConfig("direction")),this.carouselRoot.attr("data-itemsdisplayed",this.getConfig("itemsdisplayed")),this.carouselRoot.attr("data-itemsstep",this.getConfig("itemsstep")),this.carouselRoot.attr("data-itemsindicator",this.getConfig("itemsindicator")),this.carouselRoot.attr("data-animationstatus",this.getConfig("animationstatus")),this.carouselRoot.attr("data-animationduration",this.getConfig("animationduration")),this.carouselRoot.attr("data-render",void 0===this.getConfig("layout")?void 0:this.getConfig("layout").toLowerCase()),this.carouselRoot.attr("data-outmargin",this.getConfig("outmargin")),this.carouselRoot.attr("data-height",this.getConfig("height")),this.carouselRoot.attr("data-absoluteitemsstep",this.getConfig("absoluteitemsstep")),this.rootCSS&&(this.carouselRoot.addClass(this.rootCSS),this.carouselRootCSS=this.rootCSS),this._load(this.viewModel.getData())},configChanged:function(e){e&&null!=e.rootCSS&&(this.carouselRoot.removeClass(this.carouselRootCSS),this.carouselRoot.addClass(this.rootCSS),this.carouselRootCSS=this.rootCSS)},addHtmlElement:function(e){this.items.push(e),this._addHtmlElement(e),this.refresh()},removeHtmlElement:function(e){null!=this.carousel&&(this.items.splice(e,1),this.carousel.removeItem(e),this.refresh())},addHtmlElements:function(e){this.carouselRoot.hide();for(var t in e)this.items.push(e[t]),this._addHtmlElement(e[t]);this.carouselRoot.show(),this._show()},remove:function(){this.carousel=null,this.items.splice(0,this.items.length),this.viewModel.off("items:loaded",null,this),this.viewModel.off("items:added",null,this),this.viewModel.off("items:refreshed",null,this),this.viewModel.off("items:emptied",null,this),this.viewModel.off("items:removed",null,this),this.viewModel.off("items:changed",null,this),this.$root.remove()},refresh:function(){null!=this.carousel?(this._unBindClickEvent(),this.carousel.refresh(),this._setClickHandler()):this._show()},_unBindClickEvent:function(){},empty:function(){null!=this.carousel&&this.carousel.empty()},_notsupported:function(){throw"Not supported functionality"},_load:function(e){if(!(null==e||e.items&&e.items.length<1)){this.carouselRoot.hide();for(var t=0;t<e.items.length;t++)this._addItem({item:e.items[t]},!1);this.carouselRoot.show(),this._show()}},_refreshModelItems:function(e){this.items.splice(0,this.items.length),this.empty(),this._load(null!=e.items?e:this.viewModel.getData())},_addModelItems:function(e){if(e.length)for(var t=0;t<e.length;t++)this._addItem(e[t]);else this._addItem(e)},_addItem:function(e,t){var i=this.getPopulatedTemplate(this.templateItem,e);this.items.push(i),this._addHtmlElement(i),(t||void 0==t)&&this.refresh()},_addHtmlElement:function(t){var i=e("<li></li>");i.append(t),null!=this.carousel?(this.carousel.addItem(i),this.refresh()):this.carouselRoot.append(i)},_show:function(){var t=this.getConfig("itemsdisplayed"),i=0;t>1&&(i=1);var n=this;if(this.items.length>=0&&null==this.carousel){this.clickHandlerAttempt=0,this.carousel=this.carouselRoot.LSCarousel().data("plugin_LSCarousel");var s=this.carousel;s.view.currentIndex===i&&n.trigger("carousel:first"),s.view.items.length&&s.view.currentIndex===s.view.items.length-t&&n.trigger("carousel:last"),s.view.currentIndex===i||s.view.items.length&&s.view.currentIndex===s.view.items.length-t||n.trigger("carousel:middle"),this.carouselRoot.on("lsc_controlNext",function(){s.view.currentIndex===i&&n.trigger("carousel:first"),s.view.items.length&&s.view.currentIndex===s.view.items.length-t&&n.trigger("carousel:last"),s.view.currentIndex===i||s.view.items.length&&s.view.currentIndex===s.view.items.length-t||n.trigger("carousel:middle")}),e(this.el).trigger("create"),this._setClickHandler(),this._setIdexUpdateHandler(this),this._prevControl(this),this._nextControl(this)}else this.refresh(),this.carousel.view.currentIndex===i&&n.trigger("carousel:first"),this.carousel.view.items.length&&this.carousel.view.currentIndex===this.carousel.view.items.length-t&&n.trigger("carousel:last"),this.carousel.view.currentIndex===i||this.carousel.view.items.length&&this.carousel.view.currentIndex===this.carousel.view.items.length-t||n.trigger("carousel:middle")},_setClickHandler:function(){if(null!=this.carousel)"Collection"==this.viewModel.viewModelType?this._selectedVm():this._selectedHtml(),this.clickHandlerAttempt=0;else{if(this.clickHandlerAttempt>5)throw"Could not initialize carousel";setTimeout(this._setClickHandler,300),this.clickHandlerAttempt++}},_handleSelectEvent:function(e,t,i,n){n.trigger(i,{itemId:t,event:e});var s={itemId:t,event:e};this.viewModel.handleAction(this.vmKeys["action.select"],s)},_setIdexUpdateHandler:function(e){e.carouselRoot.on("lsc_indexUpdate",function(t){e.trigger("Carousel:indexUpdate",t)})},_selectedVm:function(){},_selectedHtml:function(){},selectItem:function(e,t){null!=this.carousel&&this.carousel.selectItem(e,t)},nextItem:function(){null!=this.carousel&&this.carousel.next()},previousItem:function(){null!=this.carousel&&this.carousel.previous()},firstItem:function(){null!=this.carousel&&this.carousel.first()},lastItem:function(){null!=this.carousel&&this.carousel.last()},_prevControl:function(e){e.carouselRoot.on("lsc_controlPrevious",function(t){e.trigger("Carousel:prevEvent",t)})},_nextControl:function(e){e.carouselRoot.on("lsc_controlNext",function(t){e.trigger("Carousel:nextEvent",t)})},destroy:function(){this.carouselRoot&&(this.carouselRoot.off(),this.carouselRoot.remove()),this._super()}});return r}),define("src/components/carousel/view/CarouselView",["underscore","backbone","text!./template/carousel.html","text!./template/carouselItem.html","carousel","lightsaber.core","src/components/carousel/view/BaseCarouselView"],function(e,t,i,n,s,a,o){var r=o.extend({_unBindClickEvent:function(){this.carouselRoot.children().off()},_selectedVm:function(){var e=this;this.carouselRoot.children().each(function(t){$(this).off().on("click",function(i){i.itemId=t,e._handleSelectEvent(i,t,"items:selected",e.viewModel)})})},_selectedHtml:function(){var e=this;this.carouselRoot.children().each(function(t){$(this).off().on("click",function(i){e._handleSelectEvent(i,t,"carousel:selected",e)})})}});return r}),define("src_web/components/application/view/Navigation",["jquery","backbone","src/core/util/Utils"],function(e,t,i){var n=t.View.extend({childParams:{},_handleRoutes:function(e,t){var i=this._getPreviousRoutes(),n=this._normalizeRoutes(_.difference(e,i)),s=this._normalizeRoutes(_.difference(i,e)),a=this._getChildModulesToRemove(n);s=_.uniq(s.concat(a)),n.length===s.length&&0===n.length&&n.push(this.lastReloadedRoute);var o=_.uniq(this._clearModules(s,t));this._loadModules(n,t),this._reloadDefaultModules(o),this.route=this._calculateRouteByRoutes(e)},_getPreviousRoutes:function(){var e=this.route.split(this.separator);return e=this._normalizeRoutes(e)},_normalizeRoutes:function(e){var t=e;return 1===t.length&&""===t[0]&&(t=[]),t},_clearModules:function(e){for(var t,i=[],n=0;n<e.length;n++)t=this._getModuleConfig(e[n]),t&&(i=i.concat(this._clear(t,e[n])));return i},_getChildModulesToRemove:function(e){for(var t,i,n=[],s=this.getAllChildrens()||[],a=0;a<s.length;a++){t=this._getModuleConfig(s[a]);for(var o=0;o<e.length;o++)i=this._getModuleConfig(e[o]),i&&t!==i&&t.el===i.el&&n.push(s[a])}return n},_reloadDefaultModules:function(e){for(var t,i=0;i<e.length;i++)t=this._getModuleConfig(e[i]),t&&t.instance&&t.instance._reloadDefaultModules()},_loadModules:function(e,t){for(var i,n=0;n<e.length;n++)i=this._getModuleConfig(e[n]),this._loadModule(i,e[n],t);this.route=this._calculateRouteByRoutes(e)},_unloadModule:function(){var e,t=this.options.parent,i=this.options.regex;t&&t.children&&(t.children=_.filter(t.children,function(e){return!i.test(e)}),e=_.find(this.modules,function(e){return e.id===i}),e.instance=null),this.destroy()},_requireModule:function(e,t,i){e.parent._requireMap=e.parent._requireMap||{};var n=e.parent._requireMap;n[e.el]&&t.loading.splice(_.indexOf(t.loading,n[e.el]),1),n[e.el]=i;var s=function(n){e.parent._requireMap[e.el]===i&&(e.instance=new n(e),e.instance._propagateEvent("load:",i,e.parent),e.instance._triggerFlowEvent("flow:load:step"),delete e.parent._requireMap[e.el]),t.loading.splice(_.indexOf(t.loading,i),1)};requirejs([e.module||e.path],s)},_loadModule:function(e,t,i){var n=this;if(e){if(this.loading=this.loading||[],-1!=_.indexOf(this.loading,t))return;this.loading.push(t),e.parent.children.push(t);var s=this.options.router._extractParameters(e.regex,t);e.params=this._createParams(e.id,s),e.loadParams=i,this.routeToTarget[t]=e.el,e.app=this.isApp?this:this.options.app,e.instance&&e.cached?(e.instance.$root.show(),e.instance.reload(e),e.instance._propagateEvent("load:",t,e.parent),e.instance._triggerFlowEvent("flow:load:step"),n.loading.splice(_.indexOf(n.loading,t),1)):e.instance&&!e.cached?(this._clear(e,t),this._requireModule(e,n,t)):this._requireModule(e,n,t)}else{var a=t.split("/")[0];this.on("registered:"+a,function(){this.off("registered:"+a),e=this._getModuleConfig(t),this._loadModule(e,t,i)})}},_propagateEvent:function(e,t,i){this.trigger(e+t,i),this.options&&this.options.parent&&this.options.parent._propagateEvent(e,t,i)},_triggerFlowEvent:function(e){if(this.options.originalStepID){var t=this.options.router.getViewModel();t&&t.trigger(e,this.options,this.getFlowState())}},_calculateNewRoute:function(e,t){var i="",n=this.route,s=this._getHash();if(t&&t.skipReplace&&this._isSubRoute(s,e))n=s;else{for(var a,o,r=n.split(this.separator),l=this._getModuleConfig(e)||{},d=this.getAllChildrens(),u="",h=0;h<d.length;h++)if(a=this._getModuleConfig(d[h]),o=this._getModuleConfig(e),o&&a.el===o.el){u=d[h];break}for(var c=0;c<r.length;c++)if(this.routeToTarget&&this.routeToTarget[r[c]]===l.el){i=r[c];break}if(i){n=n.replace(i,e);for(var p=this._getModuleConfig(i),f=p.instance&&p.instance.getAllChildrens()||[],g=0;g<f.length;g++)n=n.replace(this.separator+f[g],"")}else if(n){if(n=n+this.separator+e,u)for(var p=this._getModuleConfig(u),f=p.instance&&p.instance.getAllChildrens()||[],g=0;g<f.length;g++)n=n.replace(this.separator+f[g],""),n=n.replace(f[g]+this.separator,""),n=n.replace(f[g],"")}else n=e}return n},_isSubRoute:function(e){var t=!1;return""!==e&&e.indexOf(e)>=0&&(t=!0),t},getAllChildrens:function(){for(var e,t=[],i=0;i<this.children.length;i++)e=this._getModuleConfig(this.children[i]),t.push(this.children[i]),e.instance&&(t=t.concat(e.instance.getAllChildrens()));return t},_getModuleConfig:function(e){for(var t,i=this.registeredModules.length-1;i>=0;i--){var n=this.registeredModules[i].regex;if(n.test(e)){t=this.registeredModules[i];break}}return!t&&this.options.app&&(t=this.options.app._getModuleConfig(e)),t},getModuleConfig:function(e){return this._getModuleConfig(e)},_clear:function(e,t,i){var n=this._getModuleConfig(t),s=[];if(s.push(e.parent.id),!i&&e.cached)e.instance.$root.hide();else{for(var a=0;a<e.parent.children.length;a++)if(n===this._getModuleConfig(e.parent.children[a])){e.parent.children.splice(a,1);break}e.el&&e.instance&&(e.instance.$el===e.instance.$root?e.instance.$root.children().not(":hidden").remove():e.instance.$el.children().not(":hidden").remove()),e.instance&&(e.instance._requireMap={},e.instance.removeChildren(e),e.instance._unregisterChildren(e),e.instance.destroy(e),e.instance._propagateEvent("clear:",t,e.parent),delete e.instance)}return s},removeChildren:function(){for(var e,t=_.clone(this.children),i=0;i<t.length;i++)e=this._getModuleConfig(t[i]),e.instance&&e.instance._clear(e,t[i],!0);if(this.___children)for(var n=this.___children.length-1;n>=0;n--)this.___children[n]&&(this.___children[n].destroy(),delete this.___children[n])},_unregisterChildren:function(){this.options.app.unregisterModules(this.modules)},unregisterModules:function(e){var t;if(e)for(var i=e.length-1;i>=0;i--)t=e[i],this.unregisterModule(t,this)},unregisterModule:function(e){-1!=_.indexOf(this.registeredModules,e)?this.registeredModules.splice(_.indexOf(this.registeredModules,e),1):this.options.app&&this.options.app.registeredModules.splice(_.indexOf(this.options.app.registeredModules,e),1)},_calculateRouteByRoutes:function(e){for(var t="",i=0;i<e.length;i++)t+=e[i]+this.separator;return""!==t&&(t=t.slice(0,-this.separator.length)),t},_createParams:function(e,t){for(var i,n=e.split("/").slice(1),s=0,a={},o=0,r=n.length;r>o;o++)i=n[o],(":"===i.substring(0,1)||"*"===i.substring(0,1))&&(a[i.substring(1)]=t[s++]);return a},_applyParams:function(e,t){var i,n=e;for(var s in t)i=new RegExp("[(:)(\\*)]\\b"+s+"\\b([/]?)","gi"),n=n.replace(i,t[s]+"$1");return n},_createRouteConfig:function(t,i){var n=e.extend(!0,{},t);return void 0===n.trigger&&(n.trigger=!0),n.external=i,n},_getHash:function(){return t.history.getFragment()},create:i.create});return n.extend=i.extend,n}),define("text!src_web/components/application/view/template/moduleTemplate.html",[],function(){return"<div></div>"}),define("src_web/components/application/view/Module",["jquery","backbone","src/core/model/Model","src_web/components/application/view/Navigation","src/core/util/Utils","text!./template/moduleTemplate.html"],function(e,t,i,n,s){var a=n.extend({config:{},mergeProperties:{config:"merge"},getConfig:function(e){return 0===arguments.length?this._config.toJSON():this._config.get(e)},initialize:function(e){this._config=new i(this.config),this.optionsMap=e.optionsMap||this.optionsMap||{},this.separator="/#!/",this.routeToTarget={},this.registeredModules=[],this.defaultModules=[],this.children=[],this.route="",this.routesStack=[],this.stackPosition=-1,this.navigated=!0,this.renderTemplate(e),this._setDefaultModules(this.modules),this._init(e),this._defineRoute(e);var n=this.modules=this._process(this.modules),s=this._process(this.fragments);this.registerModulesWithHistoryFalse(n),this.registerModulesWithHistoryFalse(s,!0),this.preInit(e),this.init(e),this.postInit(e),this.registerModules(n),this.registerModules(s,!0),this._loadDefaultChildren(e),e.hash&&t.history.loadUrl(t.history.fragment),this._handlePage(e),this.options.app.trigger("loaded:"+this.options.id)},_process:function(e){var t,i=[];if(!_.isArray(e)){for(var n in e)t=e[n],t.id=n,i.push(t);e=i}return e=_.filter(e,function(e){return this.id!=e.id},this)},_handlePage:function(){},preInit:function(){},init:function(){},postInit:function(){},_init:function(){},renderTemplate:function(t){if(t.el){var i,n=t.template||this.template||n;"string"==typeof n?i=_.template(n,t):"function"==typeof n&&(i=n(t)),this.$root=e(i).appendTo(e(t.el))}else this.$root=e("<div></div>").appendTo(e("body")),this.$el=this.$root},registerModules:function(e){var t;if(e)for(var i=e.length-1;i>=0;i--)t=e[i],t.browserHistory!==!1&&this.registerModule(t,this)},registerModulesWithHistoryFalse:function(e){var t;if(e)for(var i=e.length-1;i>=0;i--)t=e[i],t.browserHistory===!1&&this.registerModule(t,this)},registerModule:function(e,t){this.options.parent.registerModule(e,t)},registerLocalModule:function(t,i){var n=e.extend(!0,{},t);n.app=this.options.app,n.router=this.options.router,n.parent=i,n.regex=this.options.router._routeToRegExp(n.id),this.registeredModules.push(n);var s=n.id.split("/")[0];this.trigger("registered:"+s)},navigate:function(e,t){var i=this._createRouteConfig(t,!0);this.options.router.navigate(e,i)},loadFragment:function(e,t){this.load(e,t)},openModal:function(e,t){this.load(e,t)},load:function(e,t){var i=this._createRouteConfig(t),n=this._getModuleConfig(e);n&&n.browserHistory===!1?this.loadModule(e,i):this.options.parent.load(e,t)},loadModule:function(e,t){var i=this._calculateNewRoute(e);-1!==this.route.indexOf(e)&&(this.lastReloadedRoute=e),this.trigger("route:"+i,t)},_defineRoute:function(){var e=this;this.on("all",function(){if(0===arguments[0].indexOf("route:")){var t=arguments[0].replace("route:","").split(e.separator);e._handleRoutes(t,arguments[1]),e._handleStack()}else 0===arguments[0].indexOf("clear:")})},_setDefaultModules:function(e){if(e)for(var t=0;t<e.length;t++)e[t].isDefault&&this.defaultModules.push(e[t].id)},_loadDefaultChild:function(e,t){var i,n;i=this._getModuleConfig(e);var s=[];""!==this.options.app._getHash()&&(s=this.options.app._getHash().split(this.separator));for(var a=0;a<s.length;a++)if(n=this._getModuleConfig(s[a]),n&&i.el===n.el)return;e=this._applyParams(e,this.childParams[i.id]),this._loadModule(i,e,t)},_reloadDefaultModule:function(e,t){var i,n;i=this._getModuleConfig(e);for(var s=0;s<this.children.length;s++)if(n=this._getModuleConfig(this.children[s]),i.el===n.el)return;e=this._applyParams(e,this.childParams[i.id]),this._loadModule(i,e,t)},_reloadDefaultModules:function(){for(var e=0;e<this.defaultModules.length;e++)this._reloadDefaultModule(this.defaultModules[e])},_loadDefaultChildren:function(){for(var e=0;e<this.defaultModules.length;e++)this._loadDefaultChild(this.defaultModules[e])},_handleStack:function(){this.navigated&&(this.backPressed?(this._updateStack(),this.backPressed=!1):this._addToStack()),this.navigated=!0},_addToStack:function(){(0===this.routesStack.length||this.routesStack[this.stackPosition].indexOf(this.route)<0)&&(this.routesStack.push(this.route),this.stackPosition++)},_updateStack:function(){this.backPressed&&(this.routesStack=this.routesStack.slice(0,this.stackPosition+1),this._addToStack(),this.backPressed=!1)},_nextInStack:function(){return this.stackPosition++,this.routesStack[this.stackPosition]||""},_prevInStack:function(){return this.stackPosition--,this.routesStack[this.stackPosition]||""},reload:function(){},unload:function(){this._unloadModule()},destroy:function(){this.$root&&delete this.$root,this.$el&&delete this.$el,this.off()},onBack:function(){},onForward:function(){},back:function(){if(this.stackPosition>0){this.navigated=!1,this.backPressed=!0;var e=this._prevInStack();this.trigger("route:"+e),this.onBack(e)}else 0===this.stackPosition&&(this.navigated=!1,this.backPressed=!0,this._prevInStack(),this.trigger("route:"),this.onBack(""))},forward:function(){if(this.stackPosition<=this.routesStack.length-2){this.navigated=!1;var e=this._nextInStack();this.trigger("route:"+e),this.onForward(e)}else this.backPressed=!1},requestAction:function(e,t,i){i=i||{},this.options.router.executeAction(e,t,this.options.app,i)},queueAction:function(e,t,i){var n=this;_.defer(function(){n.requestAction(e,t,i)},0)},getFlowState:function(e){return this.options.router.getFlowState(e)},getFlowData:function(e){return this.options.router.getFlowData(e)},setFlowData:function(e,t){this.options.router.setFlowData(e,t)},resetFlowData:function(){this.options.router.resetFlowData()},deleteFlowData:function(e){return this.options.router.deleteFlowData(e)},getFlowConfig:function(e){return this.options.router.getFlowConfig(e)},markStepAs:function(e){this.options.router.markStepAs(e,this.options)},unmarkStepAs:function(e){this.options.router.unmarkStepAs(e,this.options)},clearRoute:function(){this.options.app.clearRoute()}});return a.extend=function(e){return!e.init&&e.initialize&&(e.init=e.initialize,e.initialize=a.prototype.initialize),s.extend.apply(this,arguments)},a.prototype.create=s.create,a}),define("text!src_web/components/application/view/template/pageTemplate.html",[],function(){return'<div data-role="header"></div>\n<div data-role="content"></div>\n<div data-role="footer"></div>'}),define("text!src/components/application/view/template/pageLoader.html",[],function(){return"<div data-uxf-point=\"ajaxLoader\" class='ajaxLoader'></div>"}),define("src/components/application/view/LoadingView",["jquery","underscore","backbone","lightsaber.core","src/core/util/Configuration","text!./template/pageLoader.html"],function(e,t,i,n,s,a){var o=n.View.extend({render:function(){if(null!=this.getConfig("handleAllAjaxRequests")&&1==this.getConfig("handleAllAjaxRequests")){var e=s.get("ShowPageAjaxLoadingIndicator");if(null==e||0==e.show)return;var i=t.template(a);this.$el.append(i());var n=this.$el.find("[data-uxf-point='ajaxLoader']");n.hide();var o=null;n.ajaxStart(function(){n.show(),null!=e.pageAjaxTimeout&&e.pageAjaxTimeout>0&&(o=setInterval(function(){n.hide()},e.pageAjaxTimeout))}),n.ajaxStop(function(){window.clearInterval(o),n.hide()})}}});return o}),define("src_web/components/application/view/Application",["jquery","underscore","backbone","./Module","src_web/components/application/view/Navigation","src/core/util/Utils","src/core/viewModel/ViewModel","text!./template/pageTemplate.html","src/components/application/view/LoadingView"],function(e,t,i,n,s,a,o,r,l){var d=s.extend({isApp:!0,config:{},initialize:function(e){this.options.router.app=this,this.separator="/#!/",this.routeToTarget={},this.registeredModules=[],this.urlMap={},this.children=[],this.route="",this._init(e);var t=this.options.router.configuration.flows;this.registerFlows(t),this.registerModules(this.configuration.modules),this._loadDefaultModule(),this.init(e)},init:function(){},_init:function(t){i.history.start({root:"",pushState:!1}),this.configuration=e.extend(!0,{},t),this.configuration.modules=this.configuration.modules||this.configuration.pages||{}},getConfig:function(e){return 0===arguments.length?this.config:this.config[e]},_getFlowsConfig:function(){var e={};return this.options&&this.options.router&&this.options.router.configuration&&this.options.router.configuration.flows&&(e=this.options.router.options.flows),e},registerFlows:function(t){var i,n;if(this.options.router.fm.resetFlows(),t&&t.flows)for(var s=0;s<t.flows.length;s++){n=t.flows[s];for(var a=0;a<n.steps.length;a++)i=e.extend(!0,{},n.steps[a]),i.originalStepID=i.id,i.flowID=n.id,i.id="["+n.id+"/"+i.id+"]",i.flowConfig=n,this.registerModule(i,this),this._storeModuleURL(i);this._processFlow(n)}},registerFlow:function(){},_processFlow:function(e){this.options&&this.options.router&&this.options.router.fm&&this.options.router.fm.registerFlow(e)},registerModules:function(e){var t;if(e)for(var i=e.length-1;i>=0;i--)t=e[i],this.registerModule(t,this),this._storeModuleURL(t);this._defineRoute()},registerModule:function(e,t){e.path=e.module||e.path,e.app=this,e.router=this.options.router,e.parent=t,e.regex=this.options.router._routeToRegExp(e.id),this.registeredModules.push(e);var i=e.id.split("/")[0];this.trigger("registered:"+i)},_storeModuleURL:function(e){e.url&&(this.urlMap[e.url]=e.id)},_loadDefaultModule:function(){var e=this._getRouteByURL(),t=this._getModuleConfig(e.route);this.queryParams=e.queryParams,this._augmentModuleDefaultTemplate(t),this._loadPageModule(t)},_getRouteByURL:function(){var t,i,n={},s=pathName=window.location.href.replace(window.location.hash,"");if(s=pathName=decodeURI(pathName),i=decodeURI(window.location.search)){n.queryParams={},pathName=pathName.replace(i,""),i=i.slice(1).split("&");for(var a=0;a<i.length;a++)t=i[a].split("="),t&&(1===t.length?n.queryParams[e.trim(t[0])]=e.trim(t[0]):t.length>1&&(n.queryParams[e.trim(t[0])]=e.trim(t[1])))}"#"===pathName.substr(-1)&&(pathName=pathName.substring(0,pathName.length-1));var o=pathName.lastIndexOf("/")+1,r=o!=pathName.length?pathName.substring(o):"index.html";
return n.route=this._findRoute(r,pathName,s),n},_findRoute:function(e,t,i){var n=this.urlMap[e];if(!n)for(var s in this.urlMap)if(s.split("#")[0]===e){n=this.urlMap[s];break}if(!n)for(var a in this.options.router.routes)if(this.options.router.routes[a].path===e){n=a;break}"#"===i.substr(-1)&&(i=i.substring(0,i.length-1));var o=i.lastIndexOf("/")+1;if(e=o!=i.length?i.substring(o):"index.html",!n)for(var r in this.options.router.routes)if(this.options.router.routes[r].path===e){n=r;break}return n},_augmentModuleDefaultTemplate:function(e){e.template!==!1&&(e.defaultTemplate=e.template||this.pageTemplate||r)},_loadPageModule:function(i){this.children.push(i.id),new l({viewModel:new o({}),el:e("body"),config:{handleAllAjaxRequests:!0}}),i.module?(i.hash=this._getHash(),i.instance=new i.module(i),i.instance._triggerFlowEvent("flow:load:step")):i.path?requirejs([i.path],t.bind(function(e){i.hash=this._getHash(),i.instance=new e(i),i.instance._triggerFlowEvent("flow:load:step")},this)):(i.hash=this._getHash(),i.instance=new n(i),i.instance._triggerFlowEvent("flow:load:step"))},navigate:function(e,t){var i=this._createRouteConfig(t,!0);this.options.router.navigate(e,i)},load:function(e,t){var i=this._createRouteConfig(t);this.loadModule(e,i)},loadModule:function(e,t){var n=this._calculateNewRoute(e,t);this.lastReloadedRoute=e,n===this.route?i.history.loadUrl(n):this.options.router.navigate(n,t)},_defineRoute:function(){var e=this;this.configuration.router.route("*all","",function(){var t="";arguments[0]&&(t=arguments[0].split(e.separator)),e._handleRoutes(t)})},clearRoute:function(){this.route=""}});return d.extend=a.extend,d}),define("src_web/components/application/view/PopupModule",["underscore","lightsaber.core","./Module","src/components/popup/view/PopupView"],function(e,t,i,n){var s=i.extend({config:{closeIcon:!1,closeText:!1,sync:!0,closeTitle:!1},init:function(i){i.template!==!1&&this.$el.append(i.template||this.template||i.defaultTemplate),e.bindAll(this,"_createContent","initContent","_onClose","close"),this.popupViewModel=new t.ViewModel,this.config.createContent=e.bind(function(){return this.$el},this),this.config.beforeClose=this._onClose,this.popupView=new n({viewModel:this.popupViewModel,config:this.config}),this.popupView.close=this._onClose,this.popupView.on("popup:show",this._createContent,this),this.popupView.render()},_createContent:function(){this.initContent(this.options)},initContent:function(){},_onClose:function(){this.destroy&&this.destroy(),this.options.onClose&&this.options.parent[this.options.onClose]&&this.options.parent[this.options.onClose].call(this.options.parent),this.close()},close:function(){n.prototype.close.call(this.popupView)},center:function(){this.popupView.$el.dialog("option","position","center")},setHeaderTitle:function(e){this.popupView.$el.dialog("option","title",e)},destroy:function(){this.close()}});return s}),define("src_web/components/ftable/view/TableView",["jquery","flexigrid","underscore","lightsaber.core"],function(e,t,i,n){var s=n.View.extend({publicMethods:["refresh"],config:{autoRender:!1,sortname:"",usePager:!0,dataType:"json",onReload:!1,onChangePageSize:!1,onChangePage:!1,onRpChange:!1,nowrap:!1,height:""},initialize:function(){i.bindAll(this,"render","refresh","_getData","convertToFGFormat");var t=this.getConfig("colModel"),n=this,s=this.getConfig("width");if(s||(s=e(document).width()),t)for(var a=0;a<t.length;a++){var o=t[a].width;"number"!=typeof o&&"%"==o.substring(o.length-1,o.length)&&(o=o.substring(0,o.length-1),t[a].width=o/100*s)}if(this.setConfig("usePager",this.getConfig("usePager")),t)for(var a=0;a<t.length;a++){var r=t[a].process;r||(t[a].process=function(t){e(t).css("word-wrap","break-word")})}if(this.viewModel.on("items:loaded",this.render,this),this.viewModel.on("items:refreshed",this.refresh,this),this.viewModel._getPagination()?(this.setConfig("rp",this.viewModel._getPagination().pageSize),this.setConfig("usepager",!0),this.viewModel.on("items:paginated",this.paginated,this),this.setConfig("onChangePage",function(e){n.viewModel.gotoPage(e-1)})):this.setConfig("usepager",!1),this.getConfig("onRpChange")||this.setConfig("onRpChange",function(e){i.isNumber(e)||(e=Number(e)),n.setConfig("rp",e),n.$el.flexOptions(n.getConfig()),n.viewModel.setPageSize(e)}),this.viewModel._getSorting()){var l=this.viewModel._getSorting();this.setConfig("sortname",l.fieldName),this.setConfig("sortorder",l.asc?"asc":"desc"),this.getConfig("onChangeSort")||this.setConfig("onChangeSort",function(e,t){n.viewModel._setSorting({fieldName:e,asc:"asc"==t?!0:!1})})}},paginated:function(e){e=this._getData(e),this.$el.flexAddData(e)},render:function(t){var i=this.$el.flexigrid(this.getConfig())[0].grid,n=this;e(".pReload",i.pDiv).unbind(),e(".pReload",i.pDiv).click(this.getConfig("onReload")?function(){n.getConfig("onReload")()}:function(){n.viewModel._resetData()}),t=this._getData(t),this.$el.flexAddData(t)},refresh:function(e){e=this._getData(e),this.$el.flexAddData(e)},_getData:function(e){return this.convertToFGFormat(e)},convertToFGFormat:function(e){var t,n,s,a=1;return n=new Backbone.Collection,i.each(e.items,function(e){s=i.values(e),t={id:a++,cell:s},n.add(t)}),e.paginationInfo?{rows:n.toJSON(),page:e.paginationInfo.pageNum+1,total:e.paginationInfo.totalSize}:{rows:n.toJSON(),page:0,total:n.length}},destroy:function(e){if(this.binding.unbind(),e?Backbone.Events.off.call(this.viewModel,null,null,this):this.viewModel.off(null,null,this),this.root&&this.viewModel.observe&&KO.cleanNode(this.root),this.remove(),this.off(),this.undelegateEvents(),this.subViews)for(var t in this.subViews)this.subViews[t].viewInstance&&this.subViews[t].viewInstance.destroy(),delete this.subViews[t].viewInstance,delete this.subViews[t];if(this._subViews)for(var t in this._subViews)this._subViews[t].instance&&this._subViews[t].instance.destroy(),delete this._subViews[t].instance,delete this._subViews[t];if(this.___children){for(var t=this.___children.length-1;t>=0;t--)this.___children[t]&&(this.___children[t].destroy(),delete this.___children[t]);delete this.___children}if(this.viewModels)for(var t=this.viewModels.length-1;t>=0;t--)this.viewModels[t]&&(this.viewModels[t].off(null,null,this),delete this.viewModels[t])}});return s}),define("text!src/components/progressbar/view/template/progressBar.html",[],function(){return'<div data-role="progressbar" class="uxf-progressbar clearfix" style="width: 100%; display: none;">\n	<div data-uxf-point="progress" class="ui-widget-header" style="float: left; height: inherit; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;">\n		<div class="progress-text"><span class="uxf-pbSpan-value"><%=valueText%><%=units%></span></div>\n	</div>\n	<div data-uxf-point="remaining" class="ui-widget-content" style="float: left; height: inherit; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;">\n		<div class="progress-remaining-text"><span class="uxf-pbSpan-remaining"><%=remainingText%><%=units%></span></div>\n	</div>\n</div>\n'}),define("src/components/progressbar/view/ProgressBarView",["jquery","lightsaber.core","underscore","text!./template/progressBar.html"],function(e,t,i,n){var s=t.View.extend({publicMethods:["animate"],template:n,config:{autoRender:!1,precision:0},vmKeys:{"data.value":"value","data.maxValue":"maxValue"},vmKeysChangeEvents:{"data.value":"_handleValuesUpdate","data.maxValue":"_handleValuesUpdate"},defaultUnits:"%",defaultMax:100,initialize:function(){i.isFunction(this.template)||(this.template=i.template(this.template))},_handleValuesUpdate:function(){"undefined"!=typeof this._getVMData("data.value")&&"undefined"!=typeof this._getVMData("data.maxValue")&&(this.render(),this.$root.show())},_preRender:function(){this._calculate()},_calculate:function(){this.data={};var e=0,t=this._getVMData("data.value"),i=Math.abs(t),n=this._getVMData("data.maxValue"),s=Math.abs(n),a=this.getConfig("units"),o=a||this.defaultUnits;!s||i>s?i<this.defaultMax?(s=this.defaultMax,n=s,e=s-i,o=this.defaultUnits):(s=i,n=s):e=s-i,this.data.value=i/s*this.defaultMax,this.data.remaining=e/s*this.defaultMax,this.data.units=this.getConfig("renderText")!==!1?o:"",a&&a!==this.defaultUnits?(this.data.valueText=i,this.data.maxValueText=s):(this.data.valueText=this.data.value.toFixed(this.getConfig("precision")),this.data.maxValueText=this.defaultMax),this.data.remainingText=a&&a!==this.defaultUnits?this.data.maxValueText-this.data.valueText:(this.data.maxValueText-this.data.valueText).toFixed(this.getConfig("precision"))},animate:function(){0===this.data.value?this.$root.find("[data-uxf-point='progress']").hide():this.$root.find("[data-uxf-point='progress']").show().animate({width:this.data.value+"%"},800),this.$remaining=this.$root.find("[data-uxf-point='remaining']"),0===this.data.remaining?this.$remaining.hide():this.$remaining.show().animate({width:this.data.remaining+"%"},800)},_applyTheme:function(){var e=this.$root.attr("data-theme");e&&this.$remaining.removeClass("ui-btn-down").addClass("ui-btn-down-"+e)},_handleTemplate:function(){var e,t=this.data;this.getConfig("renderValues")===!1&&(t={valueText:"&nbsp;",units:"",remainingText:"&nbsp;"}),e=this.template(t),this.$root&&this.$root.remove(),this.placeRoot(e)},_postRender:function(){i.isUndefined(this.data.value)||i.isUndefined(this.data.remaining)||this.$root.show(),this.getConfig("animate")!==!1&&"false"!==this.getConfig("animate")?this.animate():(this.$root.find("[data-uxf-point='progress']").css("width",this.data.value+"%"),this.$remaining=this.$root.find("[data-uxf-point='remaining']").css("width",this.data.remaining+"%")),this._applyTheme()},_enhanceMarkup:function(){this.$root.trigger("create")}});return s}),define("text!src_web/components/accordion/view/template/AccordionTemplate.html",[],function(){return'<div class="uxf-accordion"></div>'}),define("text!src_web/components/accordion/view/template/AccordionCollapsibleTemplate.html",[],function(){return'<div data-uxf-point="collapsible" data-collapsed="true" data-id="<%=id%>">\n	<div data-uxf-point="collapsible-title" class="ui-state-default" style="cursor: pointer; padding: 0.5em;"><span><%=name%></span></div>\n	<div data-uxf-point="collapsible-content"><span>Some text for Collapsible #<%=id%></span></div>\n</div>\n'}),define("src_web/components/accordion/view/AccordionView",["jquery","underscore","lightsaber.core","text!./template/AccordionTemplate.html","text!./template/AccordionCollapsibleTemplate.html"],function(e,t,i,n,s){var a=i.View.extend({publicMethods:["setExpandAll","createCollapsibles","addCollapsibles","addCollapsible","getPane","addToPane","select"],idAttribute:"id",template:n,collapsibleTemplate:s,vmKeys:{"data.items":"items"},initialize:function(){this.$collapsibles=e(),this.$collapsibleTitles=e(),this.$collapsibleContents=e(),this.template=this.getConfig("template")||this.template,this.collapsibleTemplate=t.template(this.getConfig("collapsibleTemplate")||this.collapsibleTemplate),this.idAttribute=this.getConfig("idAttribute")||this.idAttribute,this.viewModel.on("items:loaded",this._createCollapsibles,this),this.viewModel.on("items:added",this._addCollapsibles,this)},_postRender:function(){var e;this._decideExpandAll(),e="Collection"==this.viewModel.viewModelType?this.viewModel.getData().items:this.viewModel&&this._getVMData("data.items"),e&&this._createCollapsibles({items:e})},_decideExpandAll:function(){this.setExpandAll(this.getConfig("expandableAll")===!1?!1:"false"===this.$root.data("expandable-all")?!1:!0)},setExpandAll:function(e){this.expandAll=e},createCollapsibles:function(e){this._createCollapsibles(e)},_createCollapsibles:function(e){e.items&&e.items.length>0&&(this.$root||this.render(),this.$root.empty(),this._addCollapsibles(e),this.trigger("accordion:added"))},addCollapsibles:function(e){this._addCollapsibles(e),this.trigger("accordion:added")},_addCollapsibles:function(e){var t=e.items||[e.item],i=t.length;for(this.expanded=this.getConfig("expanded");i--;)this._addCollapsible(t[t.length-i-1]);this.expanded&&this.expanded.length&&this.trigger("accordion:expanded",this.expandAll?this.expanded:[this.expanded[this.expanded.length-1]])},addCollapsible:function(e){var t=this._addCollapsible(e);return this.trigger("accordion:added"),t},_addCollapsible:function(i){i.id=i[this.idAttribute];var n=e(this.getPopulatedTemplate(this.collapsibleTemplate,i)),s=n.find('[data-uxf-point="collapsible-title"]'),a=n.find('[data-uxf-point="collapsible-content"]');this.$collapsibles=this.$collapsibles.add(n),this.$collapsibleTitles=this.$collapsibleTitles.add(s),this.$collapsibleContents=this.$collapsibleContents.add(a);var o=this;return s.on("click",function(){o._toggleTitle(s),o._toggleContent(a)}),t.include(this.expanded,i[this.idAttribute])?(o._activateTitle(s),o._showContent(a)):(o._deactivateTitle(s),o._hideContent(a)),this.$root.append(n),n},_activateTitle:function(e){this.expandAll?e.addClass("ui-state-active"):(this.$collapsibleTitles.removeClass("ui-state-active"),e.addClass("ui-state-active"))},_showContent:function(e){this.expandAll?e.show():(this.$collapsibleContents.hide(),e.show())},_deactivateTitle:function(e){e.removeClass("ui-state-active")},_hideContent:function(e){e.hide()},_toggleTitle:function(i){var n=i.hasClass("ui-state-active"),s=i.parent().attr("data-id");if(this.expandAll)i.toggleClass("ui-state-active"),this.trigger("accordion:"+(n?"collapsed":"expanded"),[s]);else{var a=[];n||(i.toggleClass("ui-state-active"),this.trigger("accordion:"+(n?"collapsed":"expanded"),[s])),t.each(this.$collapsibleTitles.toArray(),function(t){var i=e(t),n=i.parent().attr("data-id");n!=s&&i.hasClass("ui-state-active")&&(i.removeClass("ui-state-active"),a.push(n))}),a.length&&this.trigger("accordion:collapsed",a)}},_toggleContent:function(e){this.expandAll?e.toggle():(this.$collapsibleContents.hide(),e.show())},getPane:function(e){var t=this.$collapsibles.filter('[data-id="'+e+'"]').find('[data-uxf-point="collapsible-content"]');return t},addToPane:function(e,t){var i=this.$collapsibles.filter('[data-id="'+e+'"]').find('[data-uxf-point="collapsible-content"]');i.append(t)},select:function(e){var t=this.$collapsibles.filter('[data-id="'+e+'"]');this._activateTitle(t.find('[data-uxf-point="collapsible-title"]')),this._showContent(t.find('[data-uxf-point="collapsible-content"]'))}});return a}),define("text!src/components/autoComplete/view/template/AutoCompleteTemplate.html",[],function(){return'<div data-uxf-point="autocomplete-container" class="uxf-autocomplete">\n	<div data-uxf-point="autocomplete-header"></div>\n	<div data-uxf-point="autocomplete-content">\n		<div data-uxf-point="autocomplete-content-message"></div>\n		<div data-uxf-point="autocomplete-content-data"></div>\n	</div>\n	<div data-uxf-point="autocomplete-footer"></div>\n</div>'}),define("text!src/components/autoComplete/view/template/MessageTemplate.html",[],function(){return"<a><%=text%></a>\n"}),define("src/components/autoComplete/view/AutoCompleteView",["jquery","underscore","lightsaber.core","src/components/itemlist/view/ItemListView","src/components/itemlist/view/GroupedItemListView","text!./template/AutoCompleteTemplate.html","text!./template/MessageTemplate.html"],function(e,t,i,n,s,a,o){var r=i.View.extend({publicMethods:["updateCompletions","hide","highlight"],config:{minChars:2,messageText:"No results were found.",delay:0},vmKeys:{"action.select":"select"},initialize:function(){this.updateItemFunction=this.getConfig("updateItemFunction")||this.highlight,this.actionViewModel=this.options.actionViewModel,this.viewModel.on("items:loaded",this._ensureItems,this),this.viewModel.on("items:selected",this._handleSelection,this)},_ensureItems:function(t){var i=e('[data-uxf-point="autocomplete-content-message"]',this.root);t.items.length?i.hide():i.show()},_createMessage:function(){var i,n=e(o).attr("data-theme");i=n?' data-theme="'+n+'"':this.theme?' data-theme="'+this.theme+'"':"",this.message=t.template(o)({text:this.getConfig("messageText"),themeStr:i})},_handleSelection:function(e){this.actionViewModel&&this.actionViewModel.handleAction(this.vmKeys["action.select"],e),this.hide()},_initContent:function(){var i;this.content=this.getConfig("content");var a=e('[data-uxf-point="autocomplete-content-data"]',this.root);if(this.content)a.append(this.content);else{var o=this.viewModel.isGroupedCollection();i=o?new s({viewModel:this.viewModel,el:a,config:{itemUpdateHTMLFunction:t.bind(this.updateItemFunction,this)},attributes:{theme:this.theme}}):new n({viewModel:this.viewModel,el:a,config:{itemUpdateHTMLFunction:t.bind(this.updateItemFunction,this)},attributes:{theme:this.theme}})}},_preRender:function(){var e=this.options.config&&this.options.config.template||a;this.template=t.template(e)},_postRender:function(){this.theme=this.$root.attr("data-theme"),this._createMessage(),this._initContent();var t=e('[data-uxf-point="autocomplete-content"]',this.root),i=e('[data-uxf-point="autocomplete-content-message"]',this.root);i.hide(),i.append(this.message),t.trigger("create"),this.$root.hide()},updateCompletions:function(e){var t=this;clearTimeout(this.myVar),this.myVar=setTimeout(function(){t._updateData(e)},t.getConfig("delay"))},_updateData:function(e){this.currentText=e,e.length>=this.getConfig("minChars")?(this.$root.show(),this.viewModel.currentModel.setFiltering({criteria:e})):this.$root.hide()},hide:function(){this.$root.hide()},highlight:function(t,i,n){if(this.currentText){var s;if(!n){s=e(i.children()[0]);var a="<mark>%s</mark>",o=new RegExp(this.currentText,"gi");s.html(s.text().replace(o,function(e){return a.replace("%s",e)}))}}}});return r}),define("text!src_web/components/picker/view/template/RangeSliderTemplate.html",[],function(){return'<div data-role="uxf-rangeslider" class="clearfix">\n	<button type="button" style="float: left;" data-uxf-point="control-prev" style="margin-bottom: 0.5em;" class="ui-button ui-state-default ui-corner-all ui-button-icon-only">&lt;&lt;</button>\n	<div data-uxf-point="slider" class="ui-widget-header" style="position: absolute; width: 5em; height: 2em; display: none; margin-left: 0.25em;"></div>\n	<ul style="float: left;" data-uxf-point="rangeslideritems"></ul>\n	<button type="button" style="float: left;" data-uxf-point="control-next" class="ui-button ui-state-default ui-corner-all ui-button-icon-only">&gt;&gt;</button>\n</div>'}),define("text!src_web/components/picker/view/template/RangeItemTemplate.html",[],function(){return'<li style="float: left; padding: 0 0.25em; cursor: pointer;" data-uxf-id="<%=id%>">\n	<div class="">\n		<div class="ui-widget-content" style="width: 5em; height: 2em;"></div>\n		<div style="margin-left: 0.5em;"><span><%=date%></span></div>\n	</div>\n</li>'}),define("src_web/components/picker/view/PickerView",["jquery","underscore","lightsaber.core","text!./template/RangeSliderTemplate.html","text!./template/RangeItemTemplate.html"],function(e,t,i,n,s){var a=i.View.extend({idAttr:"id",initialize:function(){t.bindAll(this,"prev","next","_onResize"),this.template=t.template(n),this.itemTemplate=t.template(s),this.idAttr=this.getConfig("idAttribute")||this.idAttr,this.viewModel.on("items:loaded",this.createItems,this)},_postRender:function(){this.$items=this.$root.find('> ul[data-uxf-point="rangeslideritems"]'),this.$prev=this.$root.find('> [data-uxf-point="control-prev"]'),this.$next=this.$root.find('> [data-uxf-point="control-next"]'),this.$prev.on("click",this.prev),this.$next.on("click",this.next),this.$root.resize(this._onResize),e(window).resize(this._onResize)},_onResize:function(){this.$slider&&this.$currentItem&&this.select(this.$currentItem,!0)},createItems:function(e){this.$items.empty(),this.addItems(e),this.$slider||(this.$slider=this.$('div[data-uxf-point="slider"]'),this.$slider.css("z-index",100)),this.select(this.getConfig("selected")||"1",!0)},addItems:function(e){for(var t=e.items||[e.item],i=t.length;i--;)this.addItem(t[t.length-i-1])},addItem:function(i){i.id=i[this.idAttr];var n=e(this.itemTemplate(i));n.data(i),n.on("click",t.bind(this.__select,this)),this.$items.append(n)},__select:function(t){this.select(e(t.currentTarget))},select:function(t,i){this.$currentItem="string"==typeof t?this.$items.find('[data-uxf-id="'+t+'"]'):t;var n=this.$currentItem.position();if(this.$slider.css("top",n.top),i)this.$slider.css("left",n.left),this.$slider.show(),this.trigger("item:selected",this.$currentItem.data());else{var s=this;this.$slider.animate({left:n.left},600,function(){e(this).show(),s.trigger("item:selected",s.$currentItem.data())})}},next:function(){var e=this.$currentItem.next();e&&e.length&&this.select(e)},prev:function(){var e=this.$currentItem.prev();e&&e.length&&this.select(e)}});return a}),define("text!src_web/components/breadcrumbs/view/template/BreadcrumbsTemplate.html",[],function(){return'<ul style="list-style: none; -webkit-padding-start: 10px;" class="uxf-breadcrumbs clearfix"></ul>'}),define("text!src_web/components/breadcrumbs/view/template/BCItemTemplate.html",[],function(){return'<li style="float: left;">\n	<a data-uxf-point="anchor_<%=route%>" style="text-decoration: underline;"><%=name%></a>\n	<span>&gt;</span>\n</li>'}),define("text!src_web/components/breadcrumbs/view/template/BCLastItemTemplate.html",[],function(){return'<li style="float: left;">\n	<%=name%>\n</li>'}),define("src_web/components/breadcrumbs/view/BreadcrumbsView",["jquery","underscore","backbone","lightsaber.core","text!./template/BreadcrumbsTemplate.html","text!./template/BCItemTemplate.html","text!./template/BCLastItemTemplate.html"],function(e,t,i,n,s,a,o){var r=n.View.extend({publicMethods:["add","remove"],template:s,itemTemplate:a,lastItemTemplate:o,initialize:function(){this.routes=[],this.routePos={},this.template=t.template(this.template),this.itemTemplate=t.template(this.itemTemplate),this.lastItemTemplate=t.template(this.lastItemTemplate)},add:function(e){void 0===this.routePos[e.route]?(this.routes.push(e),this.routePos[e.route]=this.routes.length-1,this._update()):(this.remove(e.route),this.add(e))},remove:function(e){if(void 0!==this.routePos[e]){for(var t=this.routePos[e],i=t,n=this.routes.length-1;n>=i;i++)delete this.routePos[this.routes[i].route];this.routes=this.routes.slice(0,t),this._update()}},_update:function(){var t=this.$root.detach();t.empty(),t.find("[data-uxf-point]").each(function(t,i){e(i).off()});for(var i=0,n=this.routes.length-1;n>=i;i++)t.append(i===n?this.lastItemTemplate(this.routes[i]):this.itemTemplate(this.routes[i])),this._attachSelectHandler(t,this.routes[i]);this.$el.append(t)},_attachSelectHandler:function(e,i){e.find('[data-uxf-point="anchor_'+i.route+'"]').on("click",t.bind(function(){this._handleSelect(i)},this))},_handleSelect:function(e){this.remove(e.route),this.add(e),e.handler.apply(this)}});return r}),define("src/components/collectionView/view/CollectionView",["jquery","underscore","lightsaber.core"],function(e,t,i){var n=i.View.extend({initialize:function(){t.bindAll(this,"_added","_removed","_changed","_subViewsRefresh","_cleared","_handlePage"),this.viewModel.on("items:loaded",this._subViewsRefresh,this),this.viewModel.on("items:emptied",this._cleared,this),this.viewModel.on("items:refreshed",this._subViewsRefresh,this),this.viewModel.on("items:added",this._added,this),this.viewModel.on("items:changed",this._changed,this),this.viewModel.on("items:removed",this._removed,this),this.viewModel.on("items:paginated",this._handlePage,this)},_handleSubViews:function(){this._prepareSubViews(),this._super()},_getCollectionViewData:function(){var e=this.viewModel.currentModel,i=this.viewModel._getSortFunction(),n=this.viewModel.getConfig("filterFunction"),s=this.getConfig("pageNum"),a=e.getPage(s);return a.data=t.isFunction(n)?t.filter(a.data,n):a.data,a.data=t.isFunction(i)?t.sortBy(a.data,i):a.data,a.data},_prepareSubViews:function(){this.subViews=[],this.sortedViewList=[];for(var e=this._getCollectionViewData(),t=0;t<e.length;++t){var i=e[t],n=this._createViewModel(i,t),s=this._createView(n),a=s.viewInstance;this.subViews.push(s),this.sortedViewList.push(a)}this.sortedViewList.length>0&&(this.sortedViewList[this.sortedViewList.length-1].$root.addClass("uxf-collection-lastItem"),this.sortedViewList[0].$root.addClass("uxf-collection-firstItem"))},_createViewModel:function(e,t){var n=function(e){return function(){var t=[].slice.call(arguments);t.splice(0,0,e,this),this.parentVM.handleAction.apply(this.parentVM,t)}},s=e.toJSON(),a=[];for(var o in s){var r={},l="models.model."+o;r[o]=l,r.options={setOnBind:!0,twoWay:!0},a.push(r)}var d={},u=this.viewModel.getConfig("actions");for(var h in u)d[h]=n(h);var c=new i.ViewModel({models:{model:e},dataBindings:a,config:{actions:d}});return c.parentVM=this.viewModel,c.parentVMIndex=t,c},_createView:function(e){var n=this.getConfig("viewType")||i.View,s=this.getConfig("viewOptions")||{};s=t.defaults({},s,{viewModel:e});var a;s.el?(a=s.el,delete s.el):a=this.getConfig("viewEl");var o=new n(s);o.$root.attr("data-uxf-point","uxf-collection-item");var r={viewInstance:o};return a&&(r.el=a),r},_changed:function(){},_cleared:function(){this._destroySubViews()},_subViewsRefresh:function(){this._destroySubViews(),this._handleSubViews()},_handlePage:function(e){var i=e&&e.paginationInfo&&e.paginationInfo.pageNum;t.isNumber(i)&&this.setConfig("pageNum",i),this._subViewsRefresh()},_added:function(e){var i=t.isUndefined(e.sortedIndex)?this.viewModel.currentModel.models.length-1:e.sortedIndex,n=this.viewModel.currentModel.models[i],s=this._createViewModel(n,i),a=this._createView(s),o=a.viewInstance;this.addSubView(a);for(var r=i;r<this.sortedViewList.length;++r)this.sortedViewList[i].viewModel.parentVMIndex+=1;this.sortedViewList.splice(i,0,o),0==i&&(this.sortedViewList[0].$root.addClass("uxf-collection-firstItem"),this.sortedViewList.length>1&&this.sortedViewList[1].$root.removeClass("uxf-collection-firstItem")),i<this.sortedViewList.length-1?this.sortedViewList[i+1].before(this.sortedViewList[i]):(this.sortedViewList[i].$root.addClass("uxf-collection-lastItem"),i>0&&this.sortedViewList[i-1].$root.removeClass("uxf-collection-lastItem"))},_removed:function(e){var t=e.sortedIndex||-1;if(0>t)for(var i=0;i<this.sortedViewList.length;++i){var n=this.sortedViewList[i].viewModel.models.model;if(n.cid==e.modelData.cid){t=i;break}}if(t>=0&&t<this.sortedViewList.length){var s=this.sortedViewList[t];if(s.destroy(),this.sortedViewList.splice(t,1),0==t&&this.sortedViewList.length>0&&this.sortedViewList[0].addClass("uxf-collection-firstItem"),t==this.sortedViewList.length&&this.sortedViewList.length>0){var a=t>0?t-1:0;this.sortedViewList[a].addClass("uxf-collection-lastItem")}for(var i=t;i<this.sortedViewList.length;++i)this.sortedViewList[t].viewModel.parentVMIndex-=1}},_destroySubViews:function(){for(var e in this._subViews)this._subViews[e].instance&&this._subViews[e].instance.destroy();this._subViews={},this.subViews=[],this.sortedViewList=[]},destroy:function(){this._destroySubViews(),this._super()}});return n}),define("text!src/components/wizard/view/template/template.html",[],function(){return'<div data-uxf-point="wizard">\n	<ul data-uxf-point="stepContainer"></ul>\n</div>\n'}),define("text!src/components/wizard/view/template/stepTemplate.html",[],function(){return'<!--&nbsp; here is to support inline-block usage for wizard placement in IE < 8. Do not remove! -->\n<li data-uxf-point="step" data-id="<%=id%>"><%=id%></li>&nbsp;'}),define("src/components/wizard/view/WizardView",["jquery","underscore","lightsaber.core","text!src/components/wizard/view/template/template.html","text!src/components/wizard/view/template/stepTemplate.html"],function(e,t,i,n,s){var a=i.View.extend({SIZE_MAPPING_CONFIG:"sizeMapping",RESOURCE_BUNDLE_CONFIG:"resourceBundle",template:n,stepTemplate:s,config:{sizeMapping:[{range:[1,2],className:"short"},{range:[3,5],className:"medium"},{range:[6,8],className:"long"}]},initialize:function(){this.initTemplate("template"),this.initTemplate("stepTemplate"),this._processSizeMapping(),this.viewModel.on("all",t.bind(this._handleSteps,this))},_processSizeMapping:function(){var t=this.getConfig(this.SIZE_MAPPING_CONFIG);this.sizeClasses="";for(var i=0;i<t.length;i++)this.sizeClasses+=" "+t[i].className;this.sizeClasses=e.trim(this.sizeClasses)},_getMapping:function(e){for(var i="",n=this.getConfig(this.SIZE_MAPPING_CONFIG),s=0;s<n.length;s++)if(n[s].range)e>=n[s].range[0]&&e<=n[s].range[1]&&(i+=" "+n[s].className);else if(n[s].list&&t.indexOf(n[s].list,e)>=0){if(n[s].override){i=n[s].className;break}i+=" "+n[s].className}return i},_applySizeMapping:function(e){var t=this._getMapping(e);t&&(this.$root.removeClass(this.sizeClasses),this.$root.addClass(t))},_getLocaleString:function(e,t){var i=this.viewModel.getConfig(this.RESOURCE_BUNDLE_CONFIG);if(!i)throw new Error("resourceBundle is missing for i18n template parsing");return i.getString(e,t)},_handleSteps:function(e,t,i){if(this.getConfig("flow")===t.flowID)switch(e){case"flow:start":this._handleStartFlow(t,i);break;case"flow:cancel":this._handleCancelFlow();break;case"flow:finish":this._handleFinishFlow();break;case"flow:load:step":this._handleFlowAction(t,i);break;case"flow:step:mark":this._handleMark(t,i);break;case"flow:step:unmark":this._handleUnmark(t,i)}},_handleEndFlow:function(){this.started=!1,this.$root.addClass("hidden")},_handleCancelFlow:function(){this._handleEndFlow()},_handleFinishFlow:function(){this._handleEndFlow()},_augmentStep:function(e,i){i[e.flowID].steps&&(this.stepsAmount=this._calculateStepsAmount(i[e.flowID].steps)),this.$root.find('[data-uxf-point="stepContainer"]').empty(),t.each(i[e.flowID].steps,t.bind(function(e){e.invisible||(e.i18n=this._getLocaleString,this.$root.find('[data-uxf-point="stepContainer"]').append(this.stepTemplate(e)))},this))},_handleStepSize:function(){this.$root.removeClass("hidden"),this.$root.attr("data-count",this.stepsAmount),this._applySizeMapping(this.stepsAmount),this.started=!0},_handleFlowAction:function(e,t){this.started?e.invisible||this._activate(e):(this._augmentStep(e,t),e.invisible?this.$root.find('[data-uxf-point="step"][data-id="'+e.actions.prev+'"]').addClass("active"):this._activate(e),this._handleStepSize())},_handleStartFlow:function(e,t){this.started||(this._augmentStep(e,t),e.invisible||this.$root.find('[data-uxf-point="step"]').eq(0).addClass("active"),this._handleStepSize())},_handleMark:function(e,t){this.$root.find('[data-uxf-point="step"][data-id="'+e.originalStepID+'"]').addClass(t)},_handleUnmark:function(e,t){this.$root.find('[data-uxf-point="step"][data-id="'+e.originalStepID+'"]').removeClass(t)},_calculateStepsAmount:function(e){for(var t=0,i=0;i<e.length;i++)e[i].invisible||t++;return t},_activate:function(e){var t,i,n=this.$root.find('[data-uxf-point="step"].active');n.data("id")!==e.id&&(n.removeClass("active"),i=this.$root.find('[data-uxf-point="step"][data-id="'+e.originalStepID+'"]'),0===i.length?this._insertStep(e):i.addClass("active"),t=this.$root.find('[data-uxf-point="step"]').length,this._applySizeMapping(t))},_insertStep:function(t){var i,n=e.extend("true",{},t);n.id=n.originalStepID,n.i18n=this._getLocaleString,i=e(this.stepTemplate(n)),i.addClass("active"),this.$root.find('[data-uxf-point="stepContainer"]').append(i),this.stepsAmount++,this.$root.attr("data-count",this.stepsAmount)},destroy:function(e){this.started=!1,this.sizeClasses="",this._super(e)}});return a}),define("src_web/lightsaber.components",["lightsaber.core","src/components/collection/viewmodel/CollectionViewModel","src/components/button/view/BaseButtonView","src/components/button/view/ButtonView","src/components/header/view/HeaderView","src/components/forminput/view/BaseFormElementView","src/components/forminput/view/FormElementTouchpointBaseView","src/components/forminput/view/InputTextView","src/components/forminput/view/InputTextAreaView","src/components/forminput/view/CheckboxView","src/components/forminput/view/RadioView","src_web/components/forminput/view/SelectView","src_web/components/forminput/view/WebSliderView","src/components/forminput/view/BaseSelectView","src/components/forminput/view/FlipSwitchView","src/components/forminput/view/BooleanView","src/components/forminput/view/FileLoaderView","src/components/searchinput/view/SearchInputViewBase","src/components/searchinput/view/SearchInputView","src/components/itemlist/view/BaseItemListView","src/components/itemlist/view/ItemListView","src/components/itemlist/view/GroupedItemListView","src/components/navbar/viewmodel/NavBarViewModel","src_web/components/navbar/view/NavBarView","src/components/navbar/viewmodel/SubNavBarViewModel","src_web/components/navbar/view/SubNavBarView","src/components/chart/view/ChartView","src_web/components/tabpanel/view/TabPanelView","src/components/proxy/viewmodel/ProxyViewModel","src/components/form/view/FormView","src/components/popup/view/PopupView","src/components/carousel/view/BaseCarouselView","src/components/carousel/view/CarouselView","src_web/components/application/view/Application","src_web/components/application/view/Module","src_web/components/application/view/Navigation","src_web/components/application/view/PopupModule","src/components/pagination/view/BasePaginationView","src/components/pagination/view/PaginationView","src_web/components/ftable/view/TableView","src/components/progressbar/view/ProgressBarView","src_web/components/accordion/view/AccordionView","src/components/autoComplete/view/AutoCompleteView","src_web/components/picker/view/PickerView","src_web/components/breadcrumbs/view/BreadcrumbsView","src/components/application/view/LoadingView","src/components/collectionView/view/CollectionView","src/components/wizard/view/WizardView"],function(e,t,i,n,s,a,o,r,l,d,u,h,c,p,f,g,m,v,_,b,w,y,x,C,M,V,S,E,T,k,I,A,D,P,R,N,$,O,F,B,L,U,j,H,z,q,K,W){return{Core:e,ActionViewModel:e.ViewModel,GroupedCollectionViewModel:t,FormElementViewModel:e.ViewModel,ItemListViewModel:t,TabPanelViewModel:t,CarouselViewModel:t,FragmentModule:R,PageModule:R,BarChartViewModel:e.ViewModel,ChartViewModel:e.ViewModel,SearchInputViewModel:e.ViewModel,ButtonViewModel:e.ViewModel,HeaderViewModel:e.ViewModel,PageViewModel:e.ViewModel,ContainerViewModel:e.ViewModel,PopupViewModel:e.ViewModel,CollectionViewModel:t,BaseButtonView:i,ButtonView:n,HeaderView:s,BaseFormElView:a,BaseFormElementView:o,InputTextView:r,InputTextAreaView:l,CheckboxView:d,RadioView:u,SelectView:h,SliderView:c,BaseSelectView:p,FlipSwitchView:f,BooleanInputView:g,FileLoaderView:m,SearchInputViewBase:v,SearchInputView:_,BaseItemListView:b,ItemListView:w,GroupedItemListView:y,NavBarViewModel:x,NavBarView:C,SubNavBarView:V,SubNavBarViewModel:M,ChartView:S,BarChartView:S,TabPanelView:E,ProxyViewModel:T,FormView:k,PopupView:I,BaseCarouselView:A,CarouselView:D,Application:P,Module:R,Navigation:N,PopupModule:$,BasePaginationView:O,PaginationView:F,TableView:B,ProgressBarView:L,AccordionView:U,AutoCompleteView:j,PickerView:H,BreadcrumbsView:z,LoadingView:q,CollectionView:K,WizardView:W}
}),define("src/ui/dynamic/BaseDynamicConfigurator",["underscore","knockout","knockout.mapping","knockout.validation","lightsaber.core"],function(e,t,i,n,s){var a=function(e){this.initialize(e)};return e.extend(a.prototype,{PATH_SEP:".",BUILDER_PROP:"builders.default",VALIDATOR_PROP:"validators.default",RESOLVER_PROP:"resolvers.default",config:{},initialize:function(e){this.builders={},this.validators={},this.resolvers={},e=e||{},this.config=$.extend(!0,{},this.config,e.config);var t=this.getConfig("validation");n.init(t,!0)},getConfig:function(e){var t=s.Utils.getValueByPath(this.config,e);return t},getBuilder:function(t){var i,n;return e.isUndefined(t)?i=this._getDefaultBuilder():(n=this._constructBuilderPath(t),e.isUndefined(this.builders[n])?(i=this.getConfig(n),i=e.isUndefined(i)?this._getDefaultBuilder():this.builders[n]=new i({configurator:this})):i=this.builders[n]),i},getValidator:function(t){var i,n;return e.isUndefined(t)?i=this._getDefaultValidator():(n=this._constructValidatorPath(t),e.isUndefined(this.validators[n])?(i=this.getConfig(n),i=e.isUndefined(i)?this._getDefaultValidator():this.validators[n]=new i({config:{resourceBundle:this.getConfig("resourceBundle")}})):i=this.validators[n]),i},getResolver:function(){var t,i=this._constructDefaultResolverPath();if(e.isUndefined(this.resolvers[i])){if(t=this.getConfig(i),e.isUndefined(t))throw new Error("Default resolver must be defined at root level!");t=this.resolvers[i]=new t}else t=this.resolvers[i];return t},_getDefaultBuilder:function(){var t,i=this._constructDefaultBuilderPath();if(e.isUndefined(this.builders[i])){if(t=this.getConfig(i),e.isUndefined(t))throw new Error("Default builder must be defined at root level!");t=this.builders[i]=new t({configurator:this})}else t=this.builders[i];return t},_getDefaultValidator:function(){var t,i=this._constructDefaultValidatorPath();if(e.isUndefined(this.validators[i])){if(t=this.getConfig(i),e.isUndefined(t))throw new Error("Default validator must be defined at root level!");t=this.validators[i]=new t({config:{resourceBundle:this.getConfig("resourceBundle")}})}else t=this.validators[i];return t},_constructDefaultBuilderPath:function(){return this.BUILDER_PROP},_constructBuilderPath:function(e){return e+this.PATH_SEP+this.BUILDER_PROP},_constructDefaultValidatorPath:function(){return this.VALIDATOR_PROP},_constructDefaultResolverPath:function(){return this.RESOLVER_PROP},_constructValidatorPath:function(e){return e+this.PATH_SEP+this.VALIDATOR_PROP},destroy:function(){this.builders=null,this.validators=null,this.resolvers=null,this.config=null}}),e.extend(a,{extend:s.Utils.extend,mergeProperties:{config:"merge"}}),a}),define("src/ui/dynamic/builders/Builder",["underscore","knockout","knockout.mapping","knockout.validation","lightsaber.core"],function(e,t,i,n,s){var a=function(e){this.initialize(e)};return e.extend(a.prototype,{DEFAULT_PROPS:[],PATH_SEP:".",DEFAULT_VALUE:"",initialize:function(e){this.preInitialize(e),this.configurator=e.configurator,this.postInitialize(e)},preInitialize:function(){},postInitialize:function(){},setConfigurator:function(e){this.configurator=e},setViewModel:function(e){this.viewModel=e},getViewModel:function(){return this.viewModel},buildMapping:function(n,s,a){var o,r,l=this.getViewModel(),d={components:{},value:{}};s=s||{},n=n||{},a=a||"";var u=l.getConfig("mapping");return u&&(o=u.observe,r=u.copy),d.observe=e.extend([],["value","visible","enabled","components","components.value"]),d.copy=e.extend([[],"validations","mapping","options","cardinality"]),d.observe=d.observe.concat(o),d.copy=d.copy.concat(r),d.components.key=this._createKeyMethod(n),d.components.create=this._createCreateMethod(n,s,a),d.value.create=function(n){var s;return e.isObject(n.data)?s=i.fromJS(n.data):(s=t.observable(n.data),s=s.extend({backup:!0})),s},d},_createKeyMethod:function(e){var t=this;return function(i){return t.key(i,e)}},_createCreateMethod:function(e,t,i){var n=this;return function(s){return n.create(s,e,t,i)}},key:function(e){return t.unwrap(e.id)},create:function(n,s,a,o){var r,l,d,u,h,c=this.getViewModel(),p=c.getConfig("createUniqueId");if(n.data.template=n.data.template||"default",!n.data.metadataPath&&n.parent&&n.parent.metadataPath&&n.parent.components&&(n.data.metadataPath=n.parent.metadataPath+".components."+n.parent.components.peek().length),e.isArray(n.data.components))for(var f=0,g=n.data.components.length;g>f;f++)h=n.data.components[f],h.metadataPath=n.data.metadataPath?n.data.metadataPath+".components."+f:"metadata.components."+f,e.isUndefined(h.uniqueId)&&p&&(h.uniqueId=n.data.uniqueId+"."+f),h.index=f;return r=this._getDataPath(n.data,o),this._mapProperties(n.data),this._syncValues(n.data,s,r),l=this.configurator.getBuilder(n.data.type),d=l.buildMapping(s,a,r),u=i.fromJS(n.data,d),u.mask&&t.observable(u.value)&&(u.value=u.value.extend({mask:u.mask})),this._addValidations(u),this._subscribe(u,s,o),this._mapReferenceData(u,a),this._addDependencies(u),c.addPath(r,u),u},_getDataPath:function(e,t){var i;return i=e&&e.path?0===e.path.indexOf("/")?e.path:t?t+this.PATH_SEP+e.path:e.path:t?"undefined"==typeof e.id?t:t+this.PATH_SEP+e.id:e.id,i&&0===i.indexOf("/")&&(i=i.slice(1)),i},_syncValues:function(i,n,a){var o;i.components||(e.isUndefined(i.value)?(o=s.Utils.getValueByPath(n,a,!0),e.isUndefined(o)&&(i.value="")):o=s.Utils.setOrInitValueByPath(n,a,t.unwrap(i.value),!0),e.isUndefined(o)||(i.value=e.isObject(o)?e.extend({},i.value,o):o))},_subscribe:function(t,i,n){var s,a,o=this,r=o.getViewModel(),l=!0;t&&t.value?(t.value.isValidating&&(t.value.isValidating.subscribe(function(){l=!1,t.value.isValidating()||(t.value.isValid()?o._updateValueAfterSuccessfullValidation(t,i,n):r.validate(!1))}),t.value.isValid.subscribe(function(){t.value.isValidating()||(t.value.isValid()?o._updateValueAfterSuccessfullValidation(t,i,n):r.validate(!1))})),e.isFunction(t.value)?t.value.subscribe(function(){l=!1,r.markDirty(),t.value.isValidating&&t.value.isValid?t.value.isValidating()||(t.value.isValid()?o._updateValueAfterSuccessfullValidation(t,i,n):r.markInvalid()):t.value.isValidating||t.value.isValid&&t.value.isValid()&&o._updateValueAfterSuccessfullValidation(t,i,n)}):e.isObject(t.value)&&this._subscribeComplex(t)):(s=this._getDataPath(t,n),a=t.components,a.subscribe(function(t){var i="data."+s,n=r.getValueByPath(i,!0);e.isUndefined(n)||e.each(n,function(i,s){var a=e.find(t,function(e){return e.id===s});e.isUndefined(a)&&delete n[s]});var a=i.split(".").slice(0,-1).join("."),o=i.split(".").slice(-1),l=r.getValueByPath(a,!0);e.isUndefined(l)||e.isEmpty(l[o])&&delete l[o]}))},_subscribeComplex:function(e){var n,s=this.getViewModel(),a=!0;t.computed(function(){a?(a=!1,i.toJS(e.value)):(n=i.toJS(e.value),i.fromJS(n,e.value),s.markDirty(),e.value.isValid.valueHasMutated())})},_updateValueAfterSuccessfullValidation:function(e,n,a,o){var r,l=this.getViewModel(),d=this._getDataPath(e,a);r="__ko_mapping__"in e.value?i.toJS(e.value):t.unwrap(e.value),s.Utils.setOrInitValueByPath(n,d,r),l.notifyPath(d,r),o||l.validate(!1)},_mapProperties:function(t){t&&t.mapping&&e.each(t.mapping,function(i,n){t[n]=t[i],e.isObject(t[i])&&delete t[i]})},_mapReferenceData:function(t,i){var n;t&&t.validValues&&e.isString(t.validValues)&&(n=s.Utils.getValueByPath(i,t.validValues),t.validValues=n)},_addValidations:function(e){var t;if(e&&e.value)if(t=e.validations,t&&t.length>0)for(var i=0,n=t.length;n>i;i++)this._augmentValidation(e,t[i]);else this._augmentPlaceholderValidations(e.value)},_augmentValidation:function(e,t){var i=this._buildRule(e,t);this._attachValidation(e,i)},_buildRule:function(t,i){var n,s,a=e.keys(i)[0],o=this.configurator.getValidator(t.type),r=o.getRule(a),l=this.getViewModel(),d=l.getConfig("resourceBundle");return r.validation.params=i[a],r.validation.context=t,e.isUndefined(i.message)||(d&&(n=d.getString(i.message)),r.validation.message=e.isUndefined(n)?i.message:n),r.validation.onlyIf&&(s=r.validation.onlyIf,r.validation.onlyIf=function(){return s(t)}),e.has(i,"target")&&(r.target=i.target),r},_attachValidation:function(n,a){var o,r=this.getViewModel();if(t.isObservable(n.value))n.value.extend(a);else if(e.isObject(n.value))if(this._augmentPlaceholderValidations(n.value),e.has(a,"target"))o=s.Utils.getValueByPath(n,a.target,!0),o.extend(a),o.isValid.subscribe(function(){o.isValidating()||(o.isValid()?r.validate(!1):r.markInvalid())});else{var l=e.once(function(){i.toJS(n.value)}),d=t.observable(n.value).extend(a);t.computed(function(){l(),d.valueHasMutated()})}},_augmentPlaceholderValidations:function(e){e.isValid=t.observable(!0),e.isValidating=t.observable(!1),e.isModified=t.observable(!1)},_addDependencies:function(i){var n,s,a,o,r=this.configurator.getConfig("deps.resolveOnLoad"),l={};if(i.visible=i.visible||t.observable(!0),i.enabled=i.enabled||t.observable(!0),!e.isUndefined(i.deps))for(var d=0;d<i.deps.length;d++)n={},s=i.deps[d],a=s.rule,o=this._getResolverMethod(a),o&&(l=this._getDepConfig(i,s),n.visible=l.target.visible,n.enabled=l.target.enabled,this._subscribeToChangeForDeps(o,i,l.source,l.target,n,s),e.isUndefined(s.resolveOnLoad)||(r=s.resolveOnLoad),r&&(l.source.isArray&&l.source.isArray()?o.call(i,l.source,l.target,n,s):t.isObservable(l.source)?o.call(i,l.source,l.target.value,n,s):o.call(i,l.source.value,l.target.value,n,s)))},_getDepConfig:function(t,i){var n={};if(e.has(i,"sourcePath"))n.source=s.Utils.getValueByPath(t,i.sourcePath,!0);else{if(!e.has(i,"sourceIdPath"))throw new Error("No path is defined for dependency source: ",t.id);n.source=s.Utils._getValueByPropPath(t,i.sourceIdPath,"id",!0)}if(e.has(i,"targetPath"))n.target=s.Utils.getValueByPath(t,i.targetPath,!0);else{if(!e.has(i,"targetIdPath"))throw new Error("No path is defined for dependency target: ",t.id);n.target=s.Utils._getValueByPropPath(t,i.targetIdPath,"id",!0)}return n},_subscribeToChangeForDeps:function(e,i,n,s,a,o){n.isArray&&n.isArray()?n.subscribe(function(){e.call(i,n,s,a,o)}):t.isObservable(n)?n.subscribe(function(){e.call(i,n.value,s.value,a,o)}):t.isObservable(n.value)&&n.value.subscribe(function(){e.call(i,n.value,s.value,a,o)})},_getResolverMethod:function(t){var i,n=this.viewModel[t];return e.isUndefined(n)&&(i=this.configurator.getResolver(),n=i[t]),n}}),e.extend(a,{extend:s.Utils.extend}),a}),define("src/ui/dynamic/validators/BaseValidator",["underscore","knockout","knockout.mapping","knockout.validation","lightsaber.core"],function(e,t,i,n,s){var a=function(e){this.initialize(e)};return e.extend(a.prototype,{PATH_SEP:".",RULES_PROP:"rules",initialize:function(e){e=e||{},this.config=$.extend(!0,{},this.config,e.config)},getConfig:function(e){var t=s.Utils.getValueByPath(this.config,e);return t},getRule:function(t){var i,s,a=this.getConfig("resourceBundle"),o=this.getConfig(this.RULES_PROP+this.PATH_SEP+t);return o?(i=e.extend({},n.rules[t],o),i&&i.validator&&e.isString(i.validator)&&(i.validator=e.bind(this[i.validator],this)),i&&i.onlyIf&&e.isString(i.onlyIf)&&(i.onlyIf=e.bind(this[i.onlyIf],this)),s={validation:i}):s={validation:e.extend({},n.rules[t])},a&&(s.validation.message=a.getString(s.validation.message)||s.validation.message),s},remoteValidator:function(t,i,n){var a=new s.RESTModel(null,{rest:{create:{url:i}}});a.set("value",t),a.on("sync",function(t,i){!i||e.isUndefined(i.isValid)||e.isUndefined(i.message)?e.isObject(i)&&n(i.isValid):n(i)}),a.save()}}),e.extend(a,{extend:s.Utils.extend,mergeProperties:{config:"merge"}}),a}),define("src/ui/dynamic/validators/Validator",["underscore","knockout","knockout.mapping","knockout.validation","lightsaber.core","src/ui/dynamic/validators/BaseValidator"],function(e,t,i,n,s,a){var o=a.extend({config:{rules:{remote:{async:!0,validator:"remoteValidator",message:"The value is invalid."}}}});return e.extend(o,{extend:s.Utils.extend,mergeProperties:{config:"merge"}}),o}),define("src/ui/dynamic/resolvers/BaseResolver",["underscore","knockout","knockout.mapping","knockout.validation","lightsaber.core"],function(e,t,i,n,s){var a=function(e){this.initialize(e)};return e.extend(a.prototype,{initialize:function(e){e=e||{},this.config=$.extend(!0,{},this.config,e.config)}}),e.extend(a,{extend:s.Utils.extend,mergeProperties:{config:"merge"}}),a}),define("src/ui/dynamic/resolvers/Resolver",["underscore","knockout","knockout.mapping","knockout.validation","lightsaber.core","src/ui/dynamic/resolvers/BaseResolver"],function(e,t,i,n,s,a){var o=a.extend({disableWhenEmpty:function(i,n,s){var a=t.unwrap(i);s.enabled(""===a||e.isUndefined(a)?!1:!0)},hideWhenEmpty:function(i,n,s){var a=t.unwrap(i);s.visible(""===a||e.isUndefined(a)?!1:!0)},disableAndHideWhenEmpty:function(i,n,s){var a=t.unwrap(i);""===a||e.isUndefined(a)?(s.enabled(!1),s.visible(!1)):(s.enabled(!0),s.visible(!0))}});return o}),define("tpl!src/ui/dynamic/templates/containerTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-element-container">    <label class="form-element--label" data-bind="text: $data.label"></label>    <!-- ko foreach: $data.components -->        <!-- ko template: {type: $data.template, data: $data} --><!-- /ko -->     <!-- /ko --></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/textTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-element" data-bind="visible: $data.visible, css: {\'is-mandatory\': $data.mandatory}">    <label class="form-element--label" data-bind="text: $data.label"></label>    <input type="text" class="form-element--control" data-bind="value: $data.value, enable: $data.enabled">    <span class="form-element--error-message" data-bind="validationMessage: $data.value"></span></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/numberTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-element" data-bind="visible: $data.visible, css: {\'is-mandatory\': $data.mandatory}">    <label class="form-element--label" data-bind="text: $data.label"></label>    <input type="number" class="form-element--control" data-bind="value: $data.value, attr: {step: $data.step, min: $data.min, max: $data.max}">    <span class="form-element--error-message" data-bind="validationMessage: $data.value"></span></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/textareaTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-element" data-bind="visible: $data.visible, css: {\'is-mandatory\': $data.mandatory}">    <label class="form-element--label" data-bind="text: $data.label"></label>    <textarea class="form-element--control" data-bind="value: $data.value, enable: $data.enabled"></textarea>    <span class="form-element--error-message" data-bind="validationMessage: $data.value"></span></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/selectTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-element" data-bind="visible: $data.visible, css: {\'is-mandatory\': $data.mandatory}">    <label class="form-element--label" data-bind="text: $data.label"></label>    <select class="form-element--control"        data-bind="            options: $data.validValues,            optionsText: \'label\',            optionsValue: \'id\',            value: $data.value,             enable: $data.enabled">    </select>    <span class="form-element--error-message" data-bind="validationMessage: $data.value"></span></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/checkboxTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-element" data-bind="visible: $data.visible, css: {\'is-mandatory\': $data.mandatory}">    <label class="form-element--label" data-bind="text: $data.label, attr: {for: $data.uniqueId}"></label>    <!-- ko if: $data.validValues -->        <input type="checkbox" class="form-element--control"             data-bind="checked: $data.validValues, attr: {value: $data.value, id: $data.uniqueId}, enable: $data.enabled">    <!-- /ko -->    <!-- ko ifnot: $data.validValues -->        <input type="checkbox" class="form-element--control"             data-bind="checked: $data.value, enable: $data.enabled, attr: {id: $data.uniqueId}">    <!-- /ko -->    <span class="form-element--error-message" data-bind="validationMessage: $data.value"></span></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/radioTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-element" data-bind="visible: $data.visible, css: {\'is-mandatory\': $data.mandatory}">    <label class="form-element--label" data-bind="text: $data.label"></label>    <div class="form-element--control-group" data-bind="foreach: $data.validValues">        <span class="form-element--control-container">            <label class="form-element--label"                 data-bind="text: $data.label, attr: {for: $index.apply($parent)}"></label>            <input type="radio" class="form-element--control"                 data-bind="checked: $parent.value, attr: {value: $data.id, name: $parent.name, id: $index.apply($parent)}, enable: $parent.enabled">        </span>    </div>    <span class="form-element--error-message" data-bind="validationMessage: $data.value"></span></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/dateTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-line">    <label class="form-line-label" data-bind="text: $data.label"></label>    <input type="date" class="form-control" data-bind="value: $data.value"></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/genericWidgetTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div data-bind="view: id"></div>');return __p.join("")}}),define("src/ui/dynamic/DynamicConfigurator",["underscore","knockout","knockout.mapping","knockout.validation","lightsaber.core","src/ui/dynamic/BaseDynamicConfigurator","src/ui/dynamic/builders/Builder","src/ui/dynamic/validators/Validator","src/ui/dynamic/resolvers/Resolver","tpl!src/ui/dynamic/templates/containerTemplate.html","tpl!src/ui/dynamic/templates/textTemplate.html","tpl!src/ui/dynamic/templates/numberTemplate.html","tpl!src/ui/dynamic/templates/textareaTemplate.html","tpl!src/ui/dynamic/templates/selectTemplate.html","tpl!src/ui/dynamic/templates/checkboxTemplate.html","tpl!src/ui/dynamic/templates/radioTemplate.html","tpl!src/ui/dynamic/templates/dateTemplate.html","tpl!src/ui/dynamic/templates/genericWidgetTemplate.html"],function(e,t,i,n,s,a,o,r,l,d,u,h,c,p,f,g,m,v){var _=a.extend({config:{builders:{"default":o},validators:{"default":r},resolvers:{"default":l},deps:{resolveOnLoad:!0},validation:{insertMessages:!1,decorateInputElement:!0,errorsAsTitle:!1,errorElementClass:"is-invalid",grouping:{deep:!0}},templates:{"default":d,container:d,text:u,number:h,textarea:c,select:p,checkbox:f,radio:g,date:m,widget:v}}});return _}),define("tpl!src/ui/dynamic/templates/mainTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form-container" data-bind="foreach: $data.metadata.components">    <div data-bind="template: {type: $data.template, data: $data}"></div>        </div>');return __p.join("")}}),define("src/ui/dynamic/DynamicView",["underscore","knockout","lightsaber.core","src/ui/dynamic/DynamicConfigurator","tpl!src/ui/dynamic/templates/mainTemplate.html"],function(e,t,i,n,s){var a=i.View.extend({config:{template:s},preRender:function(){this._initConfigurator(),this.viewModel.on("reload",this._reload,this)},_initConfigurator:function(){var t,i=this.getConfig("configurator"),s=n;e.isUndefined(i)||("function"==typeof i&&(s=i,i={}),t=new s({config:i}),this.viewModel.setDynamicConfigurator(t))},_reload:function(){t.cleanNode(this.root),this.$root.empty(),this._handleTemplate(),this._applyDataBindings()},_handleInlineView:function(t,n,s){var a=this.getConfig("scope")||this.scope,o=i.Utils.getValueByPath(a,n.name),r=e.extend({},s);delete r.options,e.each(r.mapping,function(e,t){r[t]=i.Utils.getValueByPath(r,e,!0)});var l=new i.ObservableViewModel({data:r,bindingContext:r}),d=e.extend({},{el:t,viewModel:l,config:{parentViewModel:this.viewModel}},s.options);this.create(n.uniqueId,o,d)},_createContext:function(t){var i=this._getKnockoutContext(t),n=e.bind(this._handleInlineView,this);n.view=this;var s=this.getConfig("vmPath");e.isUndefined(t)&&(t=this.viewModel.get(!0),e.isUndefined(s)||(t.metadata=this.viewModel.getValueByPath(s,!0))),i.prototype=t;var a=new i(this.vmKeys,n);return a}});return a}),define("tpl!src/ui/dynamic/templates/mainLazyTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form--container">                   <div class="form" data-point="form">                       <div class="form--content" data-bind="foreach: $data.metadata.components" data-point="formContent">            <div data-bind="template: {type: $data.template, data: $data}"></div>        </div>    </div></div>');return __p.join("")}}),define("tpl!src/ui/dynamic/templates/innerLazyTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="form--inner-container">    <div class="form-container" data-bind="foreach: $data.metadata.components">        <div data-bind="template: {type: $data.template, data: $data}"></div>    </div></div>');return __p.join("")}}),define("src/ui/dynamic/LazyDynamicView",["underscore","knockout","lightsaber.core","src/ui/dynamic/DynamicView","tpl!src/ui/dynamic/templates/mainLazyTemplate.html","tpl!src/ui/dynamic/templates/innerLazyTemplate.html"],function(e,t,i,n,s,a){var o=n.extend({ANIMATION_CONFIG_PROP:"animationDuration",PX_UNIT:"px",TARGET_PROP:"target",FORM_SELECTOR:'[data-point="form"]',INNER_TEMPLATE_PROP:"innerTemplate",IS_ROOT_PROP:"isRoot",NAVIGATE_ACTION:"navigate",BACK_ACTION:"back",config:{template:s,innerTemplate:a},postRender:function(){this.$target=this.getConfig(this.TARGET_PROP)||this.$el.find(this.FORM_SELECTOR)},navigate:function(e,t,i){this.guard||(this.guard=!0,this._increaseWidth(),this._createInnerDynamicView(i),this._slideForward(),this.viewModel.handleAction(this.NAVIGATE_ACTION))},_slideForward:function(){var t=this.$target.width()/this.$target.children().length,i=this.$target.position().left-t;this.$target.animate({left:i+this.PX_UNIT},this.getConfig(this.ANIMATION_CONFIG_PROP),e.bind(this._handleNavigate,this))},back:function(){this._slideBack()},_handleNavigate:function(){this.guard=!1},_slideBack:function(){var t=this.$target.width()/this.$target.children().length,i=this.$target.position().left+t;this.$target.position().left<0&&this.$target.animate({left:i+this.PX_UNIT},this.getConfig(this.ANIMATION_CONFIG_PROP),e.bind(this._handleSlideEnd,this))},_handleSlideEnd:function(){this.destroy(),this._reduceWidth()},_increaseWidth:function(){var e=this.$target.width()/this.$target.children().length,t=e*(this.$target.children().length+1);this.$target.css({width:t})},_reduceWidth:function(){var e=this.$target.width()/(this.$target.children().length+1),t=e*this.$target.children().length;this.$target.css({width:t})},_createInnerDynamicView:function(){this.create("innerDynamicView",o,{el:this.$target,viewModel:this.viewModel,config:{target:this.$target,template:this.getConfig(this.INNER_TEMPLATE_PROP),innerTemplate:this.getConfig(this.INNER_TEMPLATE_PROP)}})},destroy:function(){this.getConfig(this.IS_ROOT_PROP)&&(this.$target.remove(),this.$target=null),this.selfDestroy()},remove:function(){return this.$el.children().slice(-1).remove(),this.stopListening(),this}});return o}),define("src/ui/dynamic/DynamicViewModel",["underscore","knockout","knockout.mapping","knockout.validation","lightsaber.core","src/ui/dynamic/DynamicConfigurator"],function(e,t,i,n,s,a){var o=s.ObservableViewModel.extend({defaults:{metadata:{isDirty:t.observable(!1),isValid:t.observable(!0),components:[]}},config:{createUniqueId:!0,validateOnLoad:!1,showErrorsOnLoad:!1},initialize:function(e){var t=e||{},i=t.config||{};this._pathsMap=this._pathsMap||{},this.markValid(),this.initDirtyState(),this.setConfig("initial",!0),this.setConfig("loaded",!1),this._createConfigurator(i.configurator)},init:function(){throw new Error("Method `init` has been removed! Please use `load` instead")},load:function(e,t){var i=this.getConfig("loaded");i?(this._pathsMap={},this.reset(),this.set("isDirty",!1),this.set("isValid",!0),this._load(e,t),this.trigger("reload")):this._load(e,t),this.initDirtyState(),this.setConfig("loaded",!0)},clear:function(){this.data&&(this.data.__ko_mapping__&&(this.data.__ko_mapping__.components=null),this.data.data={},this.data.metadata={})},getConfigurator:function(){return this.configurator},_initValidation:function(){},_load:function(e,t){this._preLoad();var i=this._initData(t);this._store(i),this._build(e),this.augmentMetadata()},_preLoad:function(){},augmentMetadata:function(){},resetDirtyState:function(){this.setConfig("initial",!0),this.initDirtyState()},_initData:function(e){return e||{}},_createConfigurator:function(e){e?(this.configurator=e,this.configurator.config.viewModel=this):this.configurator=new a({config:{resourceBundle:this.getConfig("resourceBundle"),viewModel:this}})},setDynamicConfigurator:function(e){this.configurator=e},_store:function(e){this.set("data",e,!0)},_build:function(t){var i,n=this.configurator.getBuilder(),s=this.get("data",!0),a=this.getConfig("createUniqueId");n.setViewModel(this),e.isUndefined(t.uniqueId)&&a&&(t.uniqueId=e.uniqueId("id."));for(var o=0,r=t.components.length;r>o;o++)i=t.components[o],i.metadataPath="metadata.components."+o,e.isUndefined(i.uniqueId)&&a&&(i.uniqueId=t.uniqueId+"."+o);var l=n.buildMapping(s,t);l.observe.push("metadata"),l.observe.push("metadata.reference"),this._augment(),this.set("metadata",t,l),this.getConfig("validateOnLoad")&&this._validate(null,!0),this.setConfig("initial",!1)},set:function(){this._setGuard_=!0,this._super.apply(this,arguments),this._setGuard_=!1,this.validateIfNeeded(this._validationNeeded_showErrors_)},validateIfNeeded:function(e){this._validationNeeded_&&(this._validationNeeded_=!1,this.validate(e))},validate:function(e){var t=this.getConfig("initial");return this._setGuard_?(this._validationNeeded_=!0,void(this._validationNeeded_showErrors_=this._validationNeeded_showErrors_||e!==!1)):void(t||this._validate(e,t))},_validate:function(e,t){var i=this.get("metadata",!0),s=n.group(i);i.isValid()?this.markValid():this.markInvalid(),s&&(t||e===!1?this.getConfig("showErrorsOnLoad")&&s.showAllMessages():s.showAllMessages())},isValid:function(){return this.get("isValid")===!0},markValid:function(){this.set("isValid",!0)},markInvalid:function(){this.set("isValid",!1)},initDirtyState:function(){this.set("isDirty",!1)},markDirty:function(){this.set("isDirty",!0)},showErrors:function(){var e=this.get("metadata",!0),t=n.group(e);t.showAllMessages()},filterComponents:function(e,i){var n=t.utils.arrayFilter(e.components,i);return n},getParent:function(e){var t=e.metadataPath.split(".").slice(0,-2).join("."),i=this.getValueByPath(t,!0);return i},duplicateInParent:function(t,n,s){var a,o,r=this.getParent(t),l=r.components,d=i.toJS(t),u=this.getConfig("createUniqueId");d=e.omit(d,s),d=e.extend(d,n),u&&(d.uniqueId=r.uniqueId+"."+l.peek().length),o=l.mappedIndexOf({id:t.id}),l.mappedCreate(d),a=l.peek()[l.peek().length-1];var h=l.peek();return h.splice(o,0,a),h.pop(),this._adjustAllMetadataPaths(h,r.metadataPath),l(h),this.enableForValidation(a),a},removeFromValidation:function(e){e.__kv_traversed=!0},enableForValidation:function(t){e.isUndefined(t.__kv_traversed)||delete t.__kv_traversed},replaceInParent:function(t,n,s){var a,o,r=t.metadataPath.split(".").slice(0,-1).join("."),l=t.metadataPath.split(".").slice(0,-2).join("."),d=this.getValueByPath(r,!0),u=i.toJS(t);u=e.omit(u,s),u=e.extend(u,n),a=i.fromJS(u,t.__ko_mapping__),o=d.mappedIndexOf({id:t.id}),d()[o]=a,this._adjustAllMetadataPaths(d,l),d.valueHasMutated()},removeInParent:function(t){var i=t.metadataPath.split(".").slice(0,-1).join("."),n=t.metadataPath.split(".").slice(0,-2).join("."),s=this.getValueByPath(i,!0),a=s.peek(),o=e.reject(a,function(e){return e.id===t.id});this._adjustAllMetadataPaths(o,n),s(o)},_adjustAllMetadataPaths:function(e,i){for(var n=t.unwrap(e),s=0;s<n.length;s++)this._adjustMetadataPath(n[s],s,i)},_adjustMetadataPath:function(e,t,i){e.metadataPath=i+".components."+t,e.index=t,e.components&&this._adjustAllMetadataPaths(e.components,e.metadataPath)},_augment:function(){this._attachHelpers(),this.set("templates",this.configurator.getConfig("templates"),!0)},_attachHelpers:function(){var t=this.getConfig("helpers");e.isUndefined(t)||(e.each(t,e.bind(this._attachSingleHelper,this)),this.set("helpers",t,!0))},_attachSingleHelper:function(t,i,n){if(e.isString(t))n[i]=e.bind(this[i],this);else{if(!e.isFunction(t))throw new Error("Incorrect helper "+i);n[i]=e.bind(t,this)}},addPath:function(n,s){var a;e.isUndefined(s)||e.has(s,"components")||(t.isObservable(s.value)?(this._pathsMap[n]=this._pathsMap[n]||[],this._pathsMap[n].push(s.value)):e.isObject(s.value)&&(a=i.toJS(s.value),e.each(a,function(e,t){this._addInnerPath(n+"."+t,s.value[t])},this)))},_addInnerPath:function(n,s){var a;t.isObservable(s)?(this._pathsMap[n]=this._pathsMap[n]||[],this._pathsMap[n].push(s)):!e.isArray(s)&&e.isObject(s)?(a=i.toJS(s),e.each(a,function(e,t){this._addInnerPath(n+"."+t,e)},this)):e.isArray(s)},notifyPath:function(t,i){var n;if(n=this._pathsMap[t],e.isUndefined(n))!e.isArray(i)&&e.isObject(i)&&e.each(i,function(e,i){this.notifyPath(t+"."+i,e)},this);else for(var s=0;s<n.length;s++)n[s](i)}});return o}),define("tpl!src/ui/modal/templates/modalTemplate.html",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="uxf-modal">    <div class="uxf-modal-header" data-uxf-point="modalHeader">        <button class="uxf-control-button" data-bind="click: \'close\'">Close</button>    </div>    <div class="uxf-modal-content" data-uxf-point="modalContent"></div>    <div class="uxf-modal-footer" data-uxf-point="modalFooter"></div></div>');return __p.join("")}}),define("src/ui/modal/ModalView",["underscore","lightsaber.core","tpl!src/ui/modal/templates/modalTemplate.html"],function(e,t,i){var n=t.View.extend({config:{template:i},NO_OP:function(){},initialize:function(e){this.openCallback=e.open||this.NO_OP,this.closeCallback=e.close||this.NO_OP},postRender:function(){var t=this.getConfig("closeOnBlur");this.$screen=$('<div class="uxf-modal-screen"></div>'),this.$screen.insertBefore(this.$root),t&&this.$screen.on("click.modalview",e.bind(this.close,this)),this.open()},open:function(){this.openCallback(this.$root)},close:function(e){var t=this.closeCallback(this.$root,e);t||this.destroy()},destroy:function(){var e=this.getConfig("closeOnBlur");this.$screen&&(e&&this.$screen.off("click.modalview"),this.$screen.remove()),this._super()}});return n}),define("src/lightsaber.ui",["src/ui/dynamic/DynamicView","src/ui/dynamic/LazyDynamicView","src/ui/dynamic/DynamicViewModel","src/ui/dynamic/DynamicConfigurator","src/ui/dynamic/builders/Builder","src/ui/dynamic/validators/Validator","src/ui/dynamic/resolvers/Resolver","src/ui/modal/ModalView"],function(e,t,i,n,s,a,o,r){return{DynamicView:e,LazyDynamicView:t,DynamicViewModel:i,DynamicConfigurator:n,Builder:s,Validator:a,Resolver:o,ModalView:r}}),define("lightsaber_UXFLibMetaData",[],function(){}),define("src_web/lightsaber.library",function(){}),define("lightsaber",["src_web/lightsaber.components","src/lightsaber.ui","src_web/lightsaber.library"],function(e,t){return e.UI=t,e});